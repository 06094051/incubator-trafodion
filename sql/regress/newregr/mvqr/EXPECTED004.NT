-- @@@ START COPYRIGHT @@@
--
-- (C) Copyright 2014-2015 Hewlett-Packard Development Company, L.P.
--
--  Licensed under the Apache License, Version 2.0 (the "License");
--  you may not use this file except in compliance with the License.
--  You may obtain a copy of the License at
--
--      http://www.apache.org/licenses/LICENSE-2.0
--
--  Unless required by applicable law or agreed to in writing, software
--  distributed under the License is distributed on an "AS IS" BASIS,
--  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
--  See the License for the specific language governing permissions and
--  limitations under the License.
--
-- @@@ END COPYRIGHT @@@
>>obey TEST004(set_up);
>>----------------------------------------------------
>>-------------------- set up section ----------------
>>----------------------------------------------------
>>
>>control query default MVQR_REWRITE_LEVEL '3';

--- SQL operation complete.
>>control query default MVQR_REWRITE_ENABLED_OPTION 'ON';

--- SQL operation complete.
>>control query default QUERY_CACHE '0';

--- SQL operation complete.
>>control query default MVQR_PUBLISH_TO 'PRIVATE';

--- SQL operation complete.
>>control query default REF_CONSTRAINT_NO_ACTION_LIKE_RESTRICT '1';

--- SQL operation complete.
>>control query default MULTI_JOIN_THRESHOLD '2';

--- SQL operation complete.
>>
>>-- Turn this on so query descriptor will still be generated for single-table
>>-- queries with no Group By.
>>control query default MVQR_ALL_JBBS_IN_QD 'ON';

--- SQL operation complete.
>>
>>-- This is needed temporarily to work around a problem with automatic loggable
>>-- columns that causes a timestamp mismatch error when the schema is dropped.
>>control query default MV_AUTOMATIC_LOGGABLE_COLUMN_MAINTENANCE 'OFF';

--- SQL operation complete.
>>
>>obey GetMvDesc;
>>--set pattern $$VERS_CURR_SCHEMA_VERSION$$ 2400;
>>set param ?mvDescSubId  -2;
>>set param ?mvName 'SUMBY_DAY';
>>set param ?mvSchemaName 'SUMBY';
>>
>>-- query the TEXT SMD table for the descriptor of an MV
>>-- Note: Cast to UTF8, but we don't want to exceed the 20000 byte line
>>--       length limit of the NT version of awk (file CropDescriptor.ksh).
>>prepare getMVDescFromTEXT from
+>  select cast(text0 || coalesce(text1, '') || coalesce(text2, '') || coalesce(text3, '')
+>                    || coalesce(text4, '') || coalesce(text5, '') || coalesce(text6, '')
+>                    || coalesce(text7, '') || coalesce(text8, '') as char(15000 bytes) character set utf8)  as mv_descriptor_text
+>  from
+>		 (SELECT o.object_uid as uid0, text as text0
+>		         from  HP_DEFINITION_SCHEMA.TEXT t,
+>		               HP_DEFINITION_SCHEMA.objects o,
+>		               HP_SYSTEM_CATALOG.SYSTEM_SCHEMA.schemata s
+>		         where o.object_name = ?mvName
+>		           and o.OBJECT_TYPE = 'MV'
+>		           and o.object_uid = t.object_uid
+>		           and o.schema_uid = s.schema_uid
+>		           and s.schema_name = ?mvSchemaName
+>		           and t.object_sub_id = ?mvDescSubId
+>		           and sequence_num = 0 ) as row0
+>	left outer join
+>		 (SELECT o.object_uid as uid1, text as text1
+>		         from  HP_DEFINITION_SCHEMA.TEXT t,
+>		               HP_DEFINITION_SCHEMA.objects o,
+>		               HP_SYSTEM_CATALOG.SYSTEM_SCHEMA.schemata s
+>		         where o.object_name = ?mvName
+>		           and o.OBJECT_TYPE = 'MV'
+>		           and o.object_uid = t.object_uid
+>		           and o.schema_uid = s.schema_uid
+>		           and s.schema_name = ?mvSchemaName
+>		           and t.object_sub_id = ?mvDescSubId
+>		           and sequence_num = 1 ) as row1
+>		 on uid0 = uid1
+>	left outer join
+>		 (SELECT o.object_uid as uid2, text as text2
+>		         from  HP_DEFINITION_SCHEMA.TEXT t,
+>		               HP_DEFINITION_SCHEMA.objects o,
+>		               HP_SYSTEM_CATALOG.SYSTEM_SCHEMA.schemata s
+>		         where o.object_name = ?mvName
+>		           and o.OBJECT_TYPE = 'MV'
+>		           and o.object_uid = t.object_uid
+>		           and o.schema_uid = s.schema_uid
+>		           and s.schema_name = ?mvSchemaName
+>		           and t.object_sub_id = ?mvDescSubId
+>		           and sequence_num = 2 ) as row2
+>		 on uid0 = uid2
+>	left outer join
+>		 (SELECT o.object_uid as uid3, text as text3
+>		         from  HP_DEFINITION_SCHEMA.TEXT t,
+>		               HP_DEFINITION_SCHEMA.objects o,
+>		               HP_SYSTEM_CATALOG.SYSTEM_SCHEMA.schemata s
+>		         where o.object_name = ?mvName
+>		           and o.OBJECT_TYPE = 'MV'
+>		           and o.object_uid = t.object_uid
+>		           and o.schema_uid = s.schema_uid
+>		           and s.schema_name = ?mvSchemaName
+>		           and t.object_sub_id = ?mvDescSubId
+>		           and sequence_num = 3 ) as row3
+>		 on uid0 = uid3
+>	left outer join
+>		 (SELECT o.object_uid as uid4, text as text4
+>		         from  HP_DEFINITION_SCHEMA.TEXT t,
+>		               HP_DEFINITION_SCHEMA.objects o,
+>		               HP_SYSTEM_CATALOG.SYSTEM_SCHEMA.schemata s
+>		         where o.object_name = ?mvName
+>		           and o.OBJECT_TYPE = 'MV'
+>		           and o.object_uid = t.object_uid
+>		           and o.schema_uid = s.schema_uid
+>		           and s.schema_name = ?mvSchemaName
+>		           and t.object_sub_id = ?mvDescSubId
+>		           and sequence_num = 4 ) as row4
+>		 on uid0 = uid4
+>	left outer join
+>		 (SELECT o.object_uid as uid5, text as text5
+>		         from  HP_DEFINITION_SCHEMA.TEXT t,
+>		               HP_DEFINITION_SCHEMA.objects o,
+>		               HP_SYSTEM_CATALOG.SYSTEM_SCHEMA.schemata s
+>		         where o.object_name = ?mvName
+>		           and o.OBJECT_TYPE = 'MV'
+>		           and o.object_uid = t.object_uid
+>		           and o.schema_uid = s.schema_uid
+>		           and s.schema_name = ?mvSchemaName
+>		           and t.object_sub_id = ?mvDescSubId
+>		           and sequence_num = 5 ) as row5
+>		 on uid0 = uid5
+>	left outer join
+>		 (SELECT o.object_uid as uid6, text as text6
+>		         from  HP_DEFINITION_SCHEMA.TEXT t,
+>		               HP_DEFINITION_SCHEMA.objects o,
+>		               HP_SYSTEM_CATALOG.SYSTEM_SCHEMA.schemata s
+>		         where o.object_name = ?mvName
+>		           and o.OBJECT_TYPE = 'MV'
+>		           and o.object_uid = t.object_uid
+>		           and o.schema_uid = s.schema_uid
+>		           and s.schema_name = ?mvSchemaName
+>		           and t.object_sub_id = ?mvDescSubId
+>		           and sequence_num = 6 ) as row6
+>		 on uid0 = uid6
+>	left outer join
+>		 (SELECT o.object_uid as uid7, text as text7
+>		         from  HP_DEFINITION_SCHEMA.TEXT t,
+>		               HP_DEFINITION_SCHEMA.objects o,
+>		               HP_SYSTEM_CATALOG.SYSTEM_SCHEMA.schemata s
+>		         where o.object_name = ?mvName
+>		           and o.OBJECT_TYPE = 'MV'
+>		           and o.object_uid = t.object_uid
+>		           and o.schema_uid = s.schema_uid
+>		           and s.schema_name = ?mvSchemaName
+>		           and t.object_sub_id = ?mvDescSubId
+>		           and sequence_num = 7 ) as row7
+>		 on uid0 = uid7
+>	left outer join
+>		 (SELECT o.object_uid as uid8, text as text8
+>		         from  HP_DEFINITION_SCHEMA.TEXT t,
+>		               HP_DEFINITION_SCHEMA.objects o,
+>		               HP_SYSTEM_CATALOG.SYSTEM_SCHEMA.schemata s
+>		         where o.object_name = ?mvName
+>		           and o.OBJECT_TYPE = 'MV'
+>		           and o.object_uid = t.object_uid
+>		           and o.schema_uid = s.schema_uid
+>		           and s.schema_name = ?mvSchemaName
+>		           and t.object_sub_id = ?mvDescSubId
+>		           and sequence_num = 8 ) as row8
+>		 on uid0 = uid8;

--- SQL command prepared.
>>
>>
>>prepare checkPlan from
+>  select operator, tname
+>  from table(explain(NULL, 'QUERYSTMT'))
+>  where operator like '%_SCAN%'
+>  order by tname;

--- SQL command prepared.
>>
>>create schema range;

--- SQL operation complete.
>>set schema range;

--- SQL operation complete.
>>set pattern $$MVSchemaName$$ RANGE;
>>
>>
>>create table fact (
+>	fday   int,
+>	fmonth int,
+>	fyear  int,
+>	fitem  int,
+>	fquant int,
+>	fprice numeric (8,2),
+>	dimkey int);

--- SQL operation complete.
>>
>>create table dim1 (dkey int not null not droppable primary key, dimdata int);

--- SQL operation complete.
>>create table dim2 (dkey int not null not droppable primary key, dimdata int);

--- SQL operation complete.
>>
>>--alter table fact add constraint fact_fk1 foreign key (dimkey) references dim1(dkey);
>>--alter table fact add constraint fact_fk2 foreign key (dimkey) references dim2(dkey);
>>
>>insert into fact values
+> ( 4, 1,2010,4,4,83, 8),
+> (23, 1,2010,2,4,67, 3),
+> (11, 3,2010,1,4,39, 6),
+> ( 8, 4,2010,4,2,56, 5),
+> (16, 4,2010,3,2,67, 9),
+> ( 4, 5,2010,2,4,40, 2),
+> ( 6, 7,2010,3,1,63, 6),
+> ( 8, 7,2010,5,4,90, 3),
+> (19, 7,2010,3,2,50, 8),
+> ( 1, 8,2010,3,3, 4, 3),
+> ( 2, 9,2010,3,4, 8, 1),
+> ( 4, 9,2010,2,5,62, 8),
+> (15, 9,2010,5,3,45, 4),
+> (31,10,2010,2,1,39, 8),
+> (12,11,2010,4,5,27, 9),
+> ( 1,12,2010,3,5,21, 8),
+> (10,12,2010,3,5,31, 1),
+> (22, 1,2011,5,4,12, 2),
+> ( 7, 6,2011,1,4,73, 5),
+> (10, 6,2011,5,2,61, 1),
+> (16, 6,2011,1,4,76, 4),
+> (31, 6,2011,3,2,66, 7),
+> (22, 7,2011,4,1,15, 3),
+> (25, 7,2011,5,5,75, 7),
+> ( 5, 8,2011,1,4,87, 3),
+> (10,10,2011,4,1,66, 6),
+> (24,11,2011,4,3,88, 8),
+> (13,12,2011,1,1,59, 7),
+> (15,12,2011,3,3,95, 5),
+> (25,12,2011,2,3,69, 4),
+> ( 9, 1,2012,2,2,71, 9),
+> ( 1, 2,2012,2,1,49, 6),
+> ( 9, 2,2012,4,3,65, 6),
+> ( 9, 2,2012,3,3,67, 3),
+> (17, 2,2012,2,3,98, 3),
+> ( 1, 3,2012,2,4,55, 7),
+> (10, 3,2012,5,4,11, 8),
+> (28, 3,2012,1,5, 7, 5),
+> (21, 4,2012,1,3,32, 8),
+> (23, 4,2012,4,1,25, 4),
+> (27, 4,2012,4,2,61, 5),
+> (28, 5,2012,5,1,44, 8),
+> ( 2, 6,2012,4,3,31, 2),
+> (21, 6,2012,4,3,70, 5),
+> (29, 6,2012,5,1,51, 5),
+> ( 9, 7,2012,1,5,14, 4),
+> (29, 7,2012,2,3,53, 5),
+> (21, 8,2012,3,1,58,10),
+> (18,12,2012,2,3,20,10),
+> (20,12,2012,5,1, 4, 6);

--- 50 row(s) inserted.
>>
>>insert into dim1 values
+> (1, 1), (2, 2), (3, 3), (4, 4), (5, 5), (6, 6), (7, 7), (8, 8), (9, 9), (10, 10);

--- 10 row(s) inserted.
>>
>>insert into dim2 values
+> (1, 1), (2, 2), (3, 3), (4, 4), (5, 5), (6, 6), (7, 7), (8, 8), (9, 9), (10, 10);

--- 10 row(s) inserted.
>>
>>create table numtypes
+>(
+>  i    int not null,
+>  si   smallint,
+>  li   largeint check(li<10000000000),
+>  n42  numeric(4,2),
+>  n61u numeric(6,1) unsigned,
+>  r    real,
+>  d    double precision,
+>  f5   float(5)
+>);

--- SQL operation complete.
>>
>>
>>create table dttypes
+>(
+>  i  int,
+>  d  date,
+>  t  time,
+>  t2 time(2),
+>  t6 time(6),
+>  ts timestamp,
+>  ts0 timestamp(0),
+>  ts3 timestamp(3),
+>  yr interval year not null check(yr >= interval '0' year),
+>  ym interval year(3) to month,
+>  mon interval month(4),
+>  sec interval second(2, 4),
+>  mnt interval minute(1),
+>  ms interval minute to second,
+>  hr interval hour(8),
+>  hm interval hour to minute,
+>  hs interval hour to second,
+>  dy interval day(3),
+>  dh interval day to hour,
+>  dm interval day to minute,
+>  ds interval day(7) to second(6)
+>);

--- SQL operation complete.
>>
>>create table t_rangespec
+>  (int_1       smallint default 0 not null
+>  ,int_2       smallint default 0 not null
+>  ,int_3       smallint default 0 not null
+>  ,primary key (int_1, int_2, int_3)
+>  ) no partition;

--- SQL operation complete.
>>
>>insert into t_rangespec values 
+>  (1, 1,  3), (1, 1,  2), (1, 1,  1), (1, 1,  0),
+>  (1, 1, -1), (1, 1, -2), (1, 1, -3), (1, 1, -4);

--- 8 row(s) inserted.
>>
>>obey TEST004(create_mvs);
>>--===========================================
>>-- MJVs
>>--===========================================
>>
>>-- No range preds.
>>create mv range_mjv1
+>	refresh on request
+>	initialized on create
+>	as  select fprice, fquant, 
+>		         dimkey, dimdata
+>	    from fact, dim1
+>	    where dimkey=dkey;

*** WARNING[12112] A secondary index CAT.RANGE.RANGE_MJV1_428586379_9992 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>set pattern $$MVName$$ RANGE_MJV1;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.RANGE_MJV1
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B0'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874076204477' isKeyCovered='1' numCols='2'>
          CAT.RANGE.DIM1
        </Table>
        <Table id='T2' TS='212223874074032783' isKeyCovered='1' numCols='8'>
          CAT.RANGE.FACT
        </Table>
      </JBBCList>
      <JoinPredList>
        <JoinPred id='J158'>
          <Column id='C130' tableId='T1' colIndex='0' isNullable='0'>
            CAT.RANGE.DIM1.DKEY
          </Column>
          <Column ref='C121'>
          </Column>
        </JoinPred>
      </JoinPredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O137' name='SYS_SYSKEY1'>
        <Column id='C114' tableId='T2' colIndex='0' isNullable='0'>
          CAT.RANGE.FACT.SYSKEY
        </Column>
      </Output>
      <Output id='O152' name='FQUANT'>
        <Column id='C119' tableId='T2' colIndex='5'>
          CAT.RANGE.FACT.FQUANT
        </Column>
      </Output>
      <Output id='O155' name='FPRICE'>
        <Column id='C120' tableId='T2' colIndex='6'>
          CAT.RANGE.FACT.FPRICE
        </Column>
      </Output>
      <Output id='O158' name='DIMKEY'>
        <Column id='C121' tableId='T2' colIndex='7'>
          CAT.RANGE.FACT.DIMKEY
        </Column>
      </Output>
      <Output id='O164' name='DIMDATA'>
        <Column id='C131' tableId='T1' colIndex='1'>
          CAT.RANGE.DIM1.DIMDATA
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- No range preds, only dimdata*2 provided.
>>-- Not back-joinable.
>>create mv range_mjv11
+>	recompute
+>	initialized on create
+>	as  select fprice, fquant, 
+>		   dimdata*2 data2
+>	    from fact, dim1
+>	    where dimkey=dkey;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ RANGE_MJV11;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.RANGE_MJV11
  </Table>
  <Misc isIncremental='0'>
  </Misc>
  <JBB id='B0'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874079579197' numCols='2'>
          CAT.RANGE.DIM1
        </Table>
        <Table id='T2' TS='212223874079579197' numCols='8'>
          CAT.RANGE.FACT
        </Table>
      </JBBCList>
      <JoinPredList>
        <JoinPred id='J125'>
          <Column id='C95' tableId='T1' colIndex='0' isNullable='0'>
            CAT.RANGE.DIM1.DKEY
          </Column>
          <Column id='C86' tableId='T2' colIndex='7'>
            CAT.RANGE.FACT.DIMKEY
          </Column>
        </JoinPred>
      </JoinPredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O102' name='DATA2'>
        <Expr id='X102'>
          <BinaryOper id='S102' op='*'>
            <Column id='C96' tableId='T1' colIndex='1'>
              CAT.RANGE.DIM1.DIMDATA
            </Column>
            <NumericVal id='S101' scale='0'>
              2
            </NumericVal>
          </BinaryOper>
        </Expr>
      </Output>
      <Output id='O119' name='FQUANT'>
        <Column id='C84' tableId='T2' colIndex='5'>
          CAT.RANGE.FACT.FQUANT
        </Column>
      </Output>
      <Output id='O122' name='FPRICE'>
        <Column id='C85' tableId='T2' colIndex='6'>
          CAT.RANGE.FACT.FPRICE
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- single value range pred
>>create mv range_mjv2
+>	refresh on request
+>	initialized on create
+>	as  select fprice, fquant, 
+>		         dimkey, dimdata
+>	    from fact, dim1
+>	    where dimkey=dkey
+>	      and dimdata = 10;

*** WARNING[12112] A secondary index CAT.RANGE.RANGE_MJV2_543344611_1113 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>set pattern $$MVName$$ RANGE_MJV2;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.RANGE_MJV2
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B0'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874079579197' isKeyCovered='1' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM1
        </Table>
        <Table id='T2' TS='212223874079579197' isKeyCovered='1' numCols='8'>
          CAT.RANGE.FACT
        </Table>
      </JBBCList>
      <JoinPredList>
        <JoinPred id='J166'>
          <Column id='C136' tableId='T1' colIndex='0' isNullable='0'>
            CAT.RANGE.DIM1.DKEY
          </Column>
          <Column ref='C127'>
          </Column>
        </JoinPred>
      </JoinPredList>
      <RangePredList>
        <Range id='R183' sqlType='INTEGER SIGNED ALLOWS NULLS'>
          <Column id='C137' tableId='T1' colIndex='1'>
            CAT.RANGE.DIM1.DIMDATA
          </Column>
          <OpEQ>
            <NumericVal scale='0'>
              10
            </NumericVal>
          </OpEQ>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O145' name='SYS_SYSKEY1'>
        <Column id='C120' tableId='T2' colIndex='0' isNullable='0'>
          CAT.RANGE.FACT.SYSKEY
        </Column>
      </Output>
      <Output id='O160' name='FQUANT'>
        <Column id='C125' tableId='T2' colIndex='5'>
          CAT.RANGE.FACT.FQUANT
        </Column>
      </Output>
      <Output id='O163' name='FPRICE'>
        <Column id='C126' tableId='T2' colIndex='6'>
          CAT.RANGE.FACT.FPRICE
        </Column>
      </Output>
      <Output id='O166' name='DIMKEY'>
        <Column id='C127' tableId='T2' colIndex='7'>
          CAT.RANGE.FACT.DIMKEY
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- Between range pred
>>create mv range_mjv3
+>	refresh on request
+>	initialized on create
+>	as  select fprice, fquant, 
+>		         dimkey, dimdata
+>	    from fact, dim1
+>	    where dimkey=dkey
+>	      and dimdata between 5 and 15;

*** WARNING[12112] A secondary index CAT.RANGE.RANGE_MJV3_274213521_1113 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>set pattern $$MVName$$ RANGE_MJV3;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.RANGE_MJV3
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B0'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874079579197' isKeyCovered='1' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM1
        </Table>
        <Table id='T2' TS='212223874079579197' isKeyCovered='1' numCols='8'>
          CAT.RANGE.FACT
        </Table>
      </JBBCList>
      <JoinPredList>
        <JoinPred id='J182'>
          <Column id='C151' tableId='T1' colIndex='0' isNullable='0'>
            CAT.RANGE.DIM1.DKEY
          </Column>
          <Column ref='C142'>
          </Column>
        </JoinPred>
      </JoinPredList>
      <RangePredList>
        <Range id='R217' sqlType='INTEGER SIGNED ALLOWS NULLS'>
          <Column ref='C152'>
          </Column>
          <OpBT startIsIncluded='1' endIsIncluded='1'>
            <NumericVal scale='0'>
              5
            </NumericVal>
            <NumericVal scale='0'>
              15
            </NumericVal>
          </OpBT>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O161' name='SYS_SYSKEY1'>
        <Column id='C135' tableId='T2' colIndex='0' isNullable='0'>
          CAT.RANGE.FACT.SYSKEY
        </Column>
      </Output>
      <Output id='O176' name='FQUANT'>
        <Column id='C140' tableId='T2' colIndex='5'>
          CAT.RANGE.FACT.FQUANT
        </Column>
      </Output>
      <Output id='O179' name='FPRICE'>
        <Column id='C141' tableId='T2' colIndex='6'>
          CAT.RANGE.FACT.FPRICE
        </Column>
      </Output>
      <Output id='O182' name='DIMKEY'>
        <Column id='C142' tableId='T2' colIndex='7'>
          CAT.RANGE.FACT.DIMKEY
        </Column>
      </Output>
      <Output id='O188' name='DIMDATA'>
        <Column id='C152' tableId='T1' colIndex='1'>
          CAT.RANGE.DIM1.DIMDATA
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- Between range pred
>>create mv range_mjv4
+>	refresh on request
+>	initialized on create
+>	as  select fprice, fquant, 
+>		         dimkey, dimdata
+>	    from fact, dim1
+>	    where dimkey=dkey
+>	      and dimdata*2 between 10 and 30;

*** WARNING[12112] A secondary index CAT.RANGE.RANGE_MJV4_621196431_1113 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>set pattern $$MVName$$ RANGE_MJV4;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.RANGE_MJV4
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B0'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874079579197' isKeyCovered='1' numCols='2'>
          CAT.RANGE.DIM1
        </Table>
        <Table id='T2' TS='212223874079579197' isKeyCovered='1' numCols='8'>
          CAT.RANGE.FACT
        </Table>
      </JBBCList>
      <JoinPredList>
        <JoinPred id='J176'>
          <Column id='C143' tableId='T1' colIndex='0' isNullable='0'>
            CAT.RANGE.DIM1.DKEY
          </Column>
          <Column ref='C134'>
          </Column>
        </JoinPred>
      </JoinPredList>
      <RangePredList>
        <Range id='R200' sqlType='NUMERIC(11) SIGNED ALLOWS NULLS'>
          <Expr id='X150'>
            <BinaryOper id='S150' op='*'>
              <Column ref='C144'>
              </Column>
              <NumericVal id='S149' scale='0'>
                2
              </NumericVal>
            </BinaryOper>
          </Expr>
          <OpBT startIsIncluded='1' endIsIncluded='1'>
            <NumericVal scale='0'>
              10
            </NumericVal>
            <NumericVal scale='0'>
              30
            </NumericVal>
          </OpBT>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O155' name='SYS_SYSKEY1'>
        <Column id='C127' tableId='T2' colIndex='0' isNullable='0'>
          CAT.RANGE.FACT.SYSKEY
        </Column>
      </Output>
      <Output id='O170' name='FQUANT'>
        <Column id='C132' tableId='T2' colIndex='5'>
          CAT.RANGE.FACT.FQUANT
        </Column>
      </Output>
      <Output id='O173' name='FPRICE'>
        <Column id='C133' tableId='T2' colIndex='6'>
          CAT.RANGE.FACT.FPRICE
        </Column>
      </Output>
      <Output id='O176' name='DIMKEY'>
        <Column id='C134' tableId='T2' colIndex='7'>
          CAT.RANGE.FACT.DIMKEY
        </Column>
      </Output>
      <Output id='O182' name='DIMDATA'>
        <Column id='C144' tableId='T1' colIndex='1'>
          CAT.RANGE.DIM1.DIMDATA
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>--==============================================
>>-- Single-table MVs to test ranges + constraints
>>--==============================================
>>
>>create mv mvrngcon_i(x)
+>    refresh on request
+>    initialized on create
+>    as select i
+>       from numtypes
+>       where i > 100;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_I;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_I
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874078344924' isKeyCovered='1' numCols='9' rangeBits='00000004'>
          CAT.RANGE.NUMTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R167' sqlType='INTEGER SIGNED NO NULLS'>
          <Column ref='C110'>
          </Column>
          <OpGE isNormalized='1'>
            <NumericVal scale='0'>
              101
            </NumericVal>
          </OpGE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O138' name='SYS_SYSKEY1'>
        <Column id='C109' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.NUMTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O141' name='X'>
        <Column id='C110' tableId='T1' colIndex='1' isNullable='0'>
          CAT.RANGE.NUMTYPES.I
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_si(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, si
+>       from numtypes
+>       where si between 50 and 33000;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_SI;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_SI
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874110623489' isKeyCovered='1' numCols='9' rangeBits='00000002'>
          CAT.RANGE.NUMTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R202' sqlType='SMALLINT SIGNED ALLOWS NULLS'>
          <Column ref='C127'>
          </Column>
          <OpGE isNormalized='1'>
            <NumericVal scale='0'>
              50
            </NumericVal>
          </OpGE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O155' name='SYS_SYSKEY1'>
        <Column id='C125' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.NUMTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O158' name='X'>
        <Column id='C126' tableId='T1' colIndex='1' isNullable='0'>
          CAT.RANGE.NUMTYPES.I
        </Column>
      </Output>
      <Output id='O161' name='Y'>
        <Column id='C127' tableId='T1' colIndex='2'>
          CAT.RANGE.NUMTYPES.SI
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_li(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, li
+>       from numtypes
+>       where li < 10000000000;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_LI;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_LI
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874110623489' isKeyCovered='1' numCols='9' rangeBits='00000001'>
          CAT.RANGE.NUMTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R168' sqlType='LARGEINT ALLOWS NULLS'>
          <Column ref='C114'>
          </Column>
          <OpLE>
            <NumericVal scale='0'>
              9999999999
            </NumericVal>
          </OpLE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O139' name='SYS_SYSKEY1'>
        <Column id='C111' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.NUMTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O142' name='X'>
        <Column id='C112' tableId='T1' colIndex='1' isNullable='0'>
          CAT.RANGE.NUMTYPES.I
        </Column>
      </Output>
      <Output id='O148' name='Y'>
        <Column id='C114' tableId='T1' colIndex='3'>
          CAT.RANGE.NUMTYPES.LI
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_n42(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, n42
+>       from numtypes
+>       where n42 < 100;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_N42;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_N42
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874110623489' isKeyCovered='1' numCols='9' rangeBits='00000080'>
          CAT.RANGE.NUMTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R170' sqlType='NUMERIC(4,2) SIGNED ALLOWS NULLS'>
          <Column ref='C116'>
          </Column>
          <!-- empty Range element indicates IS NOT NULL -->
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O141' name='SYS_SYSKEY1'>
        <Column id='C112' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.NUMTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O144' name='X'>
        <Column id='C113' tableId='T1' colIndex='1' isNullable='0'>
          CAT.RANGE.NUMTYPES.I
        </Column>
      </Output>
      <Output id='O153' name='Y'>
        <Column id='C116' tableId='T1' colIndex='4'>
          CAT.RANGE.NUMTYPES.N42
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_n61u(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, n61u
+>       from numtypes
+>       where n61u between 0 and 100;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_N61U;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_N61U
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874110623489' isKeyCovered='1' numCols='9' rangeBits='00000040'>
          CAT.RANGE.NUMTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R202' sqlType='NUMERIC(6,1) UNSIGNED ALLOWS NULLS'>
          <Column ref='C130'>
          </Column>
          <OpLE isNormalized='1'>
            <NumericVal scale='1'>
              100.0
            </NumericVal>
          </OpLE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O155' name='SYS_SYSKEY1'>
        <Column id='C125' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.NUMTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O158' name='X'>
        <Column id='C126' tableId='T1' colIndex='1' isNullable='0'>
          CAT.RANGE.NUMTYPES.I
        </Column>
      </Output>
      <Output id='O170' name='Y'>
        <Column id='C130' tableId='T1' colIndex='5'>
          CAT.RANGE.NUMTYPES.N61U
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_r(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, r
+>       from numtypes
+>       where r < 3.40282347e+45;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_R;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_R
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874110623489' isKeyCovered='1' numCols='9' rangeBits='00000020'>
          CAT.RANGE.NUMTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R170' sqlType='REAL ALLOWS NULLS'>
          <Column ref='C118'>
          </Column>
          <!-- empty Range element indicates IS NOT NULL -->
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O141' name='SYS_SYSKEY1'>
        <Column id='C112' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.NUMTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O144' name='X'>
        <Column id='C113' tableId='T1' colIndex='1' isNullable='0'>
          CAT.RANGE.NUMTYPES.I
        </Column>
      </Output>
      <Output id='O159' name='Y'>
        <Column id='C118' tableId='T1' colIndex='6'>
          CAT.RANGE.NUMTYPES.R
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>
>>--==========================================================
>>-- Additional MVs to test ranges on date/time/interval types
>>--==========================================================
>>
>>create mv mvrngcon_d(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, d
+>       from dttypes
+>       where d > date'2000-01-30';

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_D;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_D
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874078657398' isKeyCovered='1' numCols='22' rangeBits='00000002'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R298' sqlType='DATE ALLOWS NULLS'>
          <Column ref='C177'>
          </Column>
          <OpGE isNormalized='1'>
            <NumericVal scale='0'>
              2451574
            </NumericVal>
          </OpGE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O230' name='SYS_SYSKEY1'>
        <Column id='C175' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O233' name='X'>
        <Column id='C176' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O236' name='Y'>
        <Column id='C177' tableId='T1' colIndex='2'>
          CAT.RANGE.DTTYPES.D
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_t(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, t
+>       from dttypes
+>       where t between time'10:00:00' and time'11:25:30';

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_T;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_T
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00000001'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R330' sqlType='TIME(0) ALLOWS NULLS'>
          <Column ref='C191'>
          </Column>
          <OpBT startIsIncluded='1' endIsIncluded='1'>
            <NumericVal scale='0'>
              36000000000
            </NumericVal>
            <NumericVal scale='0'>
              41130000000
            </NumericVal>
          </OpBT>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O244' name='SYS_SYSKEY1'>
        <Column id='C188' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O247' name='X'>
        <Column id='C189' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O253' name='Y'>
        <Column id='C191' tableId='T1' colIndex='3'>
          CAT.RANGE.DTTYPES.T
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_t2(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, t2
+>       from dttypes
+>       where t2 between time'10:00:00.20' and time'11:25:30.45';

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_T2;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_T2
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00000080'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R330' sqlType='TIME(2) ALLOWS NULLS'>
          <Column ref='C192'>
          </Column>
          <OpBT startIsIncluded='1' endIsIncluded='1'>
            <NumericVal scale='2'>
              360002000.00
            </NumericVal>
            <NumericVal scale='2'>
              411304500.00
            </NumericVal>
          </OpBT>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O244' name='SYS_SYSKEY1'>
        <Column id='C188' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O247' name='X'>
        <Column id='C189' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O256' name='Y'>
        <Column id='C192' tableId='T1' colIndex='4'>
          CAT.RANGE.DTTYPES.T2
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_t6(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, t6
+>       from dttypes
+>       where t6 < time'01:15:30.123456';

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_T6;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_T6
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00000040'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R298' sqlType='TIME(6) ALLOWS NULLS'>
          <Column ref='C180'>
          </Column>
          <OpLE isNormalized='1'>
            <NumericVal scale='6'>
              4530.123455
            </NumericVal>
          </OpLE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O230' name='SYS_SYSKEY1'>
        <Column id='C175' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O233' name='X'>
        <Column id='C176' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O245' name='Y'>
        <Column id='C180' tableId='T1' colIndex='5'>
          CAT.RANGE.DTTYPES.T6
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_ts(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, ts
+>       from dttypes
+>       where ts < timestamp'2005-10-12 14:45:01.123456';

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_TS;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_TS
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00000020'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R298' sqlType='TIMESTAMP(6) ALLOWS NULLS'>
          <Column ref='C181'>
          </Column>
          <OpLE isNormalized='1'>
            <NumericVal scale='6'>
              211995888301.123455
            </NumericVal>
          </OpLE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O230' name='SYS_SYSKEY1'>
        <Column id='C175' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O233' name='X'>
        <Column id='C176' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O248' name='Y'>
        <Column id='C181' tableId='T1' colIndex='6'>
          CAT.RANGE.DTTYPES.TS
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_ts3(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, ts3
+>       from dttypes
+>       where ts3 < timestamp'2005-10-12 14:45:01.125'   ;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_TS3;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_TS3
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00000800'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R298' sqlType='TIMESTAMP(3) ALLOWS NULLS'>
          <Column ref='C183'>
          </Column>
          <OpLE isNormalized='1'>
            <NumericVal scale='3'>
              211995888301124.000
            </NumericVal>
          </OpLE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O230' name='SYS_SYSKEY1'>
        <Column id='C175' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O233' name='X'>
        <Column id='C176' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O254' name='Y'>
        <Column id='C183' tableId='T1' colIndex='8'>
          CAT.RANGE.DTTYPES.TS3
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_yr(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, yr
+>       from dttypes
+>       where yr < interval '20' year;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_YR;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_YR
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00000400'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R300' sqlType='INTERVAL YEAR(2) NO NULLS'>
          <Column ref='C186'>
          </Column>
          <OpLE isNormalized='1'>
            <NumericVal scale='0'>
              228
            </NumericVal>
          </OpLE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O232' name='SYS_SYSKEY1'>
        <Column id='C177' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O235' name='X'>
        <Column id='C178' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O259' name='Y'>
        <Column id='C186' tableId='T1' colIndex='9' isNullable='0'>
          CAT.RANGE.DTTYPES.YR
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_ym(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, ym
+>       from dttypes
+>       where ym between interval '2' year and interval '3-6' year to month;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_YM;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_YM
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00000200'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R330' sqlType='INTERVAL YEAR(3) TO MONTH ALLOWS NULLS'>
          <Column ref='C198'>
          </Column>
          <OpBT startIsIncluded='1' endIsIncluded='1'>
            <NumericVal scale='0'>
              24
            </NumericVal>
            <NumericVal scale='0'>
              42
            </NumericVal>
          </OpBT>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O244' name='SYS_SYSKEY1'>
        <Column id='C188' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O247' name='X'>
        <Column id='C189' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O274' name='Y'>
        <Column id='C198' tableId='T1' colIndex='10'>
          CAT.RANGE.DTTYPES.YM
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_mon(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, mon
+>       from dttypes
+>       where mon > interval'5000'month(4);

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_MON;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_MON
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00000100'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R298' sqlType='INTERVAL MONTH(4) ALLOWS NULLS'>
          <Column ref='C186'>
          </Column>
          <OpGE isNormalized='1'>
            <NumericVal scale='0'>
              5001
            </NumericVal>
          </OpGE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O230' name='SYS_SYSKEY1'>
        <Column id='C175' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O233' name='X'>
        <Column id='C176' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O263' name='Y'>
        <Column id='C186' tableId='T1' colIndex='11'>
          CAT.RANGE.DTTYPES.MON
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- Note that the range in the MV definition extends beyond the range allowable
>>-- for the type.
>>create mv mvrngcon_sec(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, sec
+>       from dttypes
+>       where sec between interval'3.5'second and interval'125.45'second(3,2);

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_SEC;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_SEC
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00008000'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R330' sqlType='INTERVAL SECOND(2,4) ALLOWS NULLS'>
          <Column ref='C200'>
          </Column>
          <OpGE isNormalized='1'>
            <NumericVal scale='4'>
              350.0000
            </NumericVal>
          </OpGE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O244' name='SYS_SYSKEY1'>
        <Column id='C188' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O247' name='X'>
        <Column id='C189' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O280' name='Y'>
        <Column id='C200' tableId='T1' colIndex='12'>
          CAT.RANGE.DTTYPES.SEC
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_mnt(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, mnt
+>       from dttypes
+>       where mnt < interval'5'minute and mnt > interval'30.5'second(2,1);

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_MNT;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_MNT
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00004000'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R328' sqlType='INTERVAL MINUTE(1) ALLOWS NULLS'>
          <Column ref='C200'>
          </Column>
          <OpBT startIsIncluded='1' endIsIncluded='1'>
            <NumericVal scale='0'>
              60000000
            </NumericVal>
            <NumericVal scale='0'>
              240000000
            </NumericVal>
          </OpBT>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O244' name='SYS_SYSKEY1'>
        <Column id='C187' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O247' name='X'>
        <Column id='C188' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O283' name='Y'>
        <Column id='C200' tableId='T1' colIndex='13'>
          CAT.RANGE.DTTYPES.MNT
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_ms(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, ms
+>       from dttypes
+>       where ms = interval'345'second(3) or ms between interval-'5'minute and interval'5'minute;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_MS;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_MS
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00002000'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R348' sqlType='INTERVAL MINUTE(2) TO SECOND(6) ALLOWS NULLS'>
          <Column ref='C214'>
          </Column>
          <OpBT startIsIncluded='1' endIsIncluded='1'>
            <NumericVal scale='6'>
              -300.000000
            </NumericVal>
            <NumericVal scale='6'>
              300.000000
            </NumericVal>
          </OpBT>
          <OpEQ>
            <NumericVal scale='6'>
              345.000000
            </NumericVal>
          </OpEQ>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O259' name='SYS_SYSKEY1'>
        <Column id='C200' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O262' name='X'>
        <Column id='C201' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O301' name='Y'>
        <Column id='C214' tableId='T1' colIndex='14'>
          CAT.RANGE.DTTYPES.MS
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_hr(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, hr
+>       from dttypes
+>       where hr in (interval'30'day, interval'60'minute, interval'7200'second(4)) or hr > interval'10000'hour(5);

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_HR;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_HR
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00001000'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R359' sqlType='INTERVAL HOUR(8) ALLOWS NULLS'>
          <Column ref='C222'>
          </Column>
          <OpEQ>
            <NumericVal scale='0'>
              3600000000
            </NumericVal>
            <NumericVal scale='0'>
              7200000000
            </NumericVal>
            <NumericVal scale='0'>
              2592000000000
            </NumericVal>
          </OpEQ>
          <OpGE isNormalized='1'>
            <NumericVal scale='0'>
              36003600000000
            </NumericVal>
          </OpGE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O271' name='SYS_SYSKEY1'>
        <Column id='C207' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O274' name='X'>
        <Column id='C208' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O316' name='Y'>
        <Column id='C222' tableId='T1' colIndex='15'>
          CAT.RANGE.DTTYPES.HR
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_hm(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, hm
+>       from dttypes
+>       where hm < interval'90'minute and hm >= interval'1'hour;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_HM;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_HM
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00080000'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R328' sqlType='INTERVAL HOUR(2) TO MINUTE ALLOWS NULLS'>
          <Column ref='C203'>
          </Column>
          <OpBT startIsIncluded='1' endIsIncluded='1'>
            <NumericVal scale='0'>
              3600000000
            </NumericVal>
            <NumericVal scale='0'>
              5340000000
            </NumericVal>
          </OpBT>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O244' name='SYS_SYSKEY1'>
        <Column id='C187' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O247' name='X'>
        <Column id='C188' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O292' name='Y'>
        <Column id='C203' tableId='T1' colIndex='16'>
          CAT.RANGE.DTTYPES.HM
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- Predicate on hs covers entire range of possible values, so rangepred will
>>-- be generated without any ops in descriptor, indicating that the only requirement
>>-- is that the column has a non-null value.
>>create mv mvrngcon_hs(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, hs
+>       from dttypes
+>       where hs >= interval-'99:59:59.999999'hour to second and hs <= interval'99:59:59.999999'hour to second;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_HS;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_HS
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00040000'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R328' sqlType='INTERVAL HOUR(2) TO SECOND(6) ALLOWS NULLS'>
          <Column ref='C204'>
          </Column>
          <!-- empty Range element indicates IS NOT NULL -->
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O244' name='SYS_SYSKEY1'>
        <Column id='C187' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O247' name='X'>
        <Column id='C188' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O295' name='Y'>
        <Column id='C204' tableId='T1' colIndex='17'>
          CAT.RANGE.DTTYPES.HS
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- Predicate on hs covers all but the minimum and maximum value for the interval.
>>create mv mvrngcon_hs_1(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, hs
+>       from dttypes
+>       where hs > interval-'99:59:59.999999'hour to second and hs < interval'99:59:59.999999'hour to second;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_HS_1;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_HS_1
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00040000'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R328' sqlType='INTERVAL HOUR(2) TO SECOND(6) ALLOWS NULLS'>
          <Column ref='C204'>
          </Column>
          <OpBT startIsIncluded='1' endIsIncluded='1'>
            <NumericVal scale='6'>
              -359999.999998
            </NumericVal>
            <NumericVal scale='6'>
              359999.999998
            </NumericVal>
          </OpBT>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O244' name='SYS_SYSKEY1'>
        <Column id='C187' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O247' name='X'>
        <Column id='C188' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O295' name='Y'>
        <Column id='C204' tableId='T1' colIndex='17'>
          CAT.RANGE.DTTYPES.HS
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- Predicate on hs covers interval's max value with a bounded range (no use of >).
>>create mv mvrngcon_hs_2(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, hs
+>       from dttypes
+>       where hs between interval'0'second and interval'99:59:59.999999'hour to second;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_HS_2;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_HS_2
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00040000'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R330' sqlType='INTERVAL HOUR(2) TO SECOND(6) ALLOWS NULLS'>
          <Column ref='C205'>
          </Column>
          <OpGE isNormalized='1'>
            <NumericVal scale='6'>
              .000000
            </NumericVal>
          </OpGE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O244' name='SYS_SYSKEY1'>
        <Column id='C188' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O247' name='X'>
        <Column id='C189' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O295' name='Y'>
        <Column id='C205' tableId='T1' colIndex='17'>
          CAT.RANGE.DTTYPES.HS
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_dy(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, dy
+>       from dttypes
+>       where dy = interval'100'day(3);

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_DY;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_DY
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00020000'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R298' sqlType='INTERVAL DAY(3) ALLOWS NULLS'>
          <Column id='C192' tableId='T1' colIndex='18'>
            CAT.RANGE.DTTYPES.DY
          </Column>
          <OpEQ>
            <NumericVal scale='0'>
              8640000000000
            </NumericVal>
          </OpEQ>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O229' name='SYS_SYSKEY1'>
        <Column id='C174' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O232' name='X'>
        <Column id='C175' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- The predicate in the MV definition is not satisfiable because the range covers
>>-- only values that are beyond the range allowable for the type. Therefore, the
>>-- MV will always be empty.
>>create mv mvrngcon_dh(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, dh
+>       from dttypes
+>       where dh > interval'100'day(3);

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_DH;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_DH
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <ResidualPredList>
        <Residual id='D300'>
          <Function id='S300' op='return_false'>
          </Function>
        </Residual>
      </ResidualPredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O230' name='SYS_SYSKEY1'>
        <Column id='C175' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O233' name='X'>
        <Column id='C176' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O287' name='Y'>
        <Column id='C194' tableId='T1' colIndex='19'>
          CAT.RANGE.DTTYPES.DH
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- The predicate in the MV definition is not satisfiable because the range covers
>>-- only values that are below the range allowable for the type. Therefore, the
>>-- MV will always be empty.
>>create mv mvrngcon_dm(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, dm
+>       from dttypes
+>       where dm < interval-'100'day(3);

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_DM;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_DM
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <ResidualPredList>
        <Residual id='D300'>
          <Function id='S300' op='return_false'>
          </Function>
        </Residual>
      </ResidualPredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O230' name='SYS_SYSKEY1'>
        <Column id='C175' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O233' name='X'>
        <Column id='C176' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O290' name='Y'>
        <Column id='C195' tableId='T1' colIndex='20'>
          CAT.RANGE.DTTYPES.DM
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>create mv mvrngcon_ds(x,y)
+>    refresh on request
+>    initialized on create
+>    as select i, ds
+>       from dttypes
+>       where ds between interval-'1234567 10:20:30.123456'day(7) to second(6) and interval'365'day(3);

--- SQL operation complete.
>>
>>set pattern $$MVName$$ MVRNGCON_DS;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.MVRNGCON_DS
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B10000'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874129246939' isKeyCovered='1' numCols='22' rangeBits='00400000'>
          CAT.RANGE.DTTYPES
        </Table>
      </JBBCList>
      <RangePredList>
        <Range id='R330' sqlType='INTERVAL DAY(7) TO SECOND(6) ALLOWS NULLS'>
          <Column ref='C209'>
          </Column>
          <OpBT startIsIncluded='1' endIsIncluded='1'>
            <NumericVal scale='6'>
              -106666626030.123456
            </NumericVal>
            <NumericVal scale='6'>
              31536000.000000
            </NumericVal>
          </OpBT>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O244' name='SYS_SYSKEY1'>
        <Column id='C188' tableId='T1' colIndex='0' isNullable='0'>
          CAT.RANGE.DTTYPES.SYSKEY
        </Column>
      </Output>
      <Output id='O247' name='X'>
        <Column id='C189' tableId='T1' colIndex='1'>
          CAT.RANGE.DTTYPES.I
        </Column>
      </Output>
      <Output id='O307' name='Y'>
        <Column id='C209' tableId='T1' colIndex='21'>
          CAT.RANGE.DTTYPES.DS
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>
>>obey TEST004(match_JQ1);
>>--===========================================
>>-- JQ1: range pred on different column - only MJV1 (NotProvided) should match
>>--===========================================
>>-- The ORDER BY clause was added to avoid sorting the resulting XML
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>obey TEST004(RANGE_JQ1);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey, dimdata
+>      from fact, dim1
+>      where dimkey=dkey
+>        and fprice between 1 and 6
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>set pattern $$QueryName$$ RANGE_JQ1;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B0'>                                                                 
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874079579197' numCols='2'>                     
          CAT.RANGE.DIM1                                                        
          <Key>                                                                 
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>          
              CAT.RANGE.DIM1.DKEY                                               
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
        <Table id='T2' TS='212223874079579197' numCols='8' rangeBits='00000020'>
          CAT.RANGE.FACT                                                        
          <Key>                                                                 
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>           
              CAT.RANGE.FACT.SYSKEY                                             
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <JoinPredList>                                                            
        <JoinPred id='J48'>                                                     
          <Column ref='C17'>                                                    
          </Column>                                                             
          <Column ref='C8'>                                                     
          </Column>                                                             
        </JoinPred>                                                             
      </JoinPredList>                                                           
      <RangePredList>                                                           
        <Range id='R83' sqlType='NUMERIC(8,2) SIGNED ALLOWS NULLS'>             
          <Column ref='C7'>                                                     
          </Column>                                                             
          <OpBT startIsIncluded='1' endIsIncluded='1'>                          
            <NumericVal scale='2'>                                              
              1.00                                                              
            </NumericVal>                                                       
            <NumericVal scale='2'>                                              
              6.00                                                              
            </NumericVal>                                                       
          </OpBT>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O42'>                                                         
        <Column id='C6' tableId='T2' colIndex='5'>                              
          CAT.RANGE.FACT.FQUANT                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O45'>                                                         
        <Column id='C7' tableId='T2' colIndex='6'>                              
          CAT.RANGE.FACT.FPRICE                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O48'>                                                         
        <Column id='C8' tableId='T2' colIndex='7'>                              
          CAT.RANGE.FACT.DIMKEY                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O54'>                                                         
        <Column id='C18' tableId='T1' colIndex='1'>                             
          CAT.RANGE.DIM1.DIMDATA                                                
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 75 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo # All comments should be ignored by QMS. >> range1.in;
>>sh echo # CHECK request does nothing at present, but should not interfere with subsequent requests >> range1.in;
>>sh echo # in the input file. >> range1.in;
>>sh echo CHECK >> range1.in;
>>sh echo # Likewise, an unknown requests is just noted in the log. No exception is thrown, and >> range1.in;
>>sh echo # processing of subsequent requests is continued. >> range1.in;
>>sh echo BLARG >> range1.in;
>>sh echo INITIALIZE             >> range1.in;
>>sh echo PUBLISH RANGE_MJV1.xml >> range1.in;
>>sh echo PUBLISH RANGE_MJV2.xml >> range1.in;
>>sh echo PUBLISH RANGE_MJV3.xml >> range1.in;
>>sh echo PUBLISH RANGE_MJV4.xml >> range1.in;
>>sh echo # STATS request writes to log, not output file. >> range1.in;
>>sh echo STATS                  >> range1.in;
>>sh echo MATCH RANGE_JQ1.xml    >> range1.in;
>>sh echo # CLEANUP has the effect of deleting the singleton instance of the Qms object for command-line QMS. >> range1.in;
>>sh echo # This gets rid of any MVs previously published in the input file or read from metadata by INITIALIZE. >> range1.in;
>>sh echo CLEANUP >> range1.in;
>>sh echo # The same match request will now not match anything. >> range1.in;
>>sh echo MATCH RANGE_JQ1.xml    >> range1.in;
>>sh echo # Now publish the matching MV and match again. The result descriptor should have it, but not the <Info> elements saying why the others do not match. >> range1.in;
>>sh echo PUBLISH RANGE_MJV1.xml >> range1.in;
>>sh echo MATCH RANGE_JQ1.xml    >> range1.in;
>>
>>-- Test handling of empty catalog in QmsInitializer::processCatalogs().
>>create catalog mvqr_t004_emptycat;

--- SQL operation complete.
>>sh sh -c "$QMS range1.in range1.out";
>>drop catalog mvqr_t004_emptycat;

--- SQL operation complete.
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B0'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DIM1
        </Table>
        <Table ref='T2'>
          CAT.RANGE.FACT
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV1
          </MVName>
          <RangePredList>
            <Range ref='R83' result='NotProvided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O42' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O45' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O48' result='Provided'>
              <MVColumn ref='C8'>
                DIMKEY
              </MVColumn>
            </Output>
            <Output ref='O54' result='Provided'>
              <MVColumn ref='C18'>
                DIMDATA
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV11 was disqualified because column CAT.RANGE.DIM1.DKEY cannot be provided.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV2 was disqualified because Table CAT.RANGE.DIM1 failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV3 was disqualified because Table CAT.RANGE.DIM1 failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV4 was disqualified because MV range predicate R200 was not matched by the query.]]></Info>
  </JbbResult>
</Result>
<Result>
  <Version>
    1.0
  </Version>
</Result>
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B0'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DIM1
        </Table>
        <Table ref='T2'>
          CAT.RANGE.FACT
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV1
          </MVName>
          <RangePredList>
            <Range ref='R83' result='NotProvided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O42' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O45' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O48' result='Provided'>
              <MVColumn ref='C8'>
                DIMKEY
              </MVColumn>
            </Output>
            <Output ref='O54' result='Provided'>
              <MVColumn ref='C18'>
                DIMDATA
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
  </JbbResult>
</Result>
>>
>>-- Verify the MV is picked by the optimizer.
>>obey TEST004(compare);
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey, dimdata
+>      from fact, dim1
+>      where dimkey=dkey
+>        and fprice between 1 and 6
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.RANGE_MJV1                                        

--- 1 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT       DIMKEY       DIMDATA    
------------  -----------  -----------  -----------

        4.00            3            3            3
        4.00            1            6            6

--- 2 row(s) selected.
>>
>>log T004_C1.txt clear;
>>
>>-- Verify the data is correct
>>control query default MVQR_REWRITE_LEVEL '0';

--- SQL operation complete.
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey, dimdata
+>      from fact, dim1
+>      where dimkey=dkey
+>        and fprice between 1 and 6
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.DIM1                                              
FILE_SCAN                       CAT.RANGE.FACT                                              

--- 2 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT       DIMKEY       DIMDATA    
------------  -----------  -----------  -----------

        4.00            3            3            3
        4.00            1            6            6

--- 2 row(s) selected.
>>
>>control query default MVQR_REWRITE_LEVEL '3';

--- SQL operation complete.
>>
>>log T004_C2.txt clear;
>>
>>-- Diff query results
>>log;
>>-- Diff is done.
>>
>>
>>-- Test use of nonexistent input file.
>>sh sh -c "$QMS alkjdlfksuytk range1.out";
>>
>>-- Test use of illegal output file name.
>>sh sh -c "$QMS range1.in xyz:/range1.out";
>>
>>-- This test will fail when DEFAULTS request is implemented, prompting us to
>>-- change the expected file. This ensures we won't forget to test it.
>>sh echo # DEFAULTS request not yet implemented, but should be recognized.
+>sh echo DEFAULTS >> testDefaults.in;
>>sh sh -c "$QMS testDefaults.in testDefaults.out";
>>log;
>>
>>obey TEST004(match_JQ2);
>>--===========================================
>>-- JQ2: single value on dimdata - should match MJV1 (NotProvided), MJV2 (Provided) and MJV3 (NotProvided).
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>obey TEST004(RANGE_JQ2);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata = 10
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>set pattern $$QueryName$$ RANGE_JQ2;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B0'>                                                                 
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874079579197' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM1                                                        
          <Key>                                                                 
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>          
              CAT.RANGE.DIM1.DKEY                                               
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
        <Table id='T2' TS='212223874079579197' numCols='8'>                     
          CAT.RANGE.FACT                                                        
          <Key>                                                                 
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>           
              CAT.RANGE.FACT.SYSKEY                                             
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <JoinPredList>                                                            
        <JoinPred id='J47'>                                                     
          <Column ref='C17'>                                                    
          </Column>                                                             
          <Column ref='C8'>                                                     
          </Column>                                                             
        </JoinPred>                                                             
      </JoinPredList>                                                           
      <RangePredList>                                                           
        <Range id='R64' sqlType='INTEGER SIGNED ALLOWS NULLS'>                  
          <Column id='C18' tableId='T1' colIndex='1'>                           
            CAT.RANGE.DIM1.DIMDATA                                              
          </Column>                                                             
          <OpEQ>                                                                
            <NumericVal scale='0'>                                              
              10                                                                
            </NumericVal>                                                       
          </OpEQ>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O41'>                                                         
        <Column id='C6' tableId='T2' colIndex='5'>                              
          CAT.RANGE.FACT.FQUANT                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O44'>                                                         
        <Column id='C7' tableId='T2' colIndex='6'>                              
          CAT.RANGE.FACT.FPRICE                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O47'>                                                         
        <Column id='C8' tableId='T2' colIndex='7'>                              
          CAT.RANGE.FACT.DIMKEY                                                 
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 68 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE             >> range2.in;
>>sh echo PUBLISH RANGE_MJV1.xml >> range2.in;
>>sh echo PUBLISH RANGE_MJV2.xml >> range2.in;
>>sh echo PUBLISH RANGE_MJV3.xml >> range2.in;
>>sh echo PUBLISH RANGE_MJV4.xml >> range2.in;
>>sh echo MATCH RANGE_JQ2.xml    >> range2.in;
>>
>>sh sh -c "$QMS range2.in range2.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B0'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DIM1
        </Table>
        <Table ref='T2'>
          CAT.RANGE.FACT
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV1
          </MVName>
          <RangePredList>
            <Range ref='R64' result='NotProvided'>
              <MVColumn ref='C18'>
                DIMDATA
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O41' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O44' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O47' result='Provided'>
              <MVColumn ref='C8'>
                DIMKEY
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV2
          </MVName>
          <RangePredList>
            <Range ref='R64' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O41' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O44' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O47' result='Provided'>
              <MVColumn ref='C8'>
                DIMKEY
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV3
          </MVName>
          <RangePredList>
            <Range ref='R64' result='NotProvided'>
              <MVColumn ref='C18'>
                DIMDATA
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O41' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O44' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O47' result='Provided'>
              <MVColumn ref='C8'>
                DIMKEY
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV11 was disqualified because column CAT.RANGE.DIM1.DIMDATA cannot be provided.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV4 was disqualified because MV range predicate R200 was not matched by the query.]]></Info>
  </JbbResult>
</Result>
>>
>>-- Verify the MV is picked by the optimizer.
>>obey TEST004(compare);
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata = 10
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.RANGE_MJV2                                        

--- 1 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT       DIMKEY     
------------  -----------  -----------

       20.00            3           10
       58.00            1           10

--- 2 row(s) selected.
>>
>>log T004_C1.txt clear;
>>
>>-- Verify the data is correct
>>control query default MVQR_REWRITE_LEVEL '0';

--- SQL operation complete.
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata = 10
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.DIM1                                              
FILE_SCAN                       CAT.RANGE.FACT                                              

--- 2 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT       DIMKEY     
------------  -----------  -----------

       20.00            3           10
       58.00            1           10

--- 2 row(s) selected.
>>
>>control query default MVQR_REWRITE_LEVEL '3';

--- SQL operation complete.
>>
>>log T004_C2.txt clear;
>>
>>-- Diff query results
>>log;
>>-- Diff is done.
>>
>>
>>obey TEST004(match_JQ3);
>>--===========================================
>>-- JQ3: identical range on dimdata - should match MJV1 (NotProvided) and MJV3 (Provided).
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>obey TEST004(RANGE_JQ3);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata between 5 and 15
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>set pattern $$QueryName$$ RANGE_JQ3;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B0'>                                                                 
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874079579197' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM1                                                        
          <Key>                                                                 
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>          
              CAT.RANGE.DIM1.DKEY                                               
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
        <Table id='T2' TS='212223874079579197' numCols='8'>                     
          CAT.RANGE.FACT                                                        
          <Key>                                                                 
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>           
              CAT.RANGE.FACT.SYSKEY                                             
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <JoinPredList>                                                            
        <JoinPred id='J48'>                                                     
          <Column ref='C17'>                                                    
          </Column>                                                             
          <Column ref='C8'>                                                     
          </Column>                                                             
        </JoinPred>                                                             
      </JoinPredList>                                                           
      <RangePredList>                                                           
        <Range id='R82' sqlType='INTEGER SIGNED ALLOWS NULLS'>                  
          <Column id='C18' tableId='T1' colIndex='1'>                           
            CAT.RANGE.DIM1.DIMDATA                                              
          </Column>                                                             
          <OpBT startIsIncluded='1' endIsIncluded='1'>                          
            <NumericVal scale='0'>                                              
              5                                                                 
            </NumericVal>                                                       
            <NumericVal scale='0'>                                              
              15                                                                
            </NumericVal>                                                       
          </OpBT>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O42'>                                                         
        <Column id='C6' tableId='T2' colIndex='5'>                              
          CAT.RANGE.FACT.FQUANT                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O45'>                                                         
        <Column id='C7' tableId='T2' colIndex='6'>                              
          CAT.RANGE.FACT.FPRICE                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O48'>                                                         
        <Column id='C8' tableId='T2' colIndex='7'>                              
          CAT.RANGE.FACT.DIMKEY                                                 
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 71 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE             >> range3.in;
>>sh echo PUBLISH RANGE_MJV1.xml >> range3.in;
>>sh echo PUBLISH RANGE_MJV2.xml >> range3.in;
>>sh echo PUBLISH RANGE_MJV3.xml >> range3.in;
>>sh echo PUBLISH RANGE_MJV4.xml >> range3.in;
>>sh echo MATCH RANGE_JQ3.xml    >> range3.in;
>>
>>sh sh -c "$QMS range3.in range3.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B0'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DIM1
        </Table>
        <Table ref='T2'>
          CAT.RANGE.FACT
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV1
          </MVName>
          <RangePredList>
            <Range ref='R82' result='NotProvided'>
              <MVColumn ref='C18'>
                DIMDATA
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O42' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O45' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O48' result='Provided'>
              <MVColumn ref='C8'>
                DIMKEY
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV3
          </MVName>
          <RangePredList>
            <Range ref='R82' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O42' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O45' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O48' result='Provided'>
              <MVColumn ref='C8'>
                DIMKEY
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV11 was disqualified because column CAT.RANGE.DIM1.DIMDATA cannot be provided.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV2 was disqualified because The query range predicate R82 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV4 was disqualified because MV range predicate R200 was not matched by the query.]]></Info>
  </JbbResult>
</Result>
>>
>>-- Verify the MV is picked by the optimizer.
>>obey TEST004(compare);
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata between 5 and 15
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.RANGE_MJV3                                        

--- 1 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT       DIMKEY     
------------  -----------  -----------

        7.00            5            5
       51.00            1            5
       53.00            3            5
       56.00            2            5
       61.00            2            5
       70.00            3            5
       73.00            4            5
       95.00            3            5
        4.00            1            6
       39.00            4            6
       49.00            1            6
       63.00            1            6
       65.00            3            6
       66.00            1            6
       55.00            4            7
       59.00            1            7
       66.00            2            7
       75.00            5            7
       11.00            4            8
       21.00            5            8
       32.00            3            8
       39.00            1            8
       44.00            1            8
       50.00            2            8
       62.00            5            8
       83.00            4            8
       88.00            3            8
       27.00            5            9
       67.00            2            9
       71.00            2            9
       20.00            3           10
       58.00            1           10

--- 32 row(s) selected.
>>
>>log T004_C1.txt clear;
>>
>>-- Verify the data is correct
>>control query default MVQR_REWRITE_LEVEL '0';

--- SQL operation complete.
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata between 5 and 15
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.DIM1                                              
FILE_SCAN                       CAT.RANGE.FACT                                              

--- 2 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT       DIMKEY     
------------  -----------  -----------

        7.00            5            5
       51.00            1            5
       53.00            3            5
       56.00            2            5
       61.00            2            5
       70.00            3            5
       73.00            4            5
       95.00            3            5
        4.00            1            6
       39.00            4            6
       49.00            1            6
       63.00            1            6
       65.00            3            6
       66.00            1            6
       55.00            4            7
       59.00            1            7
       66.00            2            7
       75.00            5            7
       11.00            4            8
       21.00            5            8
       32.00            3            8
       39.00            1            8
       44.00            1            8
       50.00            2            8
       62.00            5            8
       83.00            4            8
       88.00            3            8
       27.00            5            9
       67.00            2            9
       71.00            2            9
       20.00            3           10
       58.00            1           10

--- 32 row(s) selected.
>>
>>control query default MVQR_REWRITE_LEVEL '3';

--- SQL operation complete.
>>
>>log T004_C2.txt clear;
>>
>>-- Diff query results
>>log;
>>-- Diff is done.
>>
>>
>>obey TEST004(match_JQ4);
>>--===========================================
>>-- JQ4: bigger range - should match only MJV1 (NotProvided).
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>obey TEST004(RANGE_JQ4);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata between 5 and 16
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>set pattern $$QueryName$$ RANGE_JQ4;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B0'>                                                                 
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874079579197' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM1                                                        
          <Key>                                                                 
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>          
              CAT.RANGE.DIM1.DKEY                                               
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
        <Table id='T2' TS='212223874079579197' numCols='8'>                     
          CAT.RANGE.FACT                                                        
          <Key>                                                                 
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>           
              CAT.RANGE.FACT.SYSKEY                                             
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <JoinPredList>                                                            
        <JoinPred id='J48'>                                                     
          <Column ref='C17'>                                                    
          </Column>                                                             
          <Column ref='C8'>                                                     
          </Column>                                                             
        </JoinPred>                                                             
      </JoinPredList>                                                           
      <RangePredList>                                                           
        <Range id='R82' sqlType='INTEGER SIGNED ALLOWS NULLS'>                  
          <Column id='C18' tableId='T1' colIndex='1'>                           
            CAT.RANGE.DIM1.DIMDATA                                              
          </Column>                                                             
          <OpBT startIsIncluded='1' endIsIncluded='1'>                          
            <NumericVal scale='0'>                                              
              5                                                                 
            </NumericVal>                                                       
            <NumericVal scale='0'>                                              
              16                                                                
            </NumericVal>                                                       
          </OpBT>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O42'>                                                         
        <Column id='C6' tableId='T2' colIndex='5'>                              
          CAT.RANGE.FACT.FQUANT                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O45'>                                                         
        <Column id='C7' tableId='T2' colIndex='6'>                              
          CAT.RANGE.FACT.FPRICE                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O48'>                                                         
        <Column id='C8' tableId='T2' colIndex='7'>                              
          CAT.RANGE.FACT.DIMKEY                                                 
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 71 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE             >> range4.in;
>>sh echo PUBLISH RANGE_MJV1.xml >> range4.in;
>>sh echo PUBLISH RANGE_MJV2.xml >> range4.in;
>>sh echo PUBLISH RANGE_MJV3.xml >> range4.in;
>>sh echo PUBLISH RANGE_MJV4.xml >> range4.in;
>>sh echo MATCH RANGE_JQ4.xml    >> range4.in;
>>
>>sh sh -c "$QMS range4.in range4.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B0'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DIM1
        </Table>
        <Table ref='T2'>
          CAT.RANGE.FACT
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV1
          </MVName>
          <RangePredList>
            <Range ref='R82' result='NotProvided'>
              <MVColumn ref='C18'>
                DIMDATA
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O42' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O45' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O48' result='Provided'>
              <MVColumn ref='C8'>
                DIMKEY
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV11 was disqualified because column CAT.RANGE.DIM1.DIMDATA cannot be provided.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV2 was disqualified because The query range predicate R82 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV3 was disqualified because The query range predicate R82 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV4 was disqualified because MV range predicate R200 was not matched by the query.]]></Info>
  </JbbResult>
</Result>
>>
>>-- Verify the MV is picked by the optimizer.
>>obey TEST004(compare);
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata between 5 and 16
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.RANGE_MJV1                                        

--- 1 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT       DIMKEY     
------------  -----------  -----------

        7.00            5            5
       51.00            1            5
       53.00            3            5
       56.00            2            5
       61.00            2            5
       70.00            3            5
       73.00            4            5
       95.00            3            5
        4.00            1            6
       39.00            4            6
       49.00            1            6
       63.00            1            6
       65.00            3            6
       66.00            1            6
       55.00            4            7
       59.00            1            7
       66.00            2            7
       75.00            5            7
       11.00            4            8
       21.00            5            8
       32.00            3            8
       39.00            1            8
       44.00            1            8
       50.00            2            8
       62.00            5            8
       83.00            4            8
       88.00            3            8
       27.00            5            9
       67.00            2            9
       71.00            2            9
       20.00            3           10
       58.00            1           10

--- 32 row(s) selected.
>>
>>log T004_C1.txt clear;
>>
>>-- Verify the data is correct
>>control query default MVQR_REWRITE_LEVEL '0';

--- SQL operation complete.
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata between 5 and 16
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.DIM1                                              
FILE_SCAN                       CAT.RANGE.FACT                                              

--- 2 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT       DIMKEY     
------------  -----------  -----------

        7.00            5            5
       51.00            1            5
       53.00            3            5
       56.00            2            5
       61.00            2            5
       70.00            3            5
       73.00            4            5
       95.00            3            5
        4.00            1            6
       39.00            4            6
       49.00            1            6
       63.00            1            6
       65.00            3            6
       66.00            1            6
       55.00            4            7
       59.00            1            7
       66.00            2            7
       75.00            5            7
       11.00            4            8
       21.00            5            8
       32.00            3            8
       39.00            1            8
       44.00            1            8
       50.00            2            8
       62.00            5            8
       83.00            4            8
       88.00            3            8
       27.00            5            9
       67.00            2            9
       71.00            2            9
       20.00            3           10
       58.00            1           10

--- 32 row(s) selected.
>>
>>control query default MVQR_REWRITE_LEVEL '3';

--- SQL operation complete.
>>
>>log T004_C2.txt clear;
>>
>>-- Diff query results
>>log;
>>-- Diff is done.
>>
>>
>>obey TEST004(match_JQ5);
>>--===========================================
>>-- JQ5: Same range but also IS NULL - Should match only MJV1 (NotProvided).
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>obey TEST004(RANGE_JQ5);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey
+>      from fact, dim1
+>      where dimkey=dkey
+>        and (dimdata between 5 and 15 OR dimdata IS NULL)
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>set pattern $$QueryName$$ RANGE_JQ5;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B0'>                                                                 
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874079579197' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM1                                                        
          <Key>                                                                 
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>          
              CAT.RANGE.DIM1.DKEY                                               
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
        <Table id='T2' TS='212223874079579197' numCols='8'>                     
          CAT.RANGE.FACT                                                        
          <Key>                                                                 
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>           
              CAT.RANGE.FACT.SYSKEY                                             
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <JoinPredList>                                                            
        <JoinPred id='J50'>                                                     
          <Column ref='C17'>                                                    
          </Column>                                                             
          <Column ref='C8'>                                                     
          </Column>                                                             
        </JoinPred>                                                             
      </JoinPredList>                                                           
      <RangePredList>                                                           
        <Range id='R93' sqlType='INTEGER SIGNED ALLOWS NULLS'>                  
          <Column id='C18' tableId='T1' colIndex='1'>                           
            CAT.RANGE.DIM1.DIMDATA                                              
          </Column>                                                             
          <OpBT startIsIncluded='1' endIsIncluded='1'>                          
            <NumericVal scale='0'>                                              
              5                                                                 
            </NumericVal>                                                       
            <NumericVal scale='0'>                                              
              15                                                                
            </NumericVal>                                                       
          </OpBT>                                                               
          <OpEQ>                                                                
            <NullVal/>                                                          
          </OpEQ>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O44'>                                                         
        <Column id='C6' tableId='T2' colIndex='5'>                              
          CAT.RANGE.FACT.FQUANT                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O47'>                                                         
        <Column id='C7' tableId='T2' colIndex='6'>                              
          CAT.RANGE.FACT.FPRICE                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O50'>                                                         
        <Column id='C8' tableId='T2' colIndex='7'>                              
          CAT.RANGE.FACT.DIMKEY                                                 
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 74 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE             >> range5.in;
>>sh echo PUBLISH RANGE_MJV1.xml >> range5.in;
>>sh echo PUBLISH RANGE_MJV2.xml >> range5.in;
>>sh echo PUBLISH RANGE_MJV3.xml >> range5.in;
>>sh echo PUBLISH RANGE_MJV4.xml >> range5.in;
>>sh echo MATCH RANGE_JQ5.xml    >> range5.in;
>>
>>sh sh -c "$QMS range5.in range5.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B0'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DIM1
        </Table>
        <Table ref='T2'>
          CAT.RANGE.FACT
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV1
          </MVName>
          <RangePredList>
            <Range ref='R93' result='NotProvided'>
              <MVColumn ref='C18'>
                DIMDATA
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O44' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O47' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O50' result='Provided'>
              <MVColumn ref='C8'>
                DIMKEY
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV11 was disqualified because column CAT.RANGE.DIM1.DIMDATA cannot be provided.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV2 was disqualified because The query range predicate R93 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV3 was disqualified because The query range predicate R93 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV4 was disqualified because MV range predicate R200 was not matched by the query.]]></Info>
  </JbbResult>
</Result>
>>
>>-- Verify the MV is picked by the optimizer.
>>obey TEST004(compare);
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey
+>      from fact, dim1
+>      where dimkey=dkey
+>        and (dimdata between 5 and 15 OR dimdata IS NULL)
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.RANGE_MJV1                                        

--- 1 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT       DIMKEY     
------------  -----------  -----------

        7.00            5            5
       51.00            1            5
       53.00            3            5
       56.00            2            5
       61.00            2            5
       70.00            3            5
       73.00            4            5
       95.00            3            5
        4.00            1            6
       39.00            4            6
       49.00            1            6
       63.00            1            6
       65.00            3            6
       66.00            1            6
       55.00            4            7
       59.00            1            7
       66.00            2            7
       75.00            5            7
       11.00            4            8
       21.00            5            8
       32.00            3            8
       39.00            1            8
       44.00            1            8
       50.00            2            8
       62.00            5            8
       83.00            4            8
       88.00            3            8
       27.00            5            9
       67.00            2            9
       71.00            2            9
       20.00            3           10
       58.00            1           10

--- 32 row(s) selected.
>>
>>log T004_C1.txt clear;
>>
>>-- Verify the data is correct
>>control query default MVQR_REWRITE_LEVEL '0';

--- SQL operation complete.
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant, 
+>             dimkey
+>      from fact, dim1
+>      where dimkey=dkey
+>        and (dimdata between 5 and 15 OR dimdata IS NULL)
+>      order by dimkey, fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.DIM1                                              
FILE_SCAN                       CAT.RANGE.FACT                                              

--- 2 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT       DIMKEY     
------------  -----------  -----------

        7.00            5            5
       51.00            1            5
       53.00            3            5
       56.00            2            5
       61.00            2            5
       70.00            3            5
       73.00            4            5
       95.00            3            5
        4.00            1            6
       39.00            4            6
       49.00            1            6
       63.00            1            6
       65.00            3            6
       66.00            1            6
       55.00            4            7
       59.00            1            7
       66.00            2            7
       75.00            5            7
       11.00            4            8
       21.00            5            8
       32.00            3            8
       39.00            1            8
       44.00            1            8
       50.00            2            8
       62.00            5            8
       83.00            4            8
       88.00            3            8
       27.00            5            9
       67.00            2            9
       71.00            2            9
       20.00            3           10
       58.00            1           10

--- 32 row(s) selected.
>>
>>control query default MVQR_REWRITE_LEVEL '3';

--- SQL operation complete.
>>
>>log T004_C2.txt clear;
>>
>>-- Diff query results
>>log;
>>-- Diff is done.
>>
>>
>>obey TEST004(match_JQ6);
>>--===========================================
>>-- JQ6: Between on expression - 
>>-- Should match MJV1 and MJV11 (NotProvided)
>>-- and MJV4 (Provided).
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- identical range on expression - should match MJV1, MJV11 (NotProvided), MJV4 (Provided) 
>>-- and maybe one day also MJV3 (Provided).
>>obey TEST004(RANGE_JQ6);
>>prepare QueryStmt from
+>      select fprice, fquant
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata*2 between 10 and 30
+>      order by fprice, fquant;

--- SQL command prepared.
>>
>>
>>set pattern $$QueryName$$ RANGE_JQ6;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor                                                      
----------------------------------------------------------------------

<Query>                                                               
  <Version>                                                           
    1.0                                                               
  </Version>                                                          
  <Misc rewriteLevel='3'>                                             
  </Misc>                                                             
  <JBB id='B0'>                                                       
    <Hub>                                                             
      <JBBCList>                                                      
        <Table id='T1' TS='212223874079579197' numCols='2'>           
          CAT.RANGE.DIM1                                              
          <Key>                                                       
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>
              CAT.RANGE.DIM1.DKEY                                     
            </Column>                                                 
          </Key>                                                      
        </Table>                                                      
        <Table id='T2' TS='212223874079579197' numCols='8'>           
          CAT.RANGE.FACT                                              
          <Key>                                                       
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'> 
              CAT.RANGE.FACT.SYSKEY                                   
            </Column>                                                 
          </Key>                                                      
        </Table>                                                      
      </JBBCList>                                                     
      <JoinPredList>                                                  
        <JoinPred id='J50'>                                           
          <Column ref='C17'>                                          
          </Column>                                                   
          <Column id='C8' tableId='T2' colIndex='7'>                  
            CAT.RANGE.FACT.DIMKEY                                     
          </Column>                                                   
        </JoinPred>                                                   
      </JoinPredList>                                                 
      <RangePredList>                                                 
        <Range id='R73' sqlType='NUMERIC(11) SIGNED ALLOWS NULLS'>    
          <Expr id='X24'>                                             
            <BinaryOper id='S24' op='*'>                              
              <Column id='C18' tableId='T1' colIndex='1'>             
                CAT.RANGE.DIM1.DIMDATA                                
              </Column>                                               
              <NumericVal id='S23' scale='0'>                         
                2                                                     
              </NumericVal>                                           
            </BinaryOper>                                             
          </Expr>                                                     
          <OpBT startIsIncluded='1' endIsIncluded='1'>                
            <NumericVal scale='0'>                                    
              10                                                      
            </NumericVal>                                             
            <NumericVal scale='0'>                                    
              30                                                      
            </NumericVal>                                             
          </OpBT>                                                     
        </Range>                                                      
      </RangePredList>                                                
    </Hub>                                                            
    <ExtraHub>                                                        
    </ExtraHub>                                                       
    <OutputList>                                                      
      <Output id='O44'>                                               
        <Column id='C6' tableId='T2' colIndex='5'>                    
          CAT.RANGE.FACT.FQUANT                                       
        </Column>                                                     
      </Output>                                                       
      <Output id='O47'>                                               
        <Column id='C7' tableId='T2' colIndex='6'>                    
          CAT.RANGE.FACT.FPRICE                                       
        </Column>                                                     
      </Output>                                                       
    </OutputList>                                                     
  </JBB>                                                              
</Query>                                                              

--- 74 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE             >> range6.in;
>>sh echo PUBLISH RANGE_MJV1.xml >> range6.in;
>>sh echo PUBLISH RANGE_MJV11.xml >> range6.in;
>>sh echo PUBLISH RANGE_MJV2.xml >> range6.in;
>>sh echo PUBLISH RANGE_MJV3.xml >> range6.in;
>>sh echo PUBLISH RANGE_MJV4.xml >> range6.in;
>>sh echo MATCH RANGE_JQ6.xml    >> range6.in;
>>
>>sh sh -c "$QMS range6.in range6.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B0'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DIM1
        </Table>
        <Table ref='T2'>
          CAT.RANGE.FACT
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV1
          </MVName>
          <RangePredList>
            <Range ref='R73' result='NotProvided'>
              <MVColumn ref='C18'>
                DIMDATA
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O44' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O47' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV11
          </MVName>
          <RangePredList>
            <Range ref='R73' result='NotProvided'>
              <MVColumn ref='X24'>
                DATA2
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O44' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O47' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV4
          </MVName>
          <RangePredList>
            <Range ref='R73' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O44' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O47' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV2 was disqualified because Table CAT.RANGE.DIM1 failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV3 was disqualified because Table CAT.RANGE.DIM1 failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
>>
>>-- Verify MV11 is picked by the optimizer.
>>cqd mvqr_rewrite_candidates 'CAT.RANGE.RANGE_MJV11';

--- SQL operation complete.
>>obey TEST004(compare);
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata*2 between 10 and 30
+>      order by fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.RANGE_MJV11                                       

--- 1 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT     
------------  -----------

        4.00            1
        7.00            5
       11.00            4
       20.00            3
       21.00            5
       27.00            5
       32.00            3
       39.00            1
       39.00            4
       44.00            1
       49.00            1
       50.00            2
       51.00            1
       53.00            3
       55.00            4
       56.00            2
       58.00            1
       59.00            1
       61.00            2
       62.00            5
       63.00            1
       65.00            3
       66.00            1
       66.00            2
       67.00            2
       70.00            3
       71.00            2
       73.00            4
       75.00            5
       83.00            4
       88.00            3
       95.00            3

--- 32 row(s) selected.
>>
>>log T004_C1.txt clear;
>>
>>-- Verify the data is correct
>>control query default MVQR_REWRITE_LEVEL '0';

--- SQL operation complete.
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata*2 between 10 and 30
+>      order by fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.DIM1                                              
FILE_SCAN                       CAT.RANGE.FACT                                              

--- 2 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT     
------------  -----------

        4.00            1
        7.00            5
       11.00            4
       20.00            3
       21.00            5
       27.00            5
       32.00            3
       39.00            1
       39.00            4
       44.00            1
       49.00            1
       50.00            2
       51.00            1
       53.00            3
       55.00            4
       56.00            2
       58.00            1
       59.00            1
       61.00            2
       62.00            5
       63.00            1
       65.00            3
       66.00            1
       66.00            2
       67.00            2
       70.00            3
       71.00            2
       73.00            4
       75.00            5
       83.00            4
       88.00            3
       95.00            3

--- 32 row(s) selected.
>>
>>control query default MVQR_REWRITE_LEVEL '3';

--- SQL operation complete.
>>
>>log T004_C2.txt clear;
>>
>>-- Diff query results
>>log;
>>-- Diff is done.
>>
>>
>>
>>-- Verify MV4 is picked by the optimizer.
>>cqd mvqr_rewrite_candidates 'CAT.RANGE.RANGE_MJV4';

--- SQL operation complete.
>>obey TEST004(compare);
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata*2 between 10 and 30
+>      order by fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.RANGE_MJV4                                        

--- 1 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT     
------------  -----------

        4.00            1
        7.00            5
       11.00            4
       20.00            3
       21.00            5
       27.00            5
       32.00            3
       39.00            1
       39.00            4
       44.00            1
       49.00            1
       50.00            2
       51.00            1
       53.00            3
       55.00            4
       56.00            2
       58.00            1
       59.00            1
       61.00            2
       62.00            5
       63.00            1
       65.00            3
       66.00            1
       66.00            2
       67.00            2
       70.00            3
       71.00            2
       73.00            4
       75.00            5
       83.00            4
       88.00            3
       95.00            3

--- 32 row(s) selected.
>>
>>log T004_C1.txt clear;
>>
>>-- Verify the data is correct
>>control query default MVQR_REWRITE_LEVEL '0';

--- SQL operation complete.
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata*2 between 10 and 30
+>      order by fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.DIM1                                              
FILE_SCAN                       CAT.RANGE.FACT                                              

--- 2 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT     
------------  -----------

        4.00            1
        7.00            5
       11.00            4
       20.00            3
       21.00            5
       27.00            5
       32.00            3
       39.00            1
       39.00            4
       44.00            1
       49.00            1
       50.00            2
       51.00            1
       53.00            3
       55.00            4
       56.00            2
       58.00            1
       59.00            1
       61.00            2
       62.00            5
       63.00            1
       65.00            3
       66.00            1
       66.00            2
       67.00            2
       70.00            3
       71.00            2
       73.00            4
       75.00            5
       83.00            4
       88.00            3
       95.00            3

--- 32 row(s) selected.
>>
>>control query default MVQR_REWRITE_LEVEL '3';

--- SQL operation complete.
>>
>>log T004_C2.txt clear;
>>
>>-- Diff query results
>>log;
>>-- Diff is done.
>>
>>
>>
>>obey TEST004(match_JQ7);
>>--===========================================
>>-- JQ7: Between on expression - 
>>-- Should match MJV1 and MJV11 (NotProvided)
>>-- and MJV4 (Provided).
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- Subsumed range on expression - should match MJV1, MJV11 (NotProvided), MJV4 (NotProvided) 
>>obey TEST004(RANGE_JQ7);
>>prepare QueryStmt from
+>      select fprice, fquant 
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata*2 between 15 and 30
+>      order by fprice, fquant;

--- SQL command prepared.
>>
>>
>>set pattern $$QueryName$$ RANGE_JQ7;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor                                                      
----------------------------------------------------------------------

<Query>                                                               
  <Version>                                                           
    1.0                                                               
  </Version>                                                          
  <Misc rewriteLevel='3'>                                             
  </Misc>                                                             
  <JBB id='B0'>                                                       
    <Hub>                                                             
      <JBBCList>                                                      
        <Table id='T1' TS='212223874079579197' numCols='2'>           
          CAT.RANGE.DIM1                                              
          <Key>                                                       
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>
              CAT.RANGE.DIM1.DKEY                                     
            </Column>                                                 
          </Key>                                                      
        </Table>                                                      
        <Table id='T2' TS='212223874079579197' numCols='8'>           
          CAT.RANGE.FACT                                              
          <Key>                                                       
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'> 
              CAT.RANGE.FACT.SYSKEY                                   
            </Column>                                                 
          </Key>                                                      
        </Table>                                                      
      </JBBCList>                                                     
      <JoinPredList>                                                  
        <JoinPred id='J50'>                                           
          <Column ref='C17'>                                          
          </Column>                                                   
          <Column id='C8' tableId='T2' colIndex='7'>                  
            CAT.RANGE.FACT.DIMKEY                                     
          </Column>                                                   
        </JoinPred>                                                   
      </JoinPredList>                                                 
      <RangePredList>                                                 
        <Range id='R73' sqlType='NUMERIC(11) SIGNED ALLOWS NULLS'>    
          <Expr id='X24'>                                             
            <BinaryOper id='S24' op='*'>                              
              <Column id='C18' tableId='T1' colIndex='1'>             
                CAT.RANGE.DIM1.DIMDATA                                
              </Column>                                               
              <NumericVal id='S23' scale='0'>                         
                2                                                     
              </NumericVal>                                           
            </BinaryOper>                                             
          </Expr>                                                     
          <OpBT startIsIncluded='1' endIsIncluded='1'>                
            <NumericVal scale='0'>                                    
              15                                                      
            </NumericVal>                                             
            <NumericVal scale='0'>                                    
              30                                                      
            </NumericVal>                                             
          </OpBT>                                                     
        </Range>                                                      
      </RangePredList>                                                
    </Hub>                                                            
    <ExtraHub>                                                        
    </ExtraHub>                                                       
    <OutputList>                                                      
      <Output id='O44'>                                               
        <Column id='C6' tableId='T2' colIndex='5'>                    
          CAT.RANGE.FACT.FQUANT                                       
        </Column>                                                     
      </Output>                                                       
      <Output id='O47'>                                               
        <Column id='C7' tableId='T2' colIndex='6'>                    
          CAT.RANGE.FACT.FPRICE                                       
        </Column>                                                     
      </Output>                                                       
    </OutputList>                                                     
  </JBB>                                                              
</Query>                                                              

--- 74 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE             >> range7.in;
>>sh echo PUBLISH RANGE_MJV1.xml >> range7.in;
>>sh echo PUBLISH RANGE_MJV11.xml >> range7.in;
>>sh echo PUBLISH RANGE_MJV2.xml >> range7.in;
>>sh echo PUBLISH RANGE_MJV3.xml >> range7.in;
>>sh echo PUBLISH RANGE_MJV4.xml >> range7.in;
>>sh echo MATCH RANGE_JQ7.xml    >> range7.in;
>>
>>sh sh -c "$QMS range7.in range7.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B0'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DIM1
        </Table>
        <Table ref='T2'>
          CAT.RANGE.FACT
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV1
          </MVName>
          <RangePredList>
            <Range ref='R73' result='NotProvided'>
              <MVColumn ref='C18'>
                DIMDATA
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O44' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O47' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV11
          </MVName>
          <RangePredList>
            <Range ref='R73' result='NotProvided'>
              <MVColumn ref='X24'>
                DATA2
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O44' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O47' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MJV4
          </MVName>
          <RangePredList>
            <Range ref='R73' result='NotProvided'>
              <MVColumn ref='C18'>
                DIMDATA
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O44' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O47' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV2 was disqualified because Table CAT.RANGE.DIM1 failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_MJV3 was disqualified because Table CAT.RANGE.DIM1 failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
>>
>>-- Verify MV11 is picked by the optimizer.
>>cqd mvqr_rewrite_candidates 'CAT.RANGE.RANGE_MJV11';

--- SQL operation complete.
>>obey TEST004(compare);
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant 
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata*2 between 15 and 30
+>      order by fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.RANGE_MJV11                                       

--- 1 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT     
------------  -----------

       11.00            4
       20.00            3
       21.00            5
       27.00            5
       32.00            3
       39.00            1
       44.00            1
       50.00            2
       58.00            1
       62.00            5
       67.00            2
       71.00            2
       83.00            4
       88.00            3

--- 14 row(s) selected.
>>
>>log T004_C1.txt clear;
>>
>>-- Verify the data is correct
>>control query default MVQR_REWRITE_LEVEL '0';

--- SQL operation complete.
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant 
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata*2 between 15 and 30
+>      order by fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.DIM1                                              
FILE_SCAN                       CAT.RANGE.FACT                                              

--- 2 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT     
------------  -----------

       11.00            4
       20.00            3
       21.00            5
       27.00            5
       32.00            3
       39.00            1
       44.00            1
       50.00            2
       58.00            1
       62.00            5
       67.00            2
       71.00            2
       83.00            4
       88.00            3

--- 14 row(s) selected.
>>
>>control query default MVQR_REWRITE_LEVEL '3';

--- SQL operation complete.
>>
>>log T004_C2.txt clear;
>>
>>-- Diff query results
>>log;
>>-- Diff is done.
>>
>>
>>-- Verify MV4 is picked by the optimizer.
>>cqd mvqr_rewrite_candidates 'CAT.RANGE.RANGE_MJV4';

--- SQL operation complete.
>>obey TEST004(compare);
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant 
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata*2 between 15 and 30
+>      order by fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.RANGE_MJV4                                        

--- 1 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT     
------------  -----------

       11.00            4
       20.00            3
       21.00            5
       27.00            5
       32.00            3
       39.00            1
       44.00            1
       50.00            2
       58.00            1
       62.00            5
       67.00            2
       71.00            2
       83.00            4
       88.00            3

--- 14 row(s) selected.
>>
>>log T004_C1.txt clear;
>>
>>-- Verify the data is correct
>>control query default MVQR_REWRITE_LEVEL '0';

--- SQL operation complete.
>>
>>obey TEST004($$QueryName$$);
>>prepare QueryStmt from
+>      select fprice, fquant 
+>      from fact, dim1
+>      where dimkey=dkey
+>        and dimdata*2 between 15 and 30
+>      order by fprice, fquant;

--- SQL command prepared.
>>
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.DIM1                                              
FILE_SCAN                       CAT.RANGE.FACT                                              

--- 2 row(s) selected.
>>
>>execute QueryStmt;

FPRICE        FQUANT     
------------  -----------

       11.00            4
       20.00            3
       21.00            5
       27.00            5
       32.00            3
       39.00            1
       44.00            1
       50.00            2
       58.00            1
       62.00            5
       67.00            2
       71.00            2
       83.00            4
       88.00            3

--- 14 row(s) selected.
>>
>>control query default MVQR_REWRITE_LEVEL '3';

--- SQL operation complete.
>>
>>log T004_C2.txt clear;
>>
>>-- Diff query results
>>log;
>>-- Diff is done.
>>
>>
>>
>>obey TEST004(match_I);
>>-- Queries requiring application of constraints to ranges
>>--===========================================
>>-- I: type-implied constraint and not null constraint change range from
>>--    [100..MAX] to [100..2147483647]+NULL, allowing match (Provided) with MVRNGCON_I.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match mvrngcon_i (Provided) after application of not null constraint
>>prepare QueryStmt from
+>      select i
+>      from numtypes
+>      where i is null or i > 100
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_I;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874110623489' numCols='9' rangeBits='00000004'>
          CAT.RANGE.NUMTYPES                                                    
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.NUMTYPES.SYSKEY                                         
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R61' sqlType='INTEGER SIGNED NO NULLS'>                      
          <Column ref='C2'>                                                     
          </Column>                                                             
          <OpGE isNormalized='1'>                                               
            <NumericVal scale='0'>                                              
              101                                                               
            </NumericVal>                                                       
          </OpGE>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O35'>                                                         
        <Column id='C2' tableId='T1' colIndex='1' isNullable='0'>               
          CAT.RANGE.NUMTYPES.I                                                  
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 41 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE              >> range_i.in;
>>sh echo PUBLISH MVRNGCON_I.xml  >> range_i.in;
>>sh echo MATCH RANGECONSTR_I.xml >> range_i.in;
>>
>>sh sh -c "$QMS range_i.in range_i.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.NUMTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_I
          </MVName>
          <RangePredList>
            <Range ref='R61' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O35' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_LI was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_N42 was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_N61U was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_R was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SI was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R61' result='Provided'>
---
>             <Range ref='R64' result='Provided'>
22c22
<             <Output ref='O35' result='Provided'>
---
>             <Output ref='O36' result='Provided'>
>>
>>obey TEST004(match_SI);
>>--===========================================
>>-- SI: type-implied constraint changes range from [50..MAX] to [50..32767],
>>--     allowing match (Provided) with MVRNGCON_SI.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match mvrngcon_si (Provided) after application of type constraint
>>prepare QueryStmt from
+>      select i
+>      from numtypes
+>      where si >= 50
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_SI;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874110623489' numCols='9' rangeBits='00000002'>
          CAT.RANGE.NUMTYPES                                                    
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.NUMTYPES.SYSKEY                                         
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R59' sqlType='SMALLINT SIGNED ALLOWS NULLS'>                 
          <Column id='C3' tableId='T1' colIndex='2'>                            
            CAT.RANGE.NUMTYPES.SI                                               
          </Column>                                                             
          <OpGE isNormalized='1'>                                               
            <NumericVal scale='0'>                                              
              50                                                                
            </NumericVal>                                                       
          </OpGE>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O33'>                                                         
        <Column id='C2' tableId='T1' colIndex='1' isNullable='0'>               
          CAT.RANGE.NUMTYPES.I                                                  
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 42 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_si.in;
>>sh echo PUBLISH MVRNGCON_SI.xml  >> range_si.in;
>>sh echo MATCH RANGECONSTR_SI.xml >> range_si.in;
>>
>>sh sh -c "$QMS range_si.in range_si.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.NUMTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_SI
          </MVName>
          <RangePredList>
            <Range ref='R59' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O33' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_I was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_LI was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_N42 was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_N61U was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_R was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R59' result='Provided'>
---
>             <Range ref='R62' result='Provided'>
22c22
<             <Output ref='O33' result='Provided'>
---
>             <Output ref='O34' result='Provided'>
>>
>>obey TEST004(match_LI);
>>--===========================================
>>-- LI: check constraint changes range from [5000000..MAX] to [5000000..10000000000),
>>--     allowing match (NotProvided) with MVRNGCON_LI.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match mvrngcon_li (NotProvided) after application of check constraint
>>prepare QueryStmt from
+>      select i
+>      from numtypes
+>      where li >= 5000000
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_LI;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874110623489' numCols='9' rangeBits='00000001'>
          CAT.RANGE.NUMTYPES                                                    
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.NUMTYPES.SYSKEY                                         
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R59' sqlType='LARGEINT ALLOWS NULLS'>                        
          <Column id='C4' tableId='T1' colIndex='3'>                            
            CAT.RANGE.NUMTYPES.LI                                               
          </Column>                                                             
          <OpBT startIsIncluded='1' endIsIncluded='1'>                          
            <NumericVal scale='0'>                                              
              5000000                                                           
            </NumericVal>                                                       
            <NumericVal scale='0'>                                              
              9999999999                                                        
            </NumericVal>                                                       
          </OpBT>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O33'>                                                         
        <Column id='C2' tableId='T1' colIndex='1' isNullable='0'>               
          CAT.RANGE.NUMTYPES.I                                                  
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_li.in;
>>sh echo PUBLISH MVRNGCON_LI.xml  >> range_li.in;
>>sh echo MATCH RANGECONSTR_LI.xml >> range_li.in;
>>
>>sh sh -c "$QMS range_li.in range_li.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.NUMTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_LI
          </MVName>
          <RangePredList>
            <Range ref='R59' result='NotProvided'>
              <MVColumn ref='C4'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O33' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_I was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_N42 was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_N61U was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_R was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SI was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R59' result='NotProvided'>
---
>             <Range ref='R62' result='NotProvided'>
25c25
<             <Output ref='O33' result='Provided'>
---
>             <Output ref='O34' result='Provided'>
>>
>>obey TEST004(match_N42);
>>--===========================================
>>-- N42: type-implied constraint changes range from [1001..<MAX>] to [1001..9999],
>>--      allowing match (NotProvided) with MVRNGCON_N42.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match mvrngcon_n42 (NotProvided) after application of type constraint
>>prepare QueryStmt from
+>      select i
+>      from numtypes
+>      where n42 > 10
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_N42;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874110623489' numCols='9' rangeBits='00000080'>
          CAT.RANGE.NUMTYPES                                                    
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.NUMTYPES.SYSKEY                                         
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R59' sqlType='NUMERIC(4,2) SIGNED ALLOWS NULLS'>             
          <Column id='C5' tableId='T1' colIndex='4'>                            
            CAT.RANGE.NUMTYPES.N42                                              
          </Column>                                                             
          <OpGE isNormalized='1'>                                               
            <NumericVal scale='2'>                                              
              10.01                                                             
            </NumericVal>                                                       
          </OpGE>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O33'>                                                         
        <Column id='C2' tableId='T1' colIndex='1' isNullable='0'>               
          CAT.RANGE.NUMTYPES.I                                                  
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 42 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE                >> range_n42.in;
>>sh echo PUBLISH MVRNGCON_N42.xml  >> range_n42.in;
>>sh echo MATCH RANGECONSTR_N42.xml >> range_n42.in;
>>
>>sh sh -c "$QMS range_n42.in range_n42.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.NUMTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_N42
          </MVName>
          <RangePredList>
            <Range ref='R59' result='NotProvided'>
              <MVColumn ref='C5'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O33' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_I was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_LI was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_N61U was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_R was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SI was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R59' result='NotProvided'>
---
>             <Range ref='R62' result='NotProvided'>
25c25
<             <Output ref='O33' result='Provided'>
---
>             <Output ref='O34' result='Provided'>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R59' result='NotProvided'>
---
>             <Range ref='R62' result='NotProvided'>
25c25
<             <Output ref='O33' result='Provided'>
---
>             <Output ref='O34' result='Provided'>
>>
>>obey TEST004(match_N61U);
>>--===========================================
>>-- N61U: type-implied constraint changes range from [<MIN>..499] to [0...499],
>>--       allowing match (NotProvided) with MVRNGCON_N61U.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match mvrngcon_n61u (NotProvided) after application of type constraint
>>prepare QueryStmt from
+>      select i
+>      from numtypes
+>      where n61u < 50
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_N61U;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874110623489' numCols='9' rangeBits='00000040'>
          CAT.RANGE.NUMTYPES                                                    
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.NUMTYPES.SYSKEY                                         
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R59' sqlType='NUMERIC(6,1) UNSIGNED ALLOWS NULLS'>           
          <Column id='C6' tableId='T1' colIndex='5'>                            
            CAT.RANGE.NUMTYPES.N61U                                             
          </Column>                                                             
          <OpLE isNormalized='1'>                                               
            <NumericVal scale='1'>                                              
              49.9                                                              
            </NumericVal>                                                       
          </OpLE>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O33'>                                                         
        <Column id='C2' tableId='T1' colIndex='1' isNullable='0'>               
          CAT.RANGE.NUMTYPES.I                                                  
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 42 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE                 >> range_n61u.in;
>>sh echo PUBLISH MVRNGCON_N61U.xml  >> range_n61u.in;
>>sh echo MATCH RANGECONSTR_N61U.xml >> range_n61u.in;
>>
>>sh sh -c "$QMS range_n61u.in range_n61u.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.NUMTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_N61U
          </MVName>
          <RangePredList>
            <Range ref='R59' result='NotProvided'>
              <MVColumn ref='C6'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O33' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_I was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_LI was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_N42 was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_R was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SI was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R59' result='NotProvided'>
---
>             <Range ref='R62' result='NotProvided'>
25c25
<             <Output ref='O33' result='Provided'>
---
>             <Output ref='O34' result='Provided'>
>>
>>obey TEST004(match_R);
>>--===========================================
>>-- R: type-implied constraint changes range from (0..<MAX>) to (0..3.40282e+038],
>>--    allowing match (NotProvided) with MVRNGCON_R.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match mvrngcon_r (NotProvided) after application of type constraint
>>prepare QueryStmt from
+>      select i
+>      from numtypes
+>      where r > 0
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_R;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874110623489' numCols='9' rangeBits='00000020'>
          CAT.RANGE.NUMTYPES                                                    
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.NUMTYPES.SYSKEY                                         
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R59' sqlType='REAL ALLOWS NULLS'>                            
          <Column id='C7' tableId='T1' colIndex='6'>                            
            CAT.RANGE.NUMTYPES.R                                                
          </Column>                                                             
          <OpGT isNormalized='1'>                                               
            <FloatVal>                                                          
              0                                                                 
            </FloatVal>                                                         
          </OpGT>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O33'>                                                         
        <Column id='C2' tableId='T1' colIndex='1' isNullable='0'>               
          CAT.RANGE.NUMTYPES.I                                                  
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 42 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE              >> range_r.in;
>>sh echo PUBLISH MVRNGCON_R.xml  >> range_r.in;
>>sh echo MATCH RANGECONSTR_R.xml >> range_r.in;
>>
>>sh sh -c "$QMS range_r.in range_r.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.NUMTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_R
          </MVName>
          <RangePredList>
            <Range ref='R59' result='NotProvided'>
              <MVColumn ref='C7'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O33' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_I was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_LI was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_N42 was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_N61U was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SI was disqualified because Table CAT.RANGE.NUMTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R59' result='NotProvided'>
---
>             <Range ref='R62' result='NotProvided'>
25c25
<             <Output ref='O33' result='Provided'>
---
>             <Output ref='O34' result='Provided'>
>>
>>obey TEST004(match_D);
>>--===========================================
>>-- D: does not match because query range includes values that precede MV range.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should not match anything
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where d > date'1999-12-31'
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_D;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000002'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R124' sqlType='DATE ALLOWS NULLS'>                            
          <Column id='C3' tableId='T1' colIndex='2'>                             
            CAT.RANGE.DTTYPES.D                                                  
          </Column>                                                              
          <OpGE isNormalized='1'>                                                
            <NumericVal scale='0'>                                               
              2451544                                                            
            </NumericVal>                                                        
          </OpGE>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O59'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 42 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE              >> range_d.in;
>>sh echo PUBLISH MVRNGCON_D.xml  >> range_d.in;
>>sh echo MATCH RANGECONSTR_D.xml >> range_d.in;
>>
>>sh sh -c "$QMS range_d.in range_d.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because The query range predicate R124 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
6c6
<     <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because The query range predicate R124 is not subsumed by the corresponding MV predicate.]]></Info>
---
>     <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because The query range predicate R127 is not subsumed by the corresponding MV predicate.]]></Info>
>>
>>--===========================================
>>-- D part 2: provided match, same range specified a different way in query.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should get provided match with mvrngcon_d
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where not d <= date'2000-01-30'
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_D_2;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000002'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R125' sqlType='DATE ALLOWS NULLS'>                            
          <Column id='C3' tableId='T1' colIndex='2'>                             
            CAT.RANGE.DTTYPES.D                                                  
          </Column>                                                              
          <OpGE isNormalized='1'>                                                
            <NumericVal scale='0'>                                               
              2451574                                                            
            </NumericVal>                                                        
          </OpGE>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O60'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 42 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE              >> range_d_2.in;
>>sh echo PUBLISH MVRNGCON_D.xml  >> range_d_2.in;
>>sh echo MATCH RANGECONSTR_D_2.xml >> range_d_2.in;
>>
>>sh sh -c "$QMS range_d_2.in range_d_2.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_D
          </MVName>
          <RangePredList>
            <Range ref='R125' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O60' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R125' result='Provided'>
---
>             <Range ref='R128' result='Provided'>
22c22
<             <Output ref='O60' result='Provided'>
---
>             <Output ref='O61' result='Provided'>
>>
>>--===========================================
>>-- D part 3: not provided match, range ends short of max value.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should get not provided match with mvrngcon_d
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where d > date'2000-01-30' and d < date'2010-12-31'
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_D_3;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000002'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R142' sqlType='DATE ALLOWS NULLS'>                            
          <Column id='C3' tableId='T1' colIndex='2'>                             
            CAT.RANGE.DTTYPES.D                                                  
          </Column>                                                              
          <OpBT startIsIncluded='1' endIsIncluded='1'>                           
            <NumericVal scale='0'>                                               
              2451574                                                            
            </NumericVal>                                                        
            <NumericVal scale='0'>                                               
              2455560                                                            
            </NumericVal>                                                        
          </OpBT>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O61'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE              >> range_d_3.in;
>>sh echo PUBLISH MVRNGCON_D.xml  >> range_d_3.in;
>>sh echo MATCH RANGECONSTR_D_3.xml >> range_d_3.in;
>>
>>sh sh -c "$QMS range_d_3.in range_d_3.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_D
          </MVName>
          <RangePredList>
            <Range ref='R142' result='NotProvided'>
              <MVColumn ref='C3'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O61' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R142' result='NotProvided'>
---
>             <Range ref='R148' result='NotProvided'>
25c25
<             <Output ref='O61' result='Provided'>
---
>             <Output ref='O63' result='Provided'>
>>
>>obey TEST004(match_T);
>>--===========================================
>>-- T: no match; last element in IN list is not part of MV's range for t
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- time'11:25:31' prevents a match
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where t in (time'10:00:00', time'11:25:30', time'10:30:19', time'11:25:31')
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_T;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000001'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R142' sqlType='TIME(0) ALLOWS NULLS'>                         
          <Column id='C4' tableId='T1' colIndex='3'>                             
            CAT.RANGE.DTTYPES.T                                                  
          </Column>                                                              
          <OpEQ>                                                                 
            <NumericVal scale='0'>                                               
              36000000000                                                        
            </NumericVal>                                                        
            <NumericVal scale='0'>                                               
              37819000000                                                        
            </NumericVal>                                                        
            <NumericVal scale='0'>                                               
              41130000000                                                        
            </NumericVal>                                                        
            <NumericVal scale='0'>                                               
              41131000000                                                        
            </NumericVal>                                                        
          </OpEQ>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O68'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 51 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE              >> range_t.in;
>>sh echo PUBLISH MVRNGCON_T.xml  >> range_t.in;
>>sh echo MATCH RANGECONSTR_T.xml >> range_t.in;
>>
>>sh sh -c "$QMS range_t.in range_t.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because The query range predicate R142 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
20c20
<     <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because The query range predicate R142 is not subsumed by the corresponding MV predicate.]]></Info>
---
>     <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because The query range predicate R154 is not subsumed by the corresponding MV predicate.]]></Info>
>>
>>--===========================================
>>-- T part 2: provided match, same range specified a different way in query.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match mvrngcon_t (Provided)
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where not t < time'10:00:00' and not t > time'11:25:30'
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_T_2;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000001'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R144' sqlType='TIME(0) ALLOWS NULLS'>                         
          <Column id='C4' tableId='T1' colIndex='3'>                             
            CAT.RANGE.DTTYPES.T                                                  
          </Column>                                                              
          <OpBT startIsIncluded='1' endIsIncluded='1'>                           
            <NumericVal scale='0'>                                               
              36000000000                                                        
            </NumericVal>                                                        
            <NumericVal scale='0'>                                               
              41130000000                                                        
            </NumericVal>                                                        
          </OpBT>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O63'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE              >> range_t_2.in;
>>sh echo PUBLISH MVRNGCON_T.xml  >> range_t_2.in;
>>sh echo MATCH RANGECONSTR_T_2.xml >> range_t_2.in;
>>
>>sh sh -c "$QMS range_t_2.in range_t_2.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_T
          </MVName>
          <RangePredList>
            <Range ref='R144' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O63' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R144' result='Provided'>
---
>             <Range ref='R150' result='Provided'>
22c22
<             <Output ref='O63' result='Provided'>
---
>             <Output ref='O65' result='Provided'>
>>
>>--===========================================
>>-- T part 3: not provided match, all items in IN list contained in MV range.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match mvrngcon_t (Not Provided)
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where t in (time'10:00:00', time'11:25:30', time'10:30:19')
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_T_3;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000001'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R136' sqlType='TIME(0) ALLOWS NULLS'>                         
          <Column id='C4' tableId='T1' colIndex='3'>                             
            CAT.RANGE.DTTYPES.T                                                  
          </Column>                                                              
          <OpEQ>                                                                 
            <NumericVal scale='0'>                                               
              36000000000                                                        
            </NumericVal>                                                        
            <NumericVal scale='0'>                                               
              37819000000                                                        
            </NumericVal>                                                        
            <NumericVal scale='0'>                                               
              41130000000                                                        
            </NumericVal>                                                        
          </OpEQ>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O65'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 48 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE              >> range_t_3.in;
>>sh echo PUBLISH MVRNGCON_T.xml  >> range_t_3.in;
>>sh echo MATCH RANGECONSTR_T_3.xml >> range_t_3.in;
>>
>>sh sh -c "$QMS range_t_3.in range_t_3.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_T
          </MVName>
          <RangePredList>
            <Range ref='R136' result='NotProvided'>
              <MVColumn ref='C4'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O65' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R136' result='NotProvided'>
---
>             <Range ref='R145' result='NotProvided'>
25c25
<             <Output ref='O65' result='Provided'>
---
>             <Output ref='O68' result='Provided'>
>>
>>obey TEST004(match_T2);
>>--===========================================
>>-- T2: provided match, excess fractional seconds precision truncated
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match mvrngcon_t2, .000001 added to end of range, but this results in
>>-- a constant which exceeds the precision of the range column. Truncation puts it
>>-- within the required matching range.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where t2 between time'10:00:00.20' and time'11:25:30.450001'
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_T2;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000080'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R143' sqlType='TIME(2) ALLOWS NULLS'>                         
          <Column id='C5' tableId='T1' colIndex='4'>                             
            CAT.RANGE.DTTYPES.T2                                                 
          </Column>                                                              
          <OpBT startIsIncluded='1' endIsIncluded='1'>                           
            <NumericVal scale='2'>                                               
              360002000.00                                                       
            </NumericVal>                                                        
            <NumericVal scale='2'>                                               
              411304500.00                                                       
            </NumericVal>                                                        
          </OpBT>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O60'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_t2.in;
>>sh echo PUBLISH MVRNGCON_T2.xml  >> range_t2.in;
>>sh echo MATCH RANGECONSTR_T2.xml >> range_t2.in;
>>
>>sh sh -c "$QMS range_t2.in range_t2.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_T2
          </MVName>
          <RangePredList>
            <Range ref='R143' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O60' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R143' result='Provided'>
---
>             <Range ref='R149' result='Provided'>
22c22
<             <Output ref='O60' result='Provided'>
---
>             <Output ref='O62' result='Provided'>
>>
>>--===========================================
>>-- T2 part 2: provided match, timestamp constants have different fractional
>>--            precision, but are equivalent.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- match (Provided) with mvrngcon_t2
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where t2 <= time'11:25:30.450000' and t2 >= time'10:00:00.200000'
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_T2_2;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000080'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R142' sqlType='TIME(2) ALLOWS NULLS'>                         
          <Column id='C5' tableId='T1' colIndex='4'>                             
            CAT.RANGE.DTTYPES.T2                                                 
          </Column>                                                              
          <OpBT startIsIncluded='1' endIsIncluded='1'>                           
            <NumericVal scale='2'>                                               
              360002000.00                                                       
            </NumericVal>                                                        
            <NumericVal scale='2'>                                               
              411304500.00                                                       
            </NumericVal>                                                        
          </OpBT>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O61'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_t2_2.in;
>>sh echo PUBLISH MVRNGCON_T2.xml  >> range_t2_2.in;
>>sh echo MATCH RANGECONSTR_T2_2.xml >> range_t2_2.in;
>>
>>sh sh -c "$QMS range_t2_2.in range_t2_2.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_T2
          </MVName>
          <RangePredList>
            <Range ref='R142' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O61' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R142' result='Provided'>
---
>             <Range ref='R148' result='Provided'>
22c22
<             <Output ref='O61' result='Provided'>
---
>             <Output ref='O63' result='Provided'>
>>
>>obey TEST004(match_T6);
>>--===========================================
>>-- T6: No match, query range has same endpoint but is closed, while MV range is open.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should not match; MV does not include value time'01:15:30.123456'
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where t6 <= time'01:15:30.123456'
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_T6;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000040'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R124' sqlType='TIME(6) ALLOWS NULLS'>                         
          <Column id='C6' tableId='T1' colIndex='5'>                             
            CAT.RANGE.DTTYPES.T6                                                 
          </Column>                                                              
          <OpLE isNormalized='1'>                                                
            <NumericVal scale='6'>                                               
              4530.123456                                                        
            </NumericVal>                                                        
          </OpLE>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O59'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 42 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_t6.in;
>>sh echo PUBLISH MVRNGCON_T6.xml  >> range_t6.in;
>>sh echo MATCH RANGECONSTR_T6.xml >> range_t6.in;
>>
>>sh sh -c "$QMS range_t6.in range_t6.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because The query range predicate R124 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
22c22
<     <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because The query range predicate R124 is not subsumed by the corresponding MV predicate.]]></Info>
---
>     <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because The query range predicate R127 is not subsumed by the corresponding MV predicate.]]></Info>
>>
>>--===========================================
>>-- T6 part 2: Not provided match with several overlapping subranges.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- Should match (Not Provided) mvrngcon_t6.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where t6 between time'01:00:00.123456' and time'01:15:30.123456' and t6 <> time'01:15:30.123456'
+>         or t6 in (time'00:00:00', time'01:15:30.123455', time'00:15:00.999')
+>         or t6 < time'00:30:00'
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_T6_2;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000040'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R203' sqlType='TIME(6) ALLOWS NULLS'>                         
          <Column id='C6' tableId='T1' colIndex='5'>                             
            CAT.RANGE.DTTYPES.T6                                                 
          </Column>                                                              
          <OpLE isNormalized='1'>                                                
            <NumericVal scale='6'>                                               
              1799.999999                                                        
            </NumericVal>                                                        
          </OpLE>                                                                
          <OpBT startIsIncluded='1' endIsIncluded='1'>                           
            <NumericVal scale='6'>                                               
              3600.123456                                                        
            </NumericVal>                                                        
            <NumericVal scale='6'>                                               
              4530.123455                                                        
            </NumericVal>                                                        
          </OpBT>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O74'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 50 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_t6_2.in;
>>sh echo PUBLISH MVRNGCON_T6.xml  >> range_t6_2.in;
>>sh echo MATCH RANGECONSTR_T6_2.xml >> range_t6_2.in;
>>
>>sh sh -c "$QMS range_t6_2.in range_t6_2.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_T6
          </MVName>
          <RangePredList>
            <Range ref='R203' result='NotProvided'>
              <MVColumn ref='C6'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O74' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R203' result='NotProvided'>
---
>             <Range ref='R216' result='NotProvided'>
25c25
<             <Output ref='O74' result='Provided'>
---
>             <Output ref='O79' result='Provided'>
>>
>>obey TEST004(match_TS);
>>--===========================================
>>-- TS: No match, query range has same range but adds null.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should not match; query range is same as mv, but allows null as well.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where ts < timestamp'2005-10-12 14:45:01.123456' or ts is null
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_TS;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000020'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R132' sqlType='TIMESTAMP(6) ALLOWS NULLS'>                    
          <Column id='C7' tableId='T1' colIndex='6'>                             
            CAT.RANGE.DTTYPES.TS                                                 
          </Column>                                                              
          <OpLE isNormalized='1'>                                                
            <NumericVal scale='6'>                                               
              211995888301.123455                                                
            </NumericVal>                                                        
          </OpLE>                                                                
          <OpEQ>                                                                 
            <NullVal/>                                                           
          </OpEQ>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O61'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_ts.in;
>>sh echo PUBLISH MVRNGCON_TS.xml  >> range_ts.in;
>>sh echo MATCH RANGECONSTR_TS.xml >> range_ts.in;
>>
>>sh sh -c "$QMS range_ts.in range_ts.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because The query range predicate R132 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
23c23
<     <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because The query range predicate R132 is not subsumed by the corresponding MV predicate.]]></Info>
---
>     <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because The query range predicate R135 is not subsumed by the corresponding MV predicate.]]></Info>
>>
>>--===========================================
>>-- TS part 2: Match (Provided) mvrngcon_ts, query has contiguous subranges
>>--            that are equivalent to mv's range.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match (Provided) mvrngcon_ts; query range is equivalent to that of mv.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where ts between timestamp'0001-01-01 00:00:00' and timestamp'1950-12-31 23:59:59.999999'
+>         or ts > timestamp'1951-01-01 00:00:00' and ts < timestamp'2005-10-12 14:45:01.123456'
+>         or ts = timestamp'1951-01-01 00:00:00'
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_TS_2;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000020'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R179' sqlType='TIMESTAMP(6) ALLOWS NULLS'>                    
          <Column id='C7' tableId='T1' colIndex='6'>                             
            CAT.RANGE.DTTYPES.TS                                                 
          </Column>                                                              
          <OpLE isNormalized='1'>                                                
            <NumericVal scale='6'>                                               
              211995888301.123455                                                
            </NumericVal>                                                        
          </OpLE>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O68'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 42 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_ts_2.in;
>>sh echo PUBLISH MVRNGCON_TS.xml  >> range_ts_2.in;
>>sh echo MATCH RANGECONSTR_TS_2.xml >> range_ts_2.in;
>>
>>sh sh -c "$QMS range_ts_2.in range_ts_2.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_TS
          </MVName>
          <RangePredList>
            <Range ref='R179' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O68' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R179' result='Provided'>
---
>             <Range ref='R185' result='Provided'>
22c22
<             <Output ref='O68' result='Provided'>
---
>             <Output ref='O70' result='Provided'>
>>
>>obey TEST004(match_TS3);
>>--===========================================
>>-- TS3: No match, query includes one additional value outside range of mv.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should not match; query range is same as mv, but allows null as well.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where ts3 < timestamp'2005-10-12 14:45:01.125' or ts3 = timestamp'2005-10-12 14:45:01.125'
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_TS3;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000800'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R134' sqlType='TIMESTAMP(3) ALLOWS NULLS'>                    
          <Column id='C9' tableId='T1' colIndex='8'>                             
            CAT.RANGE.DTTYPES.TS3                                                
          </Column>                                                              
          <OpLE isNormalized='1'>                                                
            <NumericVal scale='3'>                                               
              211995888301124.000                                                
            </NumericVal>                                                        
          </OpLE>                                                                
          <OpEQ>                                                                 
            <NumericVal scale='3'>                                               
              211995888301125.000                                                
            </NumericVal>                                                        
          </OpEQ>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O61'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 47 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE                >> range_ts3.in;
>>sh echo PUBLISH MVRNGCON_TS3.xml  >> range_ts3.in;
>>sh echo MATCH RANGECONSTR_TS3.xml >> range_ts3.in;
>>
>>sh sh -c "$QMS range_ts3.in range_ts3.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because The query range predicate R134 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
24c24
<     <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because The query range predicate R134 is not subsumed by the corresponding MV predicate.]]></Info>
---
>     <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because The query range predicate R140 is not subsumed by the corresponding MV predicate.]]></Info>
>>
>>--===========================================
>>-- TS3 part 2: Not Provided match, query has overlapping subranges all subsumed
>>--             by mv range, plus gratuitous NOT NULL.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match (Not Provided) mvrngcon_ts3
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where ts3 is not null and
+>            (ts3 between timestamp'1800-10-10 22:10:10' and timestamp'1900-10-10 22:10:10' or
+>             ts3 between timestamp'1850-10-10 22:10:10' and timestamp'1950-10-10 22:10:10' or
+>             ts3 < timestamp'1850-01-01 00:00:00')
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_TS3_2;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000800'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R178' sqlType='TIMESTAMP(3) ALLOWS NULLS'>                    
          <Column id='C9' tableId='T1' colIndex='8'>                             
            CAT.RANGE.DTTYPES.TS3                                                
          </Column>                                                              
          <OpLE isNormalized='1'>                                                
            <NumericVal scale='3'>                                               
              210260052610000.000                                                
            </NumericVal>                                                        
          </OpLE>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O68'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 42 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE                >> range_ts3_2.in;
>>sh echo PUBLISH MVRNGCON_TS3.xml  >> range_ts3_2.in;
>>sh echo MATCH RANGECONSTR_TS3_2.xml >> range_ts3_2.in;
>>
>>sh sh -c "$QMS range_ts3_2.in range_ts3_2.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_TS3
          </MVName>
          <RangePredList>
            <Range ref='R178' result='NotProvided'>
              <MVColumn ref='C9'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O68' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R178' result='NotProvided'>
---
>             <Range ref='R184' result='NotProvided'>
25c25
<             <Output ref='O68' result='Provided'>
---
>             <Output ref='O70' result='Provided'>
>>
>>obey TEST004(match_YR);
>>--===========================================
>>-- YR: NotProvided match, query duplicates mv range + null, but null is prohibited
>>--     by NOT NULL constraint. Would be Provided except that check constraints are
>>--     not used for ranges in MV descriptors.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match mvrngcon_yr, "yr is null" ignored because of NOT NULL constraint.
>>-- Match is NotProvided instead of Provided, because check constraints are not
>>-- used in ranges in MV descriptors.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where yr < interval '20' year or yr is null
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_YR;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000400'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R126' sqlType='INTERVAL YEAR(2) NO NULLS'>                    
          <Column id='C10' tableId='T1' colIndex='9' isNullable='0'>             
            CAT.RANGE.DTTYPES.YR                                                 
          </Column>                                                              
          <OpBT startIsIncluded='1' endIsIncluded='1'>                           
            <NumericVal scale='0'>                                               
              0                                                                  
            </NumericVal>                                                        
            <NumericVal scale='0'>                                               
              228                                                                
            </NumericVal>                                                        
          </OpBT>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O61'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_yr.in;
>>sh echo PUBLISH MVRNGCON_YR.xml  >> range_yr.in;
>>sh echo MATCH RANGECONSTR_YR.xml >> range_yr.in;
>>
>>sh sh -c "$QMS range_yr.in range_yr.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_YR
          </MVName>
          <RangePredList>
            <Range ref='R126' result='NotProvided'>
              <MVColumn ref='C10'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O61' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R126' result='NotProvided'>
---
>             <Range ref='R129' result='NotProvided'>
25c25
<             <Output ref='O61' result='Provided'>
---
>             <Output ref='O62' result='Provided'>
>>
>>--===========================================
>>-- YR part 2: NotProvided match, query excludes negative interval values not
>>--            explicitly excluded by mv range, but check constraint disallows them.
>>--            However, our policy is to not use check constraints in the MV descriptor.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match (NotProvided) mvrngcon_yr
>>-- Match is NotProvided instead of Provided, because check constraints are not
>>-- used in MV descriptors.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where yr >= interval'0'year and yr < interval '20' year
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_YR_2;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000400'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R141' sqlType='INTERVAL YEAR(2) NO NULLS'>                    
          <Column id='C10' tableId='T1' colIndex='9' isNullable='0'>             
            CAT.RANGE.DTTYPES.YR                                                 
          </Column>                                                              
          <OpBT startIsIncluded='1' endIsIncluded='1'>                           
            <NumericVal scale='0'>                                               
              0                                                                  
            </NumericVal>                                                        
            <NumericVal scale='0'>                                               
              228                                                                
            </NumericVal>                                                        
          </OpBT>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O60'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_yr_2.in;
>>sh echo PUBLISH MVRNGCON_YR.xml  >> range_yr_2.in;
>>sh echo MATCH RANGECONSTR_YR_2.xml >> range_yr_2.in;
>>
>>sh sh -c "$QMS range_yr_2.in range_yr_2.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_YR
          </MVName>
          <RangePredList>
            <Range ref='R141' result='NotProvided'>
              <MVColumn ref='C10'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O60' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R141' result='NotProvided'>
---
>             <Range ref='R148' result='NotProvided'>
25c25
<             <Output ref='O60' result='Provided'>
---
>             <Output ref='O63' result='Provided'>
>>
>>--===========================================
>>-- YR part 3: Not Provided match, query excludes negative interval values not
>>--            explicitly excluded by mv range, but check constraint disallows them.
>>--            Start point not inclusive as in mv range, so Not Provided instead of
>>--            Provided. Would be NotProvided anyway because check constraints not
>>--            used when determining ranges for MV descriptors.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should match (Not Provided) mvrngcon_yr
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where yr > interval'0'year and yr < interval '20' year
+>	    order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_YR_3;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000400'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R141' sqlType='INTERVAL YEAR(2) NO NULLS'>                    
          <Column id='C10' tableId='T1' colIndex='9' isNullable='0'>             
            CAT.RANGE.DTTYPES.YR                                                 
          </Column>                                                              
          <OpBT startIsIncluded='1' endIsIncluded='1'>                           
            <NumericVal scale='0'>                                               
              12                                                                 
            </NumericVal>                                                        
            <NumericVal scale='0'>                                               
              228                                                                
            </NumericVal>                                                        
          </OpBT>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O60'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_yr_3.in;
>>sh echo PUBLISH MVRNGCON_YR.xml  >> range_yr_3.in;
>>sh echo MATCH RANGECONSTR_YR_3.xml >> range_yr_3.in;
>>
>>sh sh -c "$QMS range_yr_3.in range_yr_3.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_YR
          </MVName>
          <RangePredList>
            <Range ref='R141' result='NotProvided'>
              <MVColumn ref='C10'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O60' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
Diffs with result descriptor after changing predicate used in query: 
18c18
<             <Range ref='R141' result='NotProvided'>
---
>             <Range ref='R148' result='NotProvided'>
25c25
<             <Output ref='O60' result='Provided'>
---
>             <Output ref='O63' result='Provided'>
>>
>>obey TEST004(match_MON);
>>--===========================================
>>-- MON: NotProvided match on mvrngcon_mon.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should get notprovided match on mvrngcon_mon. Note use of year interval as opposed
>>-- to month interval used in the predicate of the mv.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where mon > interval '500' year(3)
+>      order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_MON;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00000100'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R124' sqlType='INTERVAL MONTH(4) ALLOWS NULLS'>               
          <Column id='C12' tableId='T1' colIndex='11'>                           
            CAT.RANGE.DTTYPES.MON                                                
          </Column>                                                              
          <OpGE isNormalized='1'>                                                
            <NumericVal scale='0'>                                               
              6001                                                               
            </NumericVal>                                                        
          </OpGE>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O59'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 42 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE                >> range_mon.in;
>>sh echo PUBLISH MVRNGCON_MON.xml  >> range_mon.in;
>>sh echo MATCH RANGECONSTR_MON.xml >> range_mon.in;
>>
>>sh sh -c "$QMS range_mon.in range_mon.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_MON
          </MVName>
          <RangePredList>
            <Range ref='R124' result='NotProvided'>
              <MVColumn ref='C12'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O59' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
>>
>>obey TEST004(match_SEC);
>>--===========================================
>>-- SEC: NotProvided match on mvrngcon_sec.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should get notprovided match on mvrngcon_sec.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where sec = interval '10.1' second(2,1)
+>      order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_SEC;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00008000'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R125' sqlType='INTERVAL SECOND(2,4) ALLOWS NULLS'>            
          <Column id='C13' tableId='T1' colIndex='12'>                           
            CAT.RANGE.DTTYPES.SEC                                                
          </Column>                                                              
          <OpEQ>                                                                 
            <NumericVal scale='4'>                                               
              1010.0000                                                          
            </NumericVal>                                                        
          </OpEQ>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O59'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 42 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE                >> range_sec.in;
>>sh echo PUBLISH MVRNGCON_SEC.xml  >> range_sec.in;
>>sh echo MATCH RANGECONSTR_SEC.xml >> range_sec.in;
>>
>>sh sh -c "$QMS range_sec.in range_sec.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_SEC
          </MVName>
          <RangePredList>
            <Range ref='R125' result='NotProvided'>
              <MVColumn ref='C13'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O59' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
>>
>>obey TEST004(match_MNT);
>>--===========================================
>>-- MNT: NotProvided match on mvrngcon_mnt.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should get notprovided match on mvrngcon_mnt.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where mnt between interval '1' minute and interval '3' minute
+>      order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_MNT;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00004000'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R143' sqlType='INTERVAL MINUTE(1) ALLOWS NULLS'>              
          <Column id='C14' tableId='T1' colIndex='13'>                           
            CAT.RANGE.DTTYPES.MNT                                                
          </Column>                                                              
          <OpBT startIsIncluded='1' endIsIncluded='1'>                           
            <NumericVal scale='0'>                                               
              60000000                                                           
            </NumericVal>                                                        
            <NumericVal scale='0'>                                               
              180000000                                                          
            </NumericVal>                                                        
          </OpBT>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O60'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE                >> range_mnt.in;
>>sh echo PUBLISH MVRNGCON_MNT.xml  >> range_mnt.in;
>>sh echo MATCH RANGECONSTR_MNT.xml >> range_mnt.in;
>>
>>sh sh -c "$QMS range_mnt.in range_mnt.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_MNT
          </MVName>
          <RangePredList>
            <Range ref='R143' result='NotProvided'>
              <MVColumn ref='C14'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O60' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
>>
>>obey TEST004(match_MS);
>>--===========================================
>>-- MS: NotProvided match on mvrngcon_ms.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should get notprovided match on mvrngcon_ms.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where ms = interval'345'second(3) or ms = interval-'300'second(3)
+>      order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_MS;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00002000'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R135' sqlType='INTERVAL MINUTE(2) TO SECOND(6) ALLOWS NULLS'> 
          <Column id='C15' tableId='T1' colIndex='14'>                           
            CAT.RANGE.DTTYPES.MS                                                 
          </Column>                                                              
          <OpEQ>                                                                 
            <NumericVal scale='6'>                                               
              -300.000000                                                        
            </NumericVal>                                                        
            <NumericVal scale='6'>                                               
              345.000000                                                         
            </NumericVal>                                                        
          </OpEQ>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O62'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_ms.in;
>>sh echo PUBLISH MVRNGCON_MS.xml  >> range_ms.in;
>>sh echo MATCH RANGECONSTR_MS.xml >> range_ms.in;
>>
>>sh sh -c "$QMS range_ms.in range_ms.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_MS
          </MVName>
          <RangePredList>
            <Range ref='R135' result='NotProvided'>
              <MVColumn ref='C15'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O62' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
>>
>>obey TEST004(match_HR);
>>--===========================================
>>-- HR: NotProvided match on mvrngcon_hr.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should get notprovided match on mvrngcon_hr.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where hr > interval'10001'hour(5)
+>      order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_HR;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00001000'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R124' sqlType='INTERVAL HOUR(8) ALLOWS NULLS'>                
          <Column id='C16' tableId='T1' colIndex='15'>                           
            CAT.RANGE.DTTYPES.HR                                                 
          </Column>                                                              
          <OpGE isNormalized='1'>                                                
            <NumericVal scale='0'>                                               
              36007200000000                                                     
            </NumericVal>                                                        
          </OpGE>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O59'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 42 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_hr.in;
>>sh echo PUBLISH MVRNGCON_HR.xml  >> range_hr.in;
>>sh echo MATCH RANGECONSTR_HR.xml >> range_hr.in;
>>
>>sh sh -c "$QMS range_hr.in range_hr.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_HR
          </MVName>
          <RangePredList>
            <Range ref='R124' result='NotProvided'>
              <MVColumn ref='C16'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O59' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
>>
>>obey TEST004(match_HM);
>>--===========================================
>>-- HM: NotProvided match on mvrngcon_hm.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should get notprovided match on mvrngcon_hm.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where hm = interval '1:10' hour to minute
+>      order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_HM;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00080000'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R125' sqlType='INTERVAL HOUR(2) TO MINUTE ALLOWS NULLS'>      
          <Column id='C17' tableId='T1' colIndex='16'>                           
            CAT.RANGE.DTTYPES.HM                                                 
          </Column>                                                              
          <OpEQ>                                                                 
            <NumericVal scale='0'>                                               
              4200000000                                                         
            </NumericVal>                                                        
          </OpEQ>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O59'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 42 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_hm.in;
>>sh echo PUBLISH MVRNGCON_HM.xml  >> range_hm.in;
>>sh echo MATCH RANGECONSTR_HM.xml >> range_hm.in;
>>
>>sh sh -c "$QMS range_hm.in range_hm.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_HM
          </MVName>
          <RangePredList>
            <Range ref='R125' result='NotProvided'>
              <MVColumn ref='C17'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O59' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
>>
>>obey TEST004(match_HS);
>>--===========================================
>>-- HS: NotProvided match on mvrngcon_hs.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should get notprovided match on mvrngcon_hs.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where hs between interval -'10' hour(2) and interval '1000' minute(4)
+>      order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_HS;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00040000'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R143' sqlType='INTERVAL HOUR(2) TO SECOND(6) ALLOWS NULLS'>   
          <Column id='C18' tableId='T1' colIndex='17'>                           
            CAT.RANGE.DTTYPES.HS                                                 
          </Column>                                                              
          <OpBT startIsIncluded='1' endIsIncluded='1'>                           
            <NumericVal scale='6'>                                               
              -36000.000000                                                      
            </NumericVal>                                                        
            <NumericVal scale='6'>                                               
              60000.000000                                                       
            </NumericVal>                                                        
          </OpBT>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O60'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>-- Don't do an INITIALIZE here; it causes unwanted MVs to be considered.
>>sh echo PUBLISH MVRNGCON_HS.xml  >> range_hs.in;
>>sh echo MATCH RANGECONSTR_HS.xml >> range_hs.in;
>>
>>sh sh -c "$QMS range_hs.in range_hs.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_HS
          </MVName>
          <RangePredList>
            <Range ref='R143' result='NotProvided'>
              <MVColumn ref='C18'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O60' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
  </JbbResult>
</Result>
>>
>>obey TEST004(match_HS_1);
>>--===========================================
>>-- HS_1: Provided match on mvrngcon_hs_1.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should get provided match on mvrngcon_hs_1. The mv has a range including all
>>-- allowable values but the first and last, and the query predicate just excludes
>>-- the first and last allowable value.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where hs <> interval-'99:59:59.999999'hour to second and hs <> interval'99:59:59.999999'hour to second
+>      order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_HS_1;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00040000'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R154' sqlType='INTERVAL HOUR(2) TO SECOND(6) ALLOWS NULLS'>   
          <Column id='C18' tableId='T1' colIndex='17'>                           
            CAT.RANGE.DTTYPES.HS                                                 
          </Column>                                                              
          <OpBT startIsIncluded='1' endIsIncluded='1'>                           
            <NumericVal scale='6'>                                               
              -359999.999998                                                     
            </NumericVal>                                                        
            <NumericVal scale='6'>                                               
              359999.999998                                                      
            </NumericVal>                                                        
          </OpBT>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O61'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>-- Don't do an INITIALIZE here; it causes unwanted MVs to be considered.
>>sh echo PUBLISH MVRNGCON_HS_1.xml  >> range_hs_1.in;
>>sh echo MATCH RANGECONSTR_HS_1.xml >> range_hs_1.in;
>>
>>sh sh -c "$QMS range_hs_1.in range_hs_1.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_HS_1
          </MVName>
          <RangePredList>
            <Range ref='R154' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O61' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
  </JbbResult>
</Result>
>>
>>obey TEST004(match_DY);
>>--===========================================
>>-- DY: NotProvided match on mvrngcon_dy.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should get notprovided match on mvrngcon_dy. Rewrite instructions should
>>-- include predicates on dh and dm as well.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where dy > interval '99' day(2) and dy < interval '101' day(3)
+>        and dh > interval '10 12' day(2) to hour
+>        and dm < interval '1 2:30' day to minute
+>      order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_DY;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00830000'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R146' sqlType='INTERVAL DAY(2) TO HOUR ALLOWS NULLS'>         
          <Column id='C20' tableId='T1' colIndex='19'>                           
            CAT.RANGE.DTTYPES.DH                                                 
          </Column>                                                              
          <OpGE isNormalized='1'>                                                
            <NumericVal scale='0'>                                               
              910800000000                                                       
            </NumericVal>                                                        
          </OpGE>                                                                
        </Range>                                                                 
        <Range id='R147' sqlType='INTERVAL DAY(2) TO MINUTE ALLOWS NULLS'>       
          <Column id='C21' tableId='T1' colIndex='20'>                           
            CAT.RANGE.DTTYPES.DM                                                 
          </Column>                                                              
          <OpLE isNormalized='1'>                                                
            <NumericVal scale='0'>                                               
              95340000000                                                        
            </NumericVal>                                                        
          </OpLE>                                                                
        </Range>                                                                 
        <Range id='R149' sqlType='INTERVAL DAY(3) ALLOWS NULLS'>                 
          <Column id='C19' tableId='T1' colIndex='18'>                           
            CAT.RANGE.DTTYPES.DY                                                 
          </Column>                                                              
          <OpEQ>                                                                 
            <NumericVal scale='0'>                                               
              8640000000000                                                      
            </NumericVal>                                                        
          </OpEQ>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O65'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 62 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_dy.in;
>>sh echo PUBLISH MVRNGCON_DY.xml  >> range_dy.in;
>>sh echo MATCH RANGECONSTR_DY.xml >> range_dy.in;
>>
>>sh sh -c "$QMS range_dy.in range_dy.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_DY
          </MVName>
          <TableList>
            <Table ref='T1'>
              CAT.RANGE.DTTYPES
            </Table>
          </TableList>
          <JoinPredList>
            <JoinPred>
              <Column ref='C1' tableId='T1'>
                CAT.RANGE.DTTYPES.SYSKEY
              </Column>
              <MVColumn>
                SYS_SYSKEY1
              </MVColumn>
            </JoinPred>
          </JoinPredList>
          <RangePredList>
            <Range ref='R149' result='Provided'>
            </Range>
            <Range ref='R147' result='NotProvided'>
              <Column ref='C21' tableId='T1'>
                CAT.RANGE.DTTYPES.DM
              </Column>
            </Range>
            <Range ref='R146' result='NotProvided'>
              <Column ref='C20' tableId='T1'>
                CAT.RANGE.DTTYPES.DH
              </Column>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O65' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
>>
>>obey TEST004(match_DH);
>>--===========================================
>>-- DH: Matches empty mv.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- Matches mvrngcon_dh, which is guaranteed to be empty due to its predicate.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where dh > interval'100'day(3)
+>      order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_DH;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor                                                     
---------------------------------------------------------------------

<Query>                                                              
  <Version>                                                          
    1.0                                                              
  </Version>                                                         
  <Misc rewriteLevel='3'>                                            
  </Misc>                                                            
  <JBB id='B10000'>                                                  
    <Hub>                                                            
      <JBBCList>                                                     
        <Table id='T1' TS='212223874129246939' numCols='22'>         
          CAT.RANGE.DTTYPES                                          
          <Key>                                                      
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>
              CAT.RANGE.DTTYPES.SYSKEY                               
            </Column>                                                
          </Key>                                                     
        </Table>                                                     
      </JBBCList>                                                    
      <ResidualPredList>                                             
        <Residual id='D126'>                                         
          <Function id='S126' op='return_false'>                     
          </Function>                                                
        </Residual>                                                  
      </ResidualPredList>                                            
    </Hub>                                                           
    <ExtraHub>                                                       
    </ExtraHub>                                                      
    <OutputList>                                                     
      <Output id='O59'>                                              
        <Column id='C2' tableId='T1' colIndex='1'>                   
          CAT.RANGE.DTTYPES.I                                        
        </Column>                                                    
      </Output>                                                      
    </OutputList>                                                    
  </JBB>                                                             
</Query>                                                             

--- 36 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>-- Don't do an INITIALIZE here; it causes unwanted MVs to be considered.
>>sh echo PUBLISH MVRNGCON_DH.xml  >> range_dh.in;
>>sh echo MATCH RANGECONSTR_DH.xml >> range_dh.in;
>>
>>sh sh -c "$QMS range_dh.in range_dh.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_DH
          </MVName>
          <ResidualPredList>
            <Residual ref='D126' result='Provided'>
            </Residual>
          </ResidualPredList>
          <OutputList>
            <Output ref='O59' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
  </JbbResult>
</Result>
>>
>>obey TEST004(match_DM);
>>--===========================================
>>-- DM: Matches empty mv.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- Matches mvrngcon_dm, which is guaranteed to be empty due to its predicate.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where dm < interval-'100'day(3)
+>      order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_DM;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor                                                     
---------------------------------------------------------------------

<Query>                                                              
  <Version>                                                          
    1.0                                                              
  </Version>                                                         
  <Misc rewriteLevel='3'>                                            
  </Misc>                                                            
  <JBB id='B10000'>                                                  
    <Hub>                                                            
      <JBBCList>                                                     
        <Table id='T1' TS='212223874129246939' numCols='22'>         
          CAT.RANGE.DTTYPES                                          
          <Key>                                                      
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>
              CAT.RANGE.DTTYPES.SYSKEY                               
            </Column>                                                
          </Key>                                                     
        </Table>                                                     
      </JBBCList>                                                    
      <ResidualPredList>                                             
        <Residual id='D126'>                                         
          <Function id='S126' op='return_false'>                     
          </Function>                                                
        </Residual>                                                  
      </ResidualPredList>                                            
    </Hub>                                                           
    <ExtraHub>                                                       
    </ExtraHub>                                                      
    <OutputList>                                                     
      <Output id='O59'>                                              
        <Column id='C2' tableId='T1' colIndex='1'>                   
          CAT.RANGE.DTTYPES.I                                        
        </Column>                                                    
      </Output>                                                      
    </OutputList>                                                    
  </JBB>                                                             
</Query>                                                             

--- 36 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>-- Don't do an INITIALIZE here; it causes unwanted MVs to be considered.
>>sh echo PUBLISH MVRNGCON_DM.xml  >> range_dm.in;
>>sh echo MATCH RANGECONSTR_DM.xml >> range_dm.in;
>>
>>sh sh -c "$QMS range_dm.in range_dm.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_DM
          </MVName>
          <ResidualPredList>
            <Residual ref='D126' result='Provided'>
            </Residual>
          </ResidualPredList>
          <OutputList>
            <Output ref='O59' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
  </JbbResult>
</Result>
>>
>>obey TEST004(match_DS);
>>--===========================================
>>-- DS: NotProvided match with mvrngcon_ds.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- should get notprovided match with mvrngcon_ds; has same range except for stopping 1 microsecond short.
>>prepare QueryStmt from
+>      select i
+>      from dttypes
+>      where ds between interval-'1234567 10:20:30.123456'day(7) to second(6) and (interval'365'day(3) - interval'0.000001'second(6))
+>      order by i;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGECONSTR_DS;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------

<Query>                                                                          
  <Version>                                                                      
    1.0                                                                          
  </Version>                                                                     
  <Misc rewriteLevel='3'>                                                        
  </Misc>                                                                        
  <JBB id='B10000'>                                                              
    <Hub>                                                                        
      <JBBCList>                                                                 
        <Table id='T1' TS='212223874129246939' numCols='22' rangeBits='00400000'>
          CAT.RANGE.DTTYPES                                                      
          <Key>                                                                  
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>            
              CAT.RANGE.DTTYPES.SYSKEY                                           
            </Column>                                                            
          </Key>                                                                 
        </Table>                                                                 
      </JBBCList>                                                                
      <RangePredList>                                                            
        <Range id='R148' sqlType='INTERVAL DAY(7) TO SECOND(6) ALLOWS NULLS'>    
          <Column id='C22' tableId='T1' colIndex='21'>                           
            CAT.RANGE.DTTYPES.DS                                                 
          </Column>                                                              
          <OpBT startIsIncluded='1' endIsIncluded='1'>                           
            <NumericVal scale='6'>                                               
              -106666626030.123456                                               
            </NumericVal>                                                        
            <NumericVal scale='6'>                                               
              31535999.999999                                                    
            </NumericVal>                                                        
          </OpBT>                                                                
        </Range>                                                                 
      </RangePredList>                                                           
    </Hub>                                                                       
    <ExtraHub>                                                                   
    </ExtraHub>                                                                  
    <OutputList>                                                                 
      <Output id='O62'>                                                          
        <Column id='C2' tableId='T1' colIndex='1'>                               
          CAT.RANGE.DTTYPES.I                                                    
        </Column>                                                                
      </Output>                                                                  
    </OutputList>                                                                
  </JBB>                                                                         
</Query>                                                                         

--- 45 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE               >> range_ds.in;
>>sh echo PUBLISH MVRNGCON_DS.xml  >> range_ds.in;
>>sh echo MATCH RANGECONSTR_DS.xml >> range_ds.in;
>>
>>sh sh -c "$QMS range_ds.in range_ds.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B10000'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DTTYPES
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.MVRNGCON_DS
          </MVName>
          <RangePredList>
            <Range ref='R148' result='NotProvided'>
              <MVColumn ref='C22'>
                Y
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O62' result='Provided'>
              <MVColumn ref='C2'>
                X
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_D was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DH was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DM was disqualified because it has residual predicates and the Query does not.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_DY was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_1 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_HS_2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MNT was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MON was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_MS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_SEC was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T2 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_T6 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_TS3 was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YM was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.MVRNGCON_YR was disqualified because Table CAT.RANGE.DTTYPES failed on range bitmap.]]></Info>
  </JbbResult>
</Result>
>>
>>obey TEST004(float_coverage);
>>--===========================================
>>-- Additional tests to extend code coverage for floating point types.
>>--===========================================
>>
>>create mv mvqr_004_flt_mv1 refresh on request initialized on create as select d from numtypes where d>5e0 group by d;

*** WARNING[12112] A secondary index CAT.RANGE.MVQR_004_FLT_MV1_988652875_1113 was created for the materialized view.

--- SQL operation completed with warnings.
>>create mv mvqr_004_flt_mv2 refresh on request initialized on create as select d from numtypes where d<5e0 group by d;

*** WARNING[12112] A secondary index CAT.RANGE.MVQR_004_FLT_MV2_493477285_1113 was created for the materialized view.

--- SQL operation completed with warnings.
>>cqd mvqr_rewrite_candidates 'CAT.RANGE.MVQR_004_FLT_MV1 :,CAT.RANGE.MVQR_004_FLT_MV2';

--- SQL operation complete.
>>prepare s from select d from numtypes where d>10e0 group by d;

--- SQL command prepared.
>>select 'Success: MV used' from table(explain(null,'S')) where tname like '%MVQR_004_FLT_MV1%';

(EXPR)          
----------------

Success: MV used

--- 1 row(s) selected.
>>prepare s from select d from numtypes where d<0e0 group by d;

--- SQL command prepared.
>>select 'Success: MV used' from table(explain(null,'S')) where tname like '%MVQR_004_FLT_MV2%';

(EXPR)          
----------------

Success: MV used

--- 1 row(s) selected.
>>
>>obey TEST004(string_coverage);
>>--===========================================
>>-- Additional tests to extend code coverage for char types.
>>--===========================================
>>
>>create table tch
+>(
+>  i int,
+>  ch char(20),
+>  uch char(20) character set ucs2
+>);

--- SQL operation complete.
>>create mv mvqr_004_str_mv1 refresh on request initialized on create as select ch from tch where ch>'seattle' group by ch;

*** WARNING[12112] A secondary index CAT.RANGE.MVQR_004_STR_MV1_172416195_1113 was created for the materialized view.

--- SQL operation completed with warnings.
>>create mv mvqr_004_str_mv2 refresh on request initialized on create as select ch from tch where ch<'seattle' group by ch;

*** WARNING[12112] A secondary index CAT.RANGE.MVQR_004_STR_MV2_688963495_1113 was created for the materialized view.

--- SQL operation completed with warnings.
>>cqd mvqr_rewrite_candidates 'CAT.RANGE.MVQR_004_STR_MV1 :,CAT.RANGE.MVQR_004_STR_MV2';

--- SQL operation complete.
>>prepare s from select ch from tch where ch>'tampa' group by ch;

--- SQL command prepared.
>>select 'Success: MV used' from table(explain(null,'S')) where tname like '%MVQR_004_STR_MV1%';

(EXPR)          
----------------

Success: MV used

--- 1 row(s) selected.
>>prepare s from select ch from tch where ch<'new york' group by ch;

--- SQL command prepared.
>>select 'Success: MV used' from table(explain(null,'S')) where tname like '%MVQR_004_STR_MV2%';

(EXPR)          
----------------

Success: MV used

--- 1 row(s) selected.
>>
>>
>>obey TEST004(toItemExpr_coverage);
>>--=====================================================================================
>>-- Test several redefinitions of QRELement::toItemExpr() that aren't hit by other tests.
>>--=====================================================================================
>>create table t1
+>(
+>  a1 int not null not droppable primary key, b1 int, c1 int
+>);

--- SQL operation complete.
>>
>>create table t2
+>(
+>  a2 int not null not droppable primary key, b2 int, c2 int
+>);

--- SQL operation complete.
>>
>>create table t3
+>(
+>  a3 int not null not droppable primary key, b3 int, c3 int
+>);

--- SQL operation complete.
>>
>>-- This hits QRUnaryOper::toItemExpr().
>>create mv mv1 refresh on request initialized on create as
+>  select b1,b2
+>  from t1,t2
+>  where b1=b2 and b1>10;

*** WARNING[12112] A secondary index CAT.RANGE.MV1_756456816_1113 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>cqd mvqr_rewrite_candidates 'CAT.SCH.MV1';

--- SQL operation complete.
>>prepare QueryStmt from
+>select b1+5,nvl(b2, 999)
+>from t1,t2
+>where b1=b2 and b1>10;

--- SQL command prepared.
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.MV1                                               

--- 1 row(s) selected.
>>
>>-- This hits QRNullVal::toItemExpr().
>>drop mv mv1 cascade;

--- SQL operation complete.
>>create mv mv1 refresh on request initialized on create as
+>  select c1,c2
+>  from t1,t2
+>  where b1=b2 and b1>10;

*** WARNING[12112] A secondary index CAT.RANGE.MV1_281818136_1113 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>cqd mvqr_rewrite_candidates 'CAT.SCH.MV1';

--- SQL operation complete.
>>prepare QueryStmt from
+>select nullif(c1,c2)
+>from t1,t2
+>where b1=b2 and b1>10;

--- SQL command prepared.
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.MV1                                               

--- 1 row(s) selected.
>>
>>-- This hits QRColumn::toItemExpr(); also tests use of backjoin column in expression
>>drop mv mv1 cascade;

--- SQL operation complete.
>>create mv mv1 refresh on request initialized on create as
+>  select c1
+>  from t1,t2,t3
+>  where b1=b2 and b2=b3;

*** WARNING[12112] A secondary index CAT.RANGE.MV1_798327946_1113 was created for the materialized view.

*** WARNING[12112] A secondary index CAT.RANGE.MV1_232522156_1113 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>cqd mvqr_rewrite_candidates 'CAT.SCH.MV1';

--- SQL operation complete.
>>prepare QueryStmt from
+>select c1+c2
+>from t1,t2,t3
+>where b1=b2 and b2=b3;

--- SQL command prepared.
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       BACKJOIN@T2 (CAT.RANGE.T2)                                  
FILE_SCAN                       CAT.RANGE.MV1                                               

--- 2 row(s) selected.
>>
>>drop mv mv1 cascade;

--- SQL operation complete.
>>drop table t1 cascade;

--- SQL operation complete.
>>drop table t2 cascade;

--- SQL operation complete.
>>
>>
>>obey TEST004(test_type_constraints);
>>--===========================================
>>-- Test the effect of applying type-implied constraints to query ranges having
>>-- various relations to the constraint range. This test does not involve matching,
>>-- just generation of the query descriptor.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- Query range entirely contained within type boundaries.
>>select i from numtypes where si between -32000 and 32000 order by i;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874110623489' numCols='9' rangeBits='00000002'>
          CAT.RANGE.NUMTYPES                                                    
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.NUMTYPES.SYSKEY                                         
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R81' sqlType='SMALLINT SIGNED ALLOWS NULLS'>                 
          <Column id='C3' tableId='T1' colIndex='2'>                            
            CAT.RANGE.NUMTYPES.SI                                               
          </Column>                                                             
          <OpBT startIsIncluded='1' endIsIncluded='1'>                          
            <NumericVal scale='0'>                                              
              -32000                                                            
            </NumericVal>                                                       
            <NumericVal scale='0'>                                              
              32000                                                             
            </NumericVal>                                                       
          </OpBT>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O35'>                                                         
        <Column id='C2' tableId='T1' colIndex='1' isNullable='0'>               
          CAT.RANGE.NUMTYPES.I                                                  
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 45 row(s) selected.
>>
>>-- Query range coincides with type boundaries.
>>select i from numtypes where si between -32768 and 32767 order by i;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874110623489' numCols='9' rangeBits='00000002'>
          CAT.RANGE.NUMTYPES                                                    
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.NUMTYPES.SYSKEY                                         
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R82' sqlType='SMALLINT SIGNED ALLOWS NULLS'>                 
          <Column id='C3' tableId='T1' colIndex='2'>                            
            CAT.RANGE.NUMTYPES.SI                                               
          </Column>                                                             
          <!-- empty Range element indicates IS NOT NULL -->                    
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O36'>                                                         
        <Column id='C2' tableId='T1' colIndex='1' isNullable='0'>               
          CAT.RANGE.NUMTYPES.I                                                  
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 38 row(s) selected.
>>
>>-- Query range spans lower type boundary.
>>select i from numtypes where si between -33000 and -32000 order by i;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874110623489' numCols='9' rangeBits='00000002'>
          CAT.RANGE.NUMTYPES                                                    
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.NUMTYPES.SYSKEY                                         
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R85' sqlType='SMALLINT SIGNED ALLOWS NULLS'>                 
          <Column id='C3' tableId='T1' colIndex='2'>                            
            CAT.RANGE.NUMTYPES.SI                                               
          </Column>                                                             
          <OpLE isNormalized='1'>                                               
            <NumericVal scale='0'>                                              
              -32000                                                            
            </NumericVal>                                                       
          </OpLE>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O37'>                                                         
        <Column id='C2' tableId='T1' colIndex='1' isNullable='0'>               
          CAT.RANGE.NUMTYPES.I                                                  
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 42 row(s) selected.
>>
>>-- Query range spans upper type boundary.
>>select i from numtypes where si between 32000 and 33000 order by i;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874110623489' numCols='9' rangeBits='00000002'>
          CAT.RANGE.NUMTYPES                                                    
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.NUMTYPES.SYSKEY                                         
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R78' sqlType='SMALLINT SIGNED ALLOWS NULLS'>                 
          <Column id='C3' tableId='T1' colIndex='2'>                            
            CAT.RANGE.NUMTYPES.SI                                               
          </Column>                                                             
          <OpGE isNormalized='1'>                                               
            <NumericVal scale='0'>                                              
              32000                                                             
            </NumericVal>                                                       
          </OpGE>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O34'>                                                         
        <Column id='C2' tableId='T1' colIndex='1' isNullable='0'>               
          CAT.RANGE.NUMTYPES.I                                                  
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 42 row(s) selected.
>>
>>-- Query range spans both type boundaries.
>>select i from numtypes where si between -33000 and 33000 order by i;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874110623489' numCols='9' rangeBits='00000002'>
          CAT.RANGE.NUMTYPES                                                    
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.NUMTYPES.SYSKEY                                         
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R81' sqlType='SMALLINT SIGNED ALLOWS NULLS'>                 
          <Column id='C3' tableId='T1' colIndex='2'>                            
            CAT.RANGE.NUMTYPES.SI                                               
          </Column>                                                             
          <!-- empty Range element indicates IS NOT NULL -->                    
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O35'>                                                         
        <Column id='C2' tableId='T1' colIndex='1' isNullable='0'>               
          CAT.RANGE.NUMTYPES.I                                                  
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 38 row(s) selected.
>>
>>-- Query range starts at lower type boundary, extends beyond upper boundary.
>>select i from numtypes where si between -32768 and 33000 order by i;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874110623489' numCols='9' rangeBits='00000002'>
          CAT.RANGE.NUMTYPES                                                    
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.NUMTYPES.SYSKEY                                         
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R82' sqlType='SMALLINT SIGNED ALLOWS NULLS'>                 
          <Column id='C3' tableId='T1' colIndex='2'>                            
            CAT.RANGE.NUMTYPES.SI                                               
          </Column>                                                             
          <!-- empty Range element indicates IS NOT NULL -->                    
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O36'>                                                         
        <Column id='C2' tableId='T1' colIndex='1' isNullable='0'>               
          CAT.RANGE.NUMTYPES.I                                                  
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 38 row(s) selected.
>>
>>-- Query range starts below lower type boundary, ends at upper boundary.
>>select i from numtypes where si between -33000 and 32767 order by i;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874110623489' numCols='9' rangeBits='00000002'>
          CAT.RANGE.NUMTYPES                                                    
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.NUMTYPES.SYSKEY                                         
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R82' sqlType='SMALLINT SIGNED ALLOWS NULLS'>                 
          <Column id='C3' tableId='T1' colIndex='2'>                            
            CAT.RANGE.NUMTYPES.SI                                               
          </Column>                                                             
          <!-- empty Range element indicates IS NOT NULL -->                    
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O36'>                                                         
        <Column id='C2' tableId='T1' colIndex='1' isNullable='0'>               
          CAT.RANGE.NUMTYPES.I                                                  
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 38 row(s) selected.
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>
>>obey TEST004(test_equality_sets);
>>--===========================================
>>-- Test the division of equality set members into join pred, range preds, and
>>-- residual preds. This test does not involve matching, just generation of the
>>-- query descriptor.
>>--===========================================
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>-- JP + const
>>select fday, dimdata
+>from fact f, dim1 d
+>where f.dimkey=d.dkey and d.dkey=10
+>order by 1,2;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B0'>                                                                 
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874079579197' numCols='2' rangeBits='00000008'>
          CAT.RANGE.DIM1                                                        
          <Key>                                                                 
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>          
              CAT.RANGE.DIM1.DKEY                                               
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
        <Table id='T2' TS='212223874079579197' numCols='8' rangeBits='00000010'>
          CAT.RANGE.FACT                                                        
          <Key>                                                                 
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>           
              CAT.RANGE.FACT.SYSKEY                                             
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <JoinPredList>                                                            
        <JoinPred id='J47'>                                                     
          <Column ref='C17'>                                                    
          </Column>                                                             
          <Column id='C8' tableId='T2' colIndex='7'>                            
            CAT.RANGE.FACT.DIMKEY                                               
          </Column>                                                             
        </JoinPred>                                                             
      </JoinPredList>                                                           
      <RangePredList>                                                           
        <Range id='R48' sqlType='INTEGER SIGNED NO NULLS'>                      
          <Column ref='C8'>                                                     
          </Column>                                                             
          <OpEQ>                                                                
            <NumericVal scale='0'>                                              
              10                                                                
            </NumericVal>                                                       
          </OpEQ>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O29'>                                                         
        <Column id='C2' tableId='T2' colIndex='1'>                              
          CAT.RANGE.FACT.FDAY                                                   
        </Column>                                                               
      </Output>                                                                 
      <Output id='O53'>                                                         
        <Column id='C18' tableId='T1' colIndex='1'>                             
          CAT.RANGE.DIM1.DIMDATA                                                
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 63 row(s) selected.
>>
>>-- JP + const + duplicate node
>>select fday, dimdata
+>from fact f, dim1 d
+>where f.dimkey=d.dkey and d.dkey=10 and d.dimdata=10
+>order by 1,2;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B0'>                                                                 
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874079579197' numCols='2' rangeBits='0000000C'>
          CAT.RANGE.DIM1                                                        
          <Key>                                                                 
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>          
              CAT.RANGE.DIM1.DKEY                                               
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
        <Table id='T2' TS='212223874079579197' numCols='8' rangeBits='00000010'>
          CAT.RANGE.FACT                                                        
          <Key>                                                                 
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>           
              CAT.RANGE.FACT.SYSKEY                                             
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <JoinPredList>                                                            
        <JoinPred id='J54'>                                                     
          <Column ref='C17'>                                                    
          </Column>                                                             
          <Column id='C8' tableId='T2' colIndex='7'>                            
            CAT.RANGE.FACT.DIMKEY                                               
          </Column>                                                             
        </JoinPred>                                                             
      </JoinPredList>                                                           
      <RangePredList>                                                           
        <Range id='R55' sqlType='INTEGER SIGNED NO NULLS'>                      
          <Column ref='C8'>                                                     
          </Column>                                                             
          <OpEQ>                                                                
            <NumericVal scale='0'>                                              
              10                                                                
            </NumericVal>                                                       
          </OpEQ>                                                               
        </Range>                                                                
        <Range id='R67' sqlType='INTEGER SIGNED ALLOWS NULLS'>                  
          <Column id='C18' tableId='T1' colIndex='1'>                           
            CAT.RANGE.DIM1.DIMDATA                                              
          </Column>                                                             
          <OpEQ>                                                                
            <NumericVal scale='0'>                                              
              10                                                                
            </NumericVal>                                                       
          </OpEQ>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O30'>                                                         
        <Column id='C2' tableId='T2' colIndex='1'>                              
          CAT.RANGE.FACT.FDAY                                                   
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 68 row(s) selected.
>>
>>-- 1 node + const + resid
>>select fday, dimdata
+>from fact f, dim1 d
+>where f.dimkey=f.fquant and f.fquant=10
+>order by 1,2;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B0'>                                                                 
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874079579197' numCols='2'>                     
          CAT.RANGE.DIM1                                                        
          <Key>                                                                 
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>          
              CAT.RANGE.DIM1.DKEY                                               
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
        <Table id='T2' TS='212223874079579197' numCols='8' rangeBits='00000050'>
          CAT.RANGE.FACT                                                        
          <Key>                                                                 
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>           
              CAT.RANGE.FACT.SYSKEY                                             
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R64' sqlType='INTEGER SIGNED ALLOWS NULLS'>                  
          <Column id='C8' tableId='T2' colIndex='7'>                            
            CAT.RANGE.FACT.DIMKEY                                               
          </Column>                                                             
          <OpEQ>                                                                
            <NumericVal scale='0'>                                              
              10                                                                
            </NumericVal>                                                       
          </OpEQ>                                                               
        </Range>                                                                
        <Range id='R65' sqlType='INTEGER SIGNED ALLOWS NULLS'>                  
          <Column id='C6' tableId='T2' colIndex='5'>                            
            CAT.RANGE.FACT.FQUANT                                               
          </Column>                                                             
          <OpEQ>                                                                
            <NumericVal scale='0'>                                              
              10                                                                
            </NumericVal>                                                       
          </OpEQ>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O29'>                                                         
        <Column id='C2' tableId='T2' colIndex='1'>                              
          CAT.RANGE.FACT.FDAY                                                   
        </Column>                                                               
      </Output>                                                                 
      <Output id='O53'>                                                         
        <Column id='C18' tableId='T1' colIndex='1'>                             
          CAT.RANGE.DIM1.DIMDATA                                                
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 65 row(s) selected.
>>
>>-- JP + resid
>>select fday, dimdata
+>from fact f, dim1 d
+>where f.dimkey=d.dkey and f.dimkey=fday+fmonth
+>order by 1,2;

Query Descriptor
-----------------------------------------------------------------------------------

<Query>                                                                            
  <Version>                                                                        
    1.0                                                                            
  </Version>                                                                       
  <Misc rewriteLevel='3'>                                                          
  </Misc>                                                                          
  <JBB id='B0'>                                                                    
    <Hub>                                                                          
      <JBBCList>                                                                   
        <Table id='T1' TS='212223874079579197' numCols='2' residualBits='00000008'>
          CAT.RANGE.DIM1                                                           
          <Key>                                                                    
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>             
              CAT.RANGE.DIM1.DKEY                                                  
            </Column>                                                              
          </Key>                                                                   
        </Table>                                                                   
        <Table id='T2' TS='212223874079579197' numCols='8' residualBits='00000016'>
          CAT.RANGE.FACT                                                           
          <Key>                                                                    
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>              
              CAT.RANGE.FACT.SYSKEY                                                
            </Column>                                                              
          </Key>                                                                   
        </Table>                                                                   
      </JBBCList>                                                                  
      <JoinPredList>                                                               
        <JoinPred id='J47'>                                                        
          <Column ref='C17'>                                                       
          </Column>                                                                
          <Column id='C8' tableId='T2' colIndex='7'>                               
            CAT.RANGE.FACT.DIMKEY                                                  
          </Column>                                                                
        </JoinPred>                                                                
      </JoinPredList>                                                              
      <ResidualPredList>                                                           
        <Residual id='D65'>                                                        
          <BinaryOper id='S65' op='='>                                             
            <BinaryOper id='S23' op='+'>                                           
              <Column ref='C2'>                                                    
              </Column>                                                            
              <Column id='C3' tableId='T2' colIndex='2'>                           
                CAT.RANGE.FACT.FMONTH                                              
              </Column>                                                            
            </BinaryOper>                                                          
            <Column ref='C8'>                                                      
            </Column>                                                              
          </BinaryOper>                                                            
        </Residual>                                                                
      </ResidualPredList>                                                          
    </Hub>                                                                         
    <ExtraHub>                                                                     
    </ExtraHub>                                                                    
    <OutputList>                                                                   
      <Output id='O29'>                                                            
        <Column id='C2' tableId='T2' colIndex='1'>                                 
          CAT.RANGE.FACT.FDAY                                                      
        </Column>                                                                  
      </Output>                                                                    
      <Output id='O53'>                                                            
        <Column id='C18' tableId='T1' colIndex='1'>                                
          CAT.RANGE.DIM1.DIMDATA                                                   
        </Column>                                                                  
      </Output>                                                                    
    </OutputList>                                                                  
  </JBB>                                                                           
</Query>                                                                           

--- 67 row(s) selected.
>>
>>-- JP + const + resid
>>select fday, dimdata
+>from fact f, dim1 d
+>where 10=fday+fmonth and f.dimkey=d.dkey and d.dkey=10
+>order by 1,2;

Query Descriptor
--------------------------------------------------------------------------------------------------------

<Query>                                                                                                 
  <Version>                                                                                             
    1.0                                                                                                 
  </Version>                                                                                            
  <Misc rewriteLevel='3'>                                                                               
  </Misc>                                                                                               
  <JBB id='B0'>                                                                                         
    <Hub>                                                                                               
      <JBBCList>                                                                                        
        <Table id='T1' TS='212223874079579197' numCols='2' rangeBits='00000008'>                        
          CAT.RANGE.DIM1                                                                                
          <Key>                                                                                         
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>                                  
              CAT.RANGE.DIM1.DKEY                                                                       
            </Column>                                                                                   
          </Key>                                                                                        
        </Table>                                                                                        
        <Table id='T2' TS='212223874079579197' numCols='8' rangeBits='00000010' residualBits='00000006'>
          CAT.RANGE.FACT                                                                                
          <Key>                                                                                         
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>                                   
              CAT.RANGE.FACT.SYSKEY                                                                     
            </Column>                                                                                   
          </Key>                                                                                        
        </Table>                                                                                        
      </JBBCList>                                                                                       
      <JoinPredList>                                                                                    
        <JoinPred id='J49'>                                                                             
          <Column ref='C17'>                                                                            
          </Column>                                                                                     
          <Column id='C8' tableId='T2' colIndex='7'>                                                    
            CAT.RANGE.FACT.DIMKEY                                                                       
          </Column>                                                                                     
        </JoinPred>                                                                                     
      </JoinPredList>                                                                                   
      <RangePredList>                                                                                   
        <Range id='R50' sqlType='INTEGER SIGNED NO NULLS'>                                              
          <Column ref='C8'>                                                                             
          </Column>                                                                                     
          <OpEQ>                                                                                        
            <NumericVal scale='0'>                                                                      
              10                                                                                        
            </NumericVal>                                                                               
          </OpEQ>                                                                                       
        </Range>                                                                                        
      </RangePredList>                                                                                  
      <ResidualPredList>                                                                                
        <Residual id='D69'>                                                                             
          <BinaryOper id='S69' op='='>                                                                  
            <BinaryOper id='S23' op='+'>                                                                
              <Column ref='C2'>                                                                         
              </Column>                                                                                 
              <Column id='C3' tableId='T2' colIndex='2'>                                                
                CAT.RANGE.FACT.FMONTH                                                                   
              </Column>                                                                                 
            </BinaryOper>                                                                               
            <NumericVal id='S22' scale='0'>                                                             
              10                                                                                        
            </NumericVal>                                                                               
          </BinaryOper>                                                                                 
        </Residual>                                                                                     
      </ResidualPredList>                                                                               
    </Hub>                                                                                              
    <ExtraHub>                                                                                          
    </ExtraHub>                                                                                         
    <OutputList>                                                                                        
      <Output id='O31'>                                                                                 
        <Column id='C2' tableId='T2' colIndex='1'>                                                      
          CAT.RANGE.FACT.FDAY                                                                           
        </Column>                                                                                       
      </Output>                                                                                         
      <Output id='O55'>                                                                                 
        <Column id='C18' tableId='T1' colIndex='1'>                                                     
          CAT.RANGE.DIM1.DIMDATA                                                                        
        </Column>                                                                                       
      </Output>                                                                                         
    </OutputList>                                                                                       
  </JBB>                                                                                                
</Query>                                                                                                

--- 79 row(s) selected.
>>
>>-- JP + const + multinode
>>select fday, dimdata
+>from fact f, dim1 d
+>where f.dimkey=d.dkey and f.dimkey=10 and 10=f.fitem+d.dimdata
+>order by 1,2;

Query Descriptor
--------------------------------------------------------------------------------------------------------

<Query>                                                                                                 
  <Version>                                                                                             
    1.0                                                                                                 
  </Version>                                                                                            
  <Misc rewriteLevel='3'>                                                                               
  </Misc>                                                                                               
  <JBB id='B0'>                                                                                         
    <Hub>                                                                                               
      <JBBCList>                                                                                        
        <Table id='T1' TS='212223874079579197' numCols='2' rangeBits='00000008' residualBits='00000004'>
          CAT.RANGE.DIM1                                                                                
          <Key>                                                                                         
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>                                  
              CAT.RANGE.DIM1.DKEY                                                                       
            </Column>                                                                                   
          </Key>                                                                                        
        </Table>                                                                                        
        <Table id='T2' TS='212223874079579197' numCols='8' rangeBits='00000010' residualBits='00000080'>
          CAT.RANGE.FACT                                                                                
          <Key>                                                                                         
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>                                   
              CAT.RANGE.FACT.SYSKEY                                                                     
            </Column>                                                                                   
          </Key>                                                                                        
        </Table>                                                                                        
      </JBBCList>                                                                                       
      <JoinPredList>                                                                                    
        <JoinPred id='J49'>                                                                             
          <Column ref='C17'>                                                                            
          </Column>                                                                                     
          <Column id='C8' tableId='T2' colIndex='7'>                                                    
            CAT.RANGE.FACT.DIMKEY                                                                       
          </Column>                                                                                     
        </JoinPred>                                                                                     
      </JoinPredList>                                                                                   
      <RangePredList>                                                                                   
        <Range id='R50' sqlType='INTEGER SIGNED NO NULLS'>                                              
          <Column ref='C8'>                                                                             
          </Column>                                                                                     
          <OpEQ>                                                                                        
            <NumericVal scale='0'>                                                                      
              10                                                                                        
            </NumericVal>                                                                               
          </OpEQ>                                                                                       
        </Range>                                                                                        
      </RangePredList>                                                                                  
      <ResidualPredList>                                                                                
        <Residual id='D68'>                                                                             
          <BinaryOper id='S68' op='='>                                                                  
            <BinaryOper id='S25' op='+'>                                                                
              <Column id='C5' tableId='T2' colIndex='4'>                                                
                CAT.RANGE.FACT.FITEM                                                                    
              </Column>                                                                                 
              <Column ref='C18'>                                                                        
              </Column>                                                                                 
            </BinaryOper>                                                                               
            <NumericVal id='S23' scale='0'>                                                             
              10                                                                                        
            </NumericVal>                                                                               
          </BinaryOper>                                                                                 
        </Residual>                                                                                     
      </ResidualPredList>                                                                               
    </Hub>                                                                                              
    <ExtraHub>                                                                                          
    </ExtraHub>                                                                                         
    <OutputList>                                                                                        
      <Output id='O31'>                                                                                 
        <Column id='C2' tableId='T2' colIndex='1'>                                                      
          CAT.RANGE.FACT.FDAY                                                                           
        </Column>                                                                                       
      </Output>                                                                                         
      <Output id='O55'>                                                                                 
        <Column id='C18' tableId='T1' colIndex='1'>                                                     
          CAT.RANGE.DIM1.DIMDATA                                                                        
        </Column>                                                                                       
      </Output>                                                                                         
    </OutputList>                                                                                       
  </JBB>                                                                                                
</Query>                                                                                                

--- 79 row(s) selected.
>>
>>-- 3 multi-node expns
>>select fday, dimdata
+>from fact f, dim1 d
+>where fitem+dkey=fquant+dimdata and fmonth+dimdata=fitem+dkey
+>order by 1,2;

Query Descriptor
-----------------------------------------------------------------------------------

<Query>                                                                            
  <Version>                                                                        
    1.0                                                                            
  </Version>                                                                       
  <Misc rewriteLevel='3'>                                                          
  </Misc>                                                                          
  <JBB id='B0'>                                                                    
    <Hub>                                                                          
      <JBBCList>                                                                   
        <Table id='T1' TS='212223874079579197' numCols='2' residualBits='0000000C'>
          CAT.RANGE.DIM1                                                           
          <Key>                                                                    
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>             
              CAT.RANGE.DIM1.DKEY                                                  
            </Column>                                                              
          </Key>                                                                   
        </Table>                                                                   
        <Table id='T2' TS='212223874079579197' numCols='8' residualBits='000000C2'>
          CAT.RANGE.FACT                                                           
          <Key>                                                                    
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>              
              CAT.RANGE.FACT.SYSKEY                                                
            </Column>                                                              
          </Key>                                                                   
        </Table>                                                                   
      </JBBCList>                                                                  
      <ResidualPredList>                                                           
        <Residual id='D68'>                                                        
          <BinaryOper id='S68' op='='>                                             
            <BinaryOper id='S22' op='+'>                                           
              <Column id='C5' tableId='T2' colIndex='4'>                           
                CAT.RANGE.FACT.FITEM                                               
              </Column>                                                            
              <Column ref='C17'>                                                   
              </Column>                                                            
            </BinaryOper>                                                          
            <BinaryOper id='S23' op='+'>                                           
              <Column id='C6' tableId='T2' colIndex='5'>                           
                CAT.RANGE.FACT.FQUANT                                              
              </Column>                                                            
              <Column ref='C18'>                                                   
              </Column>                                                            
            </BinaryOper>                                                          
          </BinaryOper>                                                            
        </Residual>                                                                
        <Residual id='D69'>                                                        
          <BinaryOper id='S69' op='='>                                             
            <BinaryOper id='S23' op='+'>                                           
              <Column ref='C6'>                                                    
              </Column>                                                            
              <Column ref='C18'>                                                   
              </Column>                                                            
            </BinaryOper>                                                          
            <BinaryOper id='S25' op='+'>                                           
              <Column id='C3' tableId='T2' colIndex='2'>                           
                CAT.RANGE.FACT.FMONTH                                              
              </Column>                                                            
              <Column ref='C18'>                                                   
              </Column>                                                            
            </BinaryOper>                                                          
          </BinaryOper>                                                            
        </Residual>                                                                
      </ResidualPredList>                                                          
    </Hub>                                                                         
    <ExtraHub>                                                                     
    </ExtraHub>                                                                    
    <OutputList>                                                                   
      <Output id='O32'>                                                            
        <Column id='C2' tableId='T2' colIndex='1'>                                 
          CAT.RANGE.FACT.FDAY                                                      
        </Column>                                                                  
      </Output>                                                                    
      <Output id='O56'>                                                            
        <Column id='C18' tableId='T1' colIndex='1'>                                
          CAT.RANGE.DIM1.DIMDATA                                                   
        </Column>                                                                  
      </Output>                                                                    
    </OutputList>                                                                  
  </JBB>                                                                           
</Query>                                                                           

--- 80 row(s) selected.
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>
>>obey TEST004(test_rangespec_transformation);
>>--===========================================
>>--== Test comparison of endpoint values for string subranges. We disable rewrite
>>--== for this and just compare results with rangespec_transformation on and off.
>>--== The main issue is strings of differing length with the shorter string matching
>>--== the initial portion of the longer ones. We need to make sure we use the
>>--== blank-padding semantics of SQL string comparions. See Solution 10-100707-1629.
>>--==
>>--== Test range that includes all values. See Solution 10-100708-1655.
>>--===========================================
>>
>>control query default MVQR_REWRITE_LEVEL '0';

--- SQL operation complete.
>>
>>create table mvqr_test004_t1( s varchar(10) );

--- SQL operation complete.
>>insert into mvqr_test004_t1 values(' 1s'),('1s'),(convertfromhex('0921')),('');

--- 4 row(s) inserted.
>>select '|' || s || '|' from mvqr_test004_t1;

(EXPR)      
------------

| 1s|       
|1s|        
|	!|        
||          

--- 4 row(s) selected.
>>control query default  rangespec_transformation 'MINIMUM';

--- SQL operation complete.
>>select '|' || s || '|' from mvqr_test004_t1 where s <= ' ';

(EXPR)      
------------

|	!|        
||          

--- 2 row(s) selected.
>>select '|' || s || '|' from mvqr_test004_t1 where s <= '';

(EXPR)      
------------

|	!|        
||          

--- 2 row(s) selected.
>>select '|' || s || '|' from mvqr_test004_t1 where s >= ' ';

(EXPR)      
------------

| 1s|       
|1s|        
||          

--- 3 row(s) selected.
>>select '|' || s || '|' from mvqr_test004_t1 where s >= '';

(EXPR)      
------------

| 1s|       
|1s|        
||          

--- 3 row(s) selected.
>>control query default  rangespec_transformation 'OFF';

--- SQL operation complete.
>>select '|' || s || '|' from mvqr_test004_t1 where s <= ' ';

(EXPR)      
------------

|	!|        
||          

--- 2 row(s) selected.
>>select '|' || s || '|' from mvqr_test004_t1 where s <= '';

(EXPR)      
------------

|	!|        
||          

--- 2 row(s) selected.
>>select '|' || s || '|' from mvqr_test004_t1 where s >= ' ';

(EXPR)      
------------

| 1s|       
|1s|        
||          

--- 3 row(s) selected.
>>select '|' || s || '|' from mvqr_test004_t1 where s >= '';

(EXPR)      
------------

| 1s|       
|1s|        
||          

--- 3 row(s) selected.
>>drop table mvqr_test004_t1;

--- SQL operation complete.
>>
>>create table mvqr_test004_t2(a1 int, x1 char(10));

--- SQL operation complete.
>>insert into mvqr_test004_t2(a1,x1) values(1,x'616208'), (2,'abc'),(3,'ab'),(4,'ab ');

--- 4 row(s) inserted.
>>control query default rangespec_transformation 'MINIMUM';

--- SQL operation complete.
>>select a1 from mvqr_test004_t2 where x1>x'616208' and x1<='ab ';

A1         
-----------

          3
          4

--- 2 row(s) selected.
>>control query default rangespec_transformation 'OFF';

--- SQL operation complete.
>>select a1 from mvqr_test004_t2 where x1>x'616208' and x1<='ab ';

A1         
-----------

          3
          4

--- 2 row(s) selected.
>>
>>-- Using the same table as above, test a range that covers all values (except NULL).
>>-- This duplicates the problem reported by Solution 10-100708-1655.
>>control query default rangespec_transformation 'MINIMUM';

--- SQL operation complete.
>>select a1 from mvqr_test004_t2 where a1 not between 2 and 1;

A1         
-----------

          1
          2
          3
          4

--- 4 row(s) selected.
>>
>>-- Using same table as above test intersection with a range derived from a LIKE
>>-- pred with a trailing wild card. Descriptor should show a range pred for x1='A'.
>>control query default MVQR_REWRITE_LEVEL '3';

--- SQL operation complete.
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>select x1 from mvqr_test004_t2 where x1 in ('A', 'B') and x1 like 'A%' order by x1;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B10000'>                                                             
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874339868634' numCols='3' rangeBits='00000002'>
          CAT.RANGE.MVQR_TEST004_T2                                             
          <Key>                                                                 
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.MVQR_TEST004_T2.SYSKEY                                  
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <RangePredList>                                                           
        <Range id='R53' sqlType='CHAR(10) CHARACTER SET ISO88591 ALLOWS NULLS'> 
          <Column ref='C3'>                                                     
          </Column>                                                             
          <OpEQ>                                                                
            <StringVal><![CDATA[A]]></StringVal>                                
          </OpEQ>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O26'>                                                         
        <Column id='C3' tableId='T1' colIndex='2'>                              
          CAT.RANGE.MVQR_TEST004_T2.X1                                          
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 39 row(s) selected.
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>-- Drop table and restore setting for rangespec cqd.
>>drop table mvqr_test004_t2;

--- SQL operation complete.
>>control query default rangespec_transformation reset;

--- SQL operation complete.
>>
>>
>>obey TEST004(test_mapvid_pushdown);
>>--===========================================
>>--== Test predicate that results in a vegref that includes a constant being placed
>>--== in the bottom values of the mapvids node above the MV scan node. When we 
>>--== call pushdownCoveredExpressions, this vegref will be removed as a covered
>>--== expression. We have to restore the original map to prevent a fault in the
>>--== Generator.
>>--==
>>--== See Solution 10-100707-1647.
>>--===========================================
>>create table t1(a1 int not null not droppable primary key);

--- SQL operation complete.
>>create table t2(a2 int not null not droppable primary key);

--- SQL operation complete.
>>insert into t1(a1) values(1),(2),(3),(4),(5),(6),(7),(8),(9);

--- 9 row(s) inserted.
>>insert into t2(a2) values(1),(2),(3),(4),(5),(6),(7),(8),(9);

--- 9 row(s) inserted.
>>create mv RANGE_MV_MAPVID_PUSHDOWN refresh on request initialized on create as 
+>  select a1,a2 
+>  from t1,t2 
+>  where a1=a2 
+>    and a1>5;

--- SQL operation complete.
>>set pattern $$MVName$$ RANGE_MV_MAPVID_PUSHDOWN;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.RANGE_MV_MAPVID_PUSHDOWN
  </Table>
  <Misc isIncremental='1'>
  </Misc>
  <JBB id='B0'>
    <Hub>
      <JBBCList>
        <Table id='T2' TS='212223874340665719' isKeyCovered='1' numCols='1' rangeBits='00000008'>
          CAT.RANGE.T1
        </Table>
        <Table id='T1' TS='212223874340837639' isKeyCovered='1' numCols='1' rangeBits='00000008'>
          CAT.RANGE.T2
        </Table>
      </JBBCList>
      <JoinPredList>
        <JoinPred id='J92'>
          <Column ref='C82'>
          </Column>
          <Column id='C85' tableId='T1' colIndex='0' isNullable='0'>
            CAT.RANGE.T2.A2
          </Column>
        </JoinPred>
      </JoinPredList>
      <RangePredList>
        <Range id='R115' sqlType='INTEGER SIGNED NO NULLS'>
          <Column ref='C82'>
          </Column>
          <OpGE isNormalized='1'>
            <NumericVal scale='0'>
              6
            </NumericVal>
          </OpGE>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O92' name='A1'>
        <Column id='C82' tableId='T2' colIndex='0' isNullable='0'>
          CAT.RANGE.T1.A1
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>cqd mvqr_rewrite_candidates 'CAT.RANGE.RANGE_MV_MAPVID_PUSHDOWN';

--- SQL operation complete.
>>
>>-- The following where clause resolves the two betweens to the constant 6.
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>prepare QueryStmt from 
+>  select a1,a2 
+>  from t1,t2 
+>  where a1=a2 
+>    and a1 between 0 and 6 
+>    and a1 between 6 and 10
+>  order by a1;

--- SQL command prepared.
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>set pattern $$QueryName$$ RANGE_MAPVID_PUSHDOWN;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B0'>                                                                 
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T2' TS='212223874341556577' numCols='1' rangeBits='00000008'>
          CAT.RANGE.T1                                                          
          <Key>                                                                 
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>           
              CAT.RANGE.T1.A1                                                   
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
        <Table id='T1' TS='212223874341556577' numCols='1' rangeBits='00000008'>
          CAT.RANGE.T2                                                          
          <Key>                                                                 
            <Column id='C4' tableId='T1' colIndex='0' isNullable='0'>           
              CAT.RANGE.T2.A2                                                   
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <JoinPredList>                                                            
        <JoinPred id='J14'>                                                     
          <Column ref='C1'>                                                     
          </Column>                                                             
          <Column ref='C4'>                                                     
          </Column>                                                             
        </JoinPred>                                                             
      </JoinPredList>                                                           
      <RangePredList>                                                           
        <Range id='R15' sqlType='INTEGER SIGNED NO NULLS'>                      
          <Column ref='C1'>                                                     
          </Column>                                                             
          <OpEQ>                                                                
            <NumericVal scale='0'>                                              
              6                                                                 
            </NumericVal>                                                       
          </OpEQ>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O14'>                                                         
        <Column ref='C1'>                                                       
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 56 row(s) selected.
>>
>>
>>sh echo INITIALIZE >> range_mapvid.in;
>>sh echo PUBLISH RANGE_MV_MAPVID_PUSHDOWN.xml  >> range_mapvid.in;
>>sh echo MATCH RANGE_MAPVID_PUSHDOWN.xml >> range_mapvid.in;
>>
>>sh sh -c "$QMS range_mapvid.in range_mapvid.out";
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B0'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T2'>
          CAT.RANGE.T1
        </Table>
        <Table ref='T1'>
          CAT.RANGE.T2
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_MV_MAPVID_PUSHDOWN
          </MVName>
          <RangePredList>
            <Range ref='R15' result='NotProvided'>
              <MVColumn ref='C1'>
                A1
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O14' result='Provided'>
              <MVColumn ref='C1'>
                A1
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
  </JbbResult>
</Result>
>>
>>-- Now check the plan
>>prepare QueryStmt from 
+>  select a1,a2 
+>  from t1,t2 
+>  where a1=a2 
+>    and a1 between 0 and 6 
+>    and a1 between 6 and 10;

--- SQL command prepared.
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.RANGE_MV_MAPVID_PUSHDOWN                          

--- 1 row(s) selected.
>>execute QueryStmt;

A1           A2         
-----------  -----------

          6            6

--- 1 row(s) selected.
>>drop mv RANGE_MV_MAPVID_PUSHDOWN cascade;

--- SQL operation complete.
>>drop table t1 cascade;

--- SQL operation complete.
>>drop table t2 cascade;

--- SQL operation complete.
>>
>>
>>obey TEST004(test_end_key);
>>--===========================================
>>--== Test redundant predicates that result in an incorrect end key value being
>>--== without the duplicate elimination done by rangespec. Without rangespec, this
>>--== resulted in an executor predicate corresponding to the Between predicate,
>>--== a begin key having the starting value, and an end key of <MAX>. The performance
>>--== was very bad. The fix was to add rangespec support for date type, which
>>--== eliminated the executor predicate and restored the correct end key.
>>--==
>>--== See Solution 10-101122-4639.
>>--===========================================
>>create table t4639dt
+>(
+>  dt date not null not droppable primary key,
+>  i int
+>);

--- SQL operation complete.
>>
>>cqd rangespec_transformation 'MINIMUM';

--- SQL operation complete.
>>prepare s from
+>  SELECT COUNT (*)
+>  FROM t4639dt
+>  WHERE dt between date'2009-11-01' AND date'2009-11-30'
+>    AND dt >= date'2007-11-01';

--- SQL command prepared.
>>
>>select case when position('begin_key: (DT = 2009-11-01) end_key: (DT = 2009-11-30)' in description) > 0 and
+>                 position('executor_predicate' in description) = 0
+>            then 'pass'
+>            else 'fail'
+>       end
+>from table(explain(NULL, 'S'))
+>where tname = 'CAT.RANGE.T4639DT';

(EXPR)
------

pass  

--- 1 row(s) selected.
>>
>>cqd rangespec_transformation RESET;

--- SQL operation complete.
>>
>>
>>obey TEST004(test_interval_lp);
>>--===========================================
>>--== Test limits of leading precision for interval types. Since we represent
>>--== interval values in terms of the lowest field (either months or microseconds)
>>--== possible for the particular type, the leading field precision may be
>>--== diminished even for specific interval types that don't extend to those end
>>--== fields. In cases where this leading precision is exceeded, a range predicate
>>--== involving the type results in a residual predicate in the descriptor.
>>--== See QC bug 4299.
>>--===========================================
>>create table tIntvlLp
+>(
+>  i        int not null not droppable primary key,
+>  year16   interval year(16),     -- range
+>  year17   interval year(17),     -- residual
+>  month18  interval month(18),    -- range; minimal unit allows full max leading precision
+>  day7     interval day(7),       -- range
+>  day8     interval day(8),       -- residual
+>  hour8    interval hour(8),      -- range
+>  hour9    interval hour(9),      -- residual
+>  minute10 interval minute(10),   -- range
+>  minute11 interval minute(11),   -- residual
+>  second12 interval second(12,0), -- range
+>  second13 interval second(13,0)  -- residual; need 6 digits for microseconds
+>);

--- SQL operation complete.
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>prepare QueryStmt from
+>select i from tIntvlLp
+>where year16 > interval'123456'year(16)
+>  and year17 > interval'123456'year(17)
+>  and month18 > interval'123456'month(18)
+>  and day7 > interval'1234'day(7)
+>  and day8 > interval'1234'day(8)
+>  and hour8 > interval'1234'hour(8)
+>  and hour9 > interval'1234'hour(9)
+>  and minute10 > interval'1234'minute(10)
+>  and minute11 > interval'1234'minute(11)
+>  and second12 > interval'1234'second(12,0)
+>  and second13 > interval'1234'second(13,0)
+>order by 1;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ INTERVAL_LP;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
---------------------------------------------------------------------------------------------------------

<Query>                                                                                                  
  <Version>                                                                                              
    1.0                                                                                                  
  </Version>                                                                                             
  <Misc rewriteLevel='3'>                                                                                
  </Misc>                                                                                                
  <JBB id='B10000'>                                                                                      
    <Hub>                                                                                                
      <JBBCList>                                                                                         
        <Table id='T1' TS='212223874350387019' numCols='12' rangeBits='00000AA5' residualBits='00000552'>
          CAT.RANGE.TINTVLLP                                                                             
          <Key>                                                                                          
            <Column id='C1' tableId='T1' colIndex='0' isNullable='0'>                                    
              CAT.RANGE.TINTVLLP.I                                                                       
            </Column>                                                                                    
          </Key>                                                                                         
        </Table>                                                                                         
      </JBBCList>                                                                                        
      <RangePredList>                                                                                    
        <Range id='R117' sqlType='INTERVAL YEAR(16) ALLOWS NULLS'>                                       
          <Column id='C2' tableId='T1' colIndex='1'>                                                     
            CAT.RANGE.TINTVLLP.YEAR16                                                                    
          </Column>                                                                                      
          <OpGE isNormalized='1'>                                                                        
            <NumericVal scale='0'>                                                                       
              1481484                                                                                    
            </NumericVal>                                                                                
          </OpGE>                                                                                        
        </Range>                                                                                         
        <Range id='R118' sqlType='INTERVAL MONTH(18) ALLOWS NULLS'>                                      
          <Column id='C4' tableId='T1' colIndex='3'>                                                     
            CAT.RANGE.TINTVLLP.MONTH18                                                                   
          </Column>                                                                                      
          <OpGE isNormalized='1'>                                                                        
            <NumericVal scale='0'>                                                                       
              123457                                                                                     
            </NumericVal>                                                                                
          </OpGE>                                                                                        
        </Range>                                                                                         
        <Range id='R119' sqlType='INTERVAL DAY(7) ALLOWS NULLS'>                                         
          <Column id='C5' tableId='T1' colIndex='4'>                                                     
            CAT.RANGE.TINTVLLP.DAY7                                                                      
          </Column>                                                                                      
          <OpGE isNormalized='1'>                                                                        
            <NumericVal scale='0'>                                                                       
              106704000000000                                                                            
            </NumericVal>                                                                                
          </OpGE>                                                                                        
        </Range>                                                                                         
        <Range id='R120' sqlType='INTERVAL HOUR(8) ALLOWS NULLS'>                                        
          <Column id='C7' tableId='T1' colIndex='6'>                                                     
            CAT.RANGE.TINTVLLP.HOUR8                                                                     
          </Column>                                                                                      
          <OpGE isNormalized='1'>                                                                        
            <NumericVal scale='0'>                                                                       
              4446000000000                                                                              
            </NumericVal>                                                                                
          </OpGE>                                                                                        
        </Range>                                                                                         
        <Range id='R121' sqlType='INTERVAL MINUTE(10) ALLOWS NULLS'>                                     
          <Column id='C9' tableId='T1' colIndex='8'>                                                     
            CAT.RANGE.TINTVLLP.MINUTE10                                                                  
          </Column>                                                                                      
          <OpGE isNormalized='1'>                                                                        
            <NumericVal scale='0'>                                                                       
              74100000000                                                                                
            </NumericVal>                                                                                
          </OpGE>                                                                                        
        </Range>                                                                                         
        <Range id='R122' sqlType='INTERVAL SECOND(12,0) ALLOWS NULLS'>                                   
          <Column id='C11' tableId='T1' colIndex='10'>                                                   
            CAT.RANGE.TINTVLLP.SECOND12                                                                  
          </Column>                                                                                      
          <OpGE isNormalized='1'>                                                                        
            <NumericVal scale='0'>                                                                       
              1235000000                                                                                 
            </NumericVal>                                                                                
          </OpGE>                                                                                        
        </Range>                                                                                         
      </RangePredList>                                                                                   
      <ResidualPredList>                                                                                 
        <Residual id='D29'>                                                                              
          <BinaryOper id='S29' op='>'>                                                                   
            <Column id='C3' tableId='T1' colIndex='2'>                                                   
              CAT.RANGE.TINTVLLP.YEAR17                                                                  
            </Column>                                                                                    
            <NumericVal id='S28' scale='0'>                                                              
              INTERVAL '123456' YEAR(17)                                                                 
            </NumericVal>                                                                                
          </BinaryOper>                                                                                  
        </Residual>                                                                                      
        <Residual id='D35'>                                                                              
          <BinaryOper id='S35' op='>'>                                                                   
            <Column id='C6' tableId='T1' colIndex='5'>                                                   
              CAT.RANGE.TINTVLLP.DAY8                                                                    
            </Column>                                                                                    
            <NumericVal id='S34' scale='0'>                                                              
              INTERVAL '1234' DAY(8)                                                                     
            </NumericVal>                                                                                
          </BinaryOper>                                                                                  
        </Residual>                                                                                      
        <Residual id='D39'>                                                                              
          <BinaryOper id='S39' op='>'>                                                                   
            <Column id='C8' tableId='T1' colIndex='7'>                                                   
              CAT.RANGE.TINTVLLP.HOUR9                                                                   
            </Column>                                                                                    
            <NumericVal id='S38' scale='0'>                                                              
              INTERVAL '1234' HOUR(9)                                                                    
            </NumericVal>                                                                                
          </BinaryOper>                                                                                  
        </Residual>                                                                                      
        <Residual id='D43'>                                                                              
          <BinaryOper id='S43' op='>'>                                                                   
            <Column id='C10' tableId='T1' colIndex='9'>                                                  
              CAT.RANGE.TINTVLLP.MINUTE11                                                                
            </Column>                                                                                    
            <NumericVal id='S42' scale='0'>                                                              
              INTERVAL '1234' MINUTE(11)                                                                 
            </NumericVal>                                                                                
          </BinaryOper>                                                                                  
        </Residual>                                                                                      
        <Residual id='D47'>                                                                              
          <BinaryOper id='S47' op='>'>                                                                   
            <Column id='C12' tableId='T1' colIndex='11'>                                                 
              CAT.RANGE.TINTVLLP.SECOND13                                                                
            </Column>                                                                                    
            <NumericVal id='S46' scale='0'>                                                              
              INTERVAL '1234' SECOND(13,0)                                                               
            </NumericVal>                                                                                
          </BinaryOper>                                                                                  
        </Residual>                                                                                      
      </ResidualPredList>                                                                                
    </Hub>                                                                                               
    <ExtraHub>                                                                                           
    </ExtraHub>                                                                                          
    <OutputList>                                                                                         
      <Output id='O49'>                                                                                  
        <Column ref='C1'>                                                                                
        </Column>                                                                                        
      </Output>                                                                                          
    </OutputList>                                                                                        
  </JBB>                                                                                                 
</Query>                                                                                                 

--- 143 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>
>>-- comp_int_22 test uses too much memory for NT
>>#ifLINUX
>>obey TEST004(comp_int_22);
>>#ifLINUX
>>obey TEST004(check_nulls);
>>--===========================================
>>--== Check if IS NULL and IS NOT NULL are represented correctly in the descriptors.
>>--===========================================
>>
>>-- Simple IS NULL predicate
>>create mv range_nulls_isnull
+>	recompute
+>	initialized on create
+>	as  select fprice, fquant, 
+>		   dimdata data
+>	    from fact, dim2
+>	    where dimkey=dkey
+>	      and dimdata IS NULL;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ RANGE_NULLS_ISNULL;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.RANGE_NULLS_ISNULL
  </Table>
  <Misc isIncremental='0'>
  </Misc>
  <JBB id='B0'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874076438833' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM2
        </Table>
        <Table id='T2' TS='212223874079579197' numCols='8'>
          CAT.RANGE.FACT
        </Table>
      </JBBCList>
      <JoinPredList>
        <JoinPred id='J129'>
          <Column id='C100' tableId='T1' colIndex='0' isNullable='0'>
            CAT.RANGE.DIM2.DKEY
          </Column>
          <Column id='C91' tableId='T2' colIndex='7'>
            CAT.RANGE.FACT.DIMKEY
          </Column>
        </JoinPred>
      </JoinPredList>
      <RangePredList>
        <Range id='R143' sqlType='INTEGER SIGNED ALLOWS NULLS'>
          <Column ref='C101'>
          </Column>
          <OpEQ>
            <NullVal/>
          </OpEQ>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O123' name='FQUANT'>
        <Column id='C89' tableId='T2' colIndex='5'>
          CAT.RANGE.FACT.FQUANT
        </Column>
      </Output>
      <Output id='O126' name='FPRICE'>
        <Column id='C90' tableId='T2' colIndex='6'>
          CAT.RANGE.FACT.FPRICE
        </Column>
      </Output>
      <Output id='O135' name='DATA'>
        <Column id='C101' tableId='T1' colIndex='1'>
          CAT.RANGE.DIM2.DIMDATA
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- IS NULL or EQUAL (same subrange)
>>create mv range_nulls_isnullorequal
+>	recompute
+>	initialized on create
+>	as  select fprice, fquant, 
+>		   dimdata data
+>	    from fact, dim2
+>	    where dimkey=dkey
+>	      and (dimdata IS NULL or dimdata=10);

--- SQL operation complete.
>>
>>set pattern $$MVName$$ RANGE_NULLS_ISNULLOREQUAL;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.RANGE_NULLS_ISNULLOREQUAL
  </Table>
  <Misc isIncremental='0'>
  </Misc>
  <JBB id='B0'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874076438833' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM2
        </Table>
        <Table id='T2' TS='212223874079579197' numCols='8'>
          CAT.RANGE.FACT
        </Table>
      </JBBCList>
      <JoinPredList>
        <JoinPred id='J143'>
          <Column id='C111' tableId='T1' colIndex='0' isNullable='0'>
            CAT.RANGE.DIM2.DKEY
          </Column>
          <Column id='C102' tableId='T2' colIndex='7'>
            CAT.RANGE.FACT.DIMKEY
          </Column>
        </JoinPred>
      </JoinPredList>
      <RangePredList>
        <Range id='R164' sqlType='INTEGER SIGNED ALLOWS NULLS'>
          <Column ref='C112'>
          </Column>
          <OpEQ>
            <NullVal/>
            <NumericVal scale='0'>
              10
            </NumericVal>
          </OpEQ>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O137' name='FQUANT'>
        <Column id='C100' tableId='T2' colIndex='5'>
          CAT.RANGE.FACT.FQUANT
        </Column>
      </Output>
      <Output id='O140' name='FPRICE'>
        <Column id='C101' tableId='T2' colIndex='6'>
          CAT.RANGE.FACT.FPRICE
        </Column>
      </Output>
      <Output id='O149' name='DATA'>
        <Column id='C112' tableId='T1' colIndex='1'>
          CAT.RANGE.DIM2.DIMDATA
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- IS NULL or LESS (different subrange)
>>create mv range_nulls_isnullorless
+>	recompute
+>	initialized on create
+>	as  select fprice, fquant, 
+>		   dimdata data
+>	    from fact, dim2
+>	    where dimkey=dkey
+>	      and (dimdata IS NULL or dimdata<10);

--- SQL operation complete.
>>
>>set pattern $$MVName$$ RANGE_NULLS_ISNULLORLESS;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.RANGE_NULLS_ISNULLORLESS
  </Table>
  <Misc isIncremental='0'>
  </Misc>
  <JBB id='B0'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874076438833' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM2
        </Table>
        <Table id='T2' TS='212223874079579197' numCols='8'>
          CAT.RANGE.FACT
        </Table>
      </JBBCList>
      <JoinPredList>
        <JoinPred id='J142'>
          <Column id='C110' tableId='T1' colIndex='0' isNullable='0'>
            CAT.RANGE.DIM2.DKEY
          </Column>
          <Column id='C101' tableId='T2' colIndex='7'>
            CAT.RANGE.FACT.DIMKEY
          </Column>
        </JoinPred>
      </JoinPredList>
      <RangePredList>
        <Range id='R163' sqlType='INTEGER SIGNED ALLOWS NULLS'>
          <Column ref='C111'>
          </Column>
          <OpLE isNormalized='1'>
            <NumericVal scale='0'>
              9
            </NumericVal>
          </OpLE>
          <OpEQ>
            <NullVal/>
          </OpEQ>
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O136' name='FQUANT'>
        <Column id='C99' tableId='T2' colIndex='5'>
          CAT.RANGE.FACT.FQUANT
        </Column>
      </Output>
      <Output id='O139' name='FPRICE'>
        <Column id='C100' tableId='T2' colIndex='6'>
          CAT.RANGE.FACT.FPRICE
        </Column>
      </Output>
      <Output id='O148' name='DATA'>
        <Column id='C111' tableId='T1' colIndex='1'>
          CAT.RANGE.DIM2.DIMDATA
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- Simple IS NOT NULL
>>create mv range_nulls_isnotnull
+>	recompute
+>	initialized on create
+>	as  select fprice, fquant, 
+>		   dimdata data
+>	    from fact, dim2
+>	    where dimkey=dkey
+>	      and dimdata IS NOT NULL;

--- SQL operation complete.
>>
>>set pattern $$MVName$$ RANGE_NULLS_ISNOTNULL;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.RANGE_NULLS_ISNOTNULL
  </Table>
  <Misc isIncremental='0'>
  </Misc>
  <JBB id='B0'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874076438833' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM2
        </Table>
        <Table id='T2' TS='212223874079579197' numCols='8'>
          CAT.RANGE.FACT
        </Table>
      </JBBCList>
      <JoinPredList>
        <JoinPred id='J129'>
          <Column id='C100' tableId='T1' colIndex='0' isNullable='0'>
            CAT.RANGE.DIM2.DKEY
          </Column>
          <Column id='C91' tableId='T2' colIndex='7'>
            CAT.RANGE.FACT.DIMKEY
          </Column>
        </JoinPred>
      </JoinPredList>
      <RangePredList>
        <Range id='R143' sqlType='INTEGER SIGNED ALLOWS NULLS'>
          <Column ref='C101'>
          </Column>
          <!-- empty Range element indicates IS NOT NULL -->
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O123' name='FQUANT'>
        <Column id='C89' tableId='T2' colIndex='5'>
          CAT.RANGE.FACT.FQUANT
        </Column>
      </Output>
      <Output id='O126' name='FPRICE'>
        <Column id='C90' tableId='T2' colIndex='6'>
          CAT.RANGE.FACT.FPRICE
        </Column>
      </Output>
      <Output id='O135' name='DATA'>
        <Column id='C101' tableId='T1' colIndex='1'>
          CAT.RANGE.DIM2.DIMDATA
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- IS NOT NULL or EQUAL (equivalent to only IS NOT NULL)
>>create mv range_nulls_isnotnullorequal
+>	recompute
+>	initialized on create
+>	as  select fprice, fquant, 
+>		   dimdata data
+>	    from fact, dim2
+>	    where dimkey=dkey
+>	      and (dimdata IS NOT NULL or dimdata=10);

--- SQL operation complete.
>>
>>set pattern $$MVName$$ RANGE_NULLS_ISNOTNULLOREQUAL;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.RANGE_NULLS_ISNOTNULLOREQUAL
  </Table>
  <Misc isIncremental='0'>
  </Misc>
  <JBB id='B0'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874076438833' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM2
        </Table>
        <Table id='T2' TS='212223874079579197' numCols='8'>
          CAT.RANGE.FACT
        </Table>
      </JBBCList>
      <JoinPredList>
        <JoinPred id='J139'>
          <Column id='C107' tableId='T1' colIndex='0' isNullable='0'>
            CAT.RANGE.DIM2.DKEY
          </Column>
          <Column id='C98' tableId='T2' colIndex='7'>
            CAT.RANGE.FACT.DIMKEY
          </Column>
        </JoinPred>
      </JoinPredList>
      <RangePredList>
        <Range id='R157' sqlType='INTEGER SIGNED ALLOWS NULLS'>
          <Column ref='C108'>
          </Column>
          <!-- empty Range element indicates IS NOT NULL -->
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O133' name='FQUANT'>
        <Column id='C96' tableId='T2' colIndex='5'>
          CAT.RANGE.FACT.FQUANT
        </Column>
      </Output>
      <Output id='O136' name='FPRICE'>
        <Column id='C97' tableId='T2' colIndex='6'>
          CAT.RANGE.FACT.FPRICE
        </Column>
      </Output>
      <Output id='O145' name='DATA'>
        <Column id='C108' tableId='T1' colIndex='1'>
          CAT.RANGE.DIM2.DIMDATA
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>-- IS NOT NULL or LESS (equivalent to only IS NOT NULL)
>>create mv range_nulls_isnotnullorless
+>	recompute
+>	initialized on create
+>	as  select fprice, fquant, 
+>		   dimdata data
+>	    from fact, dim2
+>	    where dimkey=dkey
+>	      and (dimdata IS NOT NULL or dimdata<10);

--- SQL operation complete.
>>
>>set pattern $$MVName$$ RANGE_NULLS_ISNOTNULLORLESS;
>>obey TEST004(dump_MV);
>>--===========================================
>>--== Create the MV descriptor XML
>>--===========================================
>>
>>log $$MVName$$.tmp clear;
<Publish TS='0'>
<MV>
  <Version>
    1.0
  </Version>
  <Table>
    CAT.RANGE.RANGE_NULLS_ISNOTNULLORLESS
  </Table>
  <Misc isIncremental='0'>
  </Misc>
  <JBB id='B0'>
    <Hub>
      <JBBCList>
        <Table id='T1' TS='212223874076438833' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM2
        </Table>
        <Table id='T2' TS='212223874079579197' numCols='8'>
          CAT.RANGE.FACT
        </Table>
      </JBBCList>
      <JoinPredList>
        <JoinPred id='J139'>
          <Column id='C107' tableId='T1' colIndex='0' isNullable='0'>
            CAT.RANGE.DIM2.DKEY
          </Column>
          <Column id='C98' tableId='T2' colIndex='7'>
            CAT.RANGE.FACT.DIMKEY
          </Column>
        </JoinPred>
      </JoinPredList>
      <RangePredList>
        <Range id='R157' sqlType='INTEGER SIGNED ALLOWS NULLS'>
          <Column ref='C108'>
          </Column>
          <!-- empty Range element indicates IS NOT NULL -->
        </Range>
      </RangePredList>
    </Hub>
    <ExtraHub>
    </ExtraHub>
    <OutputList>
      <Output id='O133' name='FQUANT'>
        <Column id='C96' tableId='T2' colIndex='5'>
          CAT.RANGE.FACT.FQUANT
        </Column>
      </Output>
      <Output id='O136' name='FPRICE'>
        <Column id='C97' tableId='T2' colIndex='6'>
          CAT.RANGE.FACT.FPRICE
        </Column>
      </Output>
      <Output id='O145' name='DATA'>
        <Column id='C108' tableId='T1' colIndex='1'>
          CAT.RANGE.DIM2.DIMDATA
        </Column>
      </Output>
    </OutputList>
  </JBB>
</MV>
<Update op='Refresh' TS='1'> </Update>
</Publish>
>>
>>
>>--===========================================
>>-- Query with Simple IS NULL predicate.
>>-- Should match all 3 IS NULL MVs.
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>prepare QueryStmt from
+>	select fprice, fquant, 
+>	       dimdata data
+>	from fact, dim2
+>	where dimkey=dkey
+>	  and dimdata IS NULL
+>	order by fprice;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGE_Q_NULLS_ISNULL;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B0'>                                                                 
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874076438833' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM2                                                        
          <Key>                                                                 
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>          
              CAT.RANGE.DIM2.DKEY                                               
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
        <Table id='T2' TS='212223874079579197' numCols='8'>                     
          CAT.RANGE.FACT                                                        
          <Key>                                                                 
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>           
              CAT.RANGE.FACT.SYSKEY                                             
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <JoinPredList>                                                            
        <JoinPred id='J46'>                                                     
          <Column ref='C17'>                                                    
          </Column>                                                             
          <Column id='C8' tableId='T2' colIndex='7'>                            
            CAT.RANGE.FACT.DIMKEY                                               
          </Column>                                                             
        </JoinPred>                                                             
      </JoinPredList>                                                           
      <RangePredList>                                                           
        <Range id='R60' sqlType='INTEGER SIGNED ALLOWS NULLS'>                  
          <Column ref='C18'>                                                    
          </Column>                                                             
          <OpEQ>                                                                
            <NullVal/>                                                          
          </OpEQ>                                                               
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O40'>                                                         
        <Column id='C6' tableId='T2' colIndex='5'>                              
          CAT.RANGE.FACT.FQUANT                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O43'>                                                         
        <Column id='C7' tableId='T2' colIndex='6'>                              
          CAT.RANGE.FACT.FPRICE                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O52'>                                                         
        <Column id='C18' tableId='T1' colIndex='1'>                             
          CAT.RANGE.DIM2.DIMDATA                                                
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 66 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE                               >> range_nulls1.in;
>>sh echo PUBLISH RANGE_NULLS_ISNULL.xml           >> range_nulls1.in;
>>sh echo PUBLISH RANGE_NULLS_ISNULLOREQUAL.xml    >> range_nulls1.in;
>>sh echo PUBLISH RANGE_NULLS_ISNULLORLESS.xml     >> range_nulls1.in;
>>sh echo PUBLISH RANGE_NULLS_ISNOTNULL.xml        >> range_nulls1.in;
>>sh echo PUBLISH RANGE_NULLS_ISNOTNULLOREQUAL.xml >> range_nulls1.in;
>>sh echo PUBLISH RANGE_NULLS_ISNOTNULLORLESS.xml  >> range_nulls1.in;
>>sh echo MATCH RANGE_Q_NULLS_ISNULL.xml           >> range_nulls1.in;
>>
>>sh sh -c "$QMS range_nulls1.in range_nulls1.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B0'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DIM2
        </Table>
        <Table ref='T2'>
          CAT.RANGE.FACT
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_NULLS_ISNULL
          </MVName>
          <RangePredList>
            <Range ref='R60' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O40' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O43' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O52' result='Provided'>
              <MVColumn ref='C18'>
                DATA
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_NULLS_ISNULLOREQUAL
          </MVName>
          <RangePredList>
            <Range ref='R60' result='NotProvided'>
              <MVColumn ref='C18'>
                DATA
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O40' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O43' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O52' result='Provided'>
              <MVColumn ref='C18'>
                DATA
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_NULLS_ISNULLORLESS
          </MVName>
          <RangePredList>
            <Range ref='R60' result='NotProvided'>
              <MVColumn ref='C18'>
                DATA
              </MVColumn>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O40' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O43' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O52' result='Provided'>
              <MVColumn ref='C18'>
                DATA
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.RANGE_NULLS_ISNOTNULL was disqualified because The query range predicate R60 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_NULLS_ISNOTNULLOREQUAL was disqualified because The query range predicate R60 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_NULLS_ISNOTNULLORLESS was disqualified because The query range predicate R60 is not subsumed by the corresponding MV predicate.]]></Info>
  </JbbResult>
</Result>
>>
>>-- Verify the MV is picked by the optimizer.
>>prepare QueryStmt from
+>	select fprice, fquant, 
+>	       dimdata data
+>	from fact, dim2
+>	where dimkey=dkey
+>	  and dimdata IS NULL
+>	order by fprice;

--- SQL command prepared.
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.RANGE_NULLS_ISNULL                                

--- 1 row(s) selected.
>>
>>--===========================================
>>-- Query with Simple IS NOT NULL predicate.
>>-- Should match all 3 IS NOT NULL MVs (which are equivalent anyway).
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'DUMP';

--- SQL operation complete.
>>
>>prepare QueryStmt from
+>	select fprice, fquant, 
+>	       dimdata data
+>	from fact, dim2
+>	where dimkey=dkey
+>	  and dimdata IS NOT NULL
+>	order by fprice;

--- SQL command prepared.
>>
>>set pattern $$QueryName$$ RANGE_Q_NULLS_ISNOTNULL;
>>obey TEST004(dump_Query);
>>--===========================================
>>--== Create the query descriptor XML
>>--===========================================
>>
>>log $$QueryName$$.tmp clear;
>>sh sh ./CropDescriptor.ksh -q -i $$QueryName$$.TMP -o $$QueryName$$.xml;
>>-- and once for the test log file
>>execute QueryStmt;

Query Descriptor
--------------------------------------------------------------------------------

<Query>                                                                         
  <Version>                                                                     
    1.0                                                                         
  </Version>                                                                    
  <Misc rewriteLevel='3'>                                                       
  </Misc>                                                                       
  <JBB id='B0'>                                                                 
    <Hub>                                                                       
      <JBBCList>                                                                
        <Table id='T1' TS='212223874076438833' numCols='2' rangeBits='00000004'>
          CAT.RANGE.DIM2                                                        
          <Key>                                                                 
            <Column id='C17' tableId='T1' colIndex='0' isNullable='0'>          
              CAT.RANGE.DIM2.DKEY                                               
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
        <Table id='T2' TS='212223874079579197' numCols='8'>                     
          CAT.RANGE.FACT                                                        
          <Key>                                                                 
            <Column id='C1' tableId='T2' colIndex='0' isNullable='0'>           
              CAT.RANGE.FACT.SYSKEY                                             
            </Column>                                                           
          </Key>                                                                
        </Table>                                                                
      </JBBCList>                                                               
      <JoinPredList>                                                            
        <JoinPred id='J46'>                                                     
          <Column ref='C17'>                                                    
          </Column>                                                             
          <Column id='C8' tableId='T2' colIndex='7'>                            
            CAT.RANGE.FACT.DIMKEY                                               
          </Column>                                                             
        </JoinPred>                                                             
      </JoinPredList>                                                           
      <RangePredList>                                                           
        <Range id='R60' sqlType='INTEGER SIGNED ALLOWS NULLS'>                  
          <Column ref='C18'>                                                    
          </Column>                                                             
          <!-- empty Range element indicates IS NOT NULL -->                    
        </Range>                                                                
      </RangePredList>                                                          
    </Hub>                                                                      
    <ExtraHub>                                                                  
    </ExtraHub>                                                                 
    <OutputList>                                                                
      <Output id='O40'>                                                         
        <Column id='C6' tableId='T2' colIndex='5'>                              
          CAT.RANGE.FACT.FQUANT                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O43'>                                                         
        <Column id='C7' tableId='T2' colIndex='6'>                              
          CAT.RANGE.FACT.FPRICE                                                 
        </Column>                                                               
      </Output>                                                                 
      <Output id='O52'>                                                         
        <Column id='C18' tableId='T1' colIndex='1'>                             
          CAT.RANGE.DIM2.DIMDATA                                                
        </Column>                                                               
      </Output>                                                                 
    </OutputList>                                                               
  </JBB>                                                                        
</Query>                                                                        

--- 64 row(s) selected.
>>
>>
>>control query default MVQR_LOG_QUERY_DESCRIPTORS 'OFF';

--- SQL operation complete.
>>
>>sh echo INITIALIZE                               >> range_nulls2.in;
>>sh echo PUBLISH RANGE_NULLS_ISNULL.xml           >> range_nulls2.in;
>>sh echo PUBLISH RANGE_NULLS_ISNULLOREQUAL.xml    >> range_nulls2.in;
>>sh echo PUBLISH RANGE_NULLS_ISNULLORLESS.xml     >> range_nulls2.in;
>>sh echo PUBLISH RANGE_NULLS_ISNOTNULL.xml        >> range_nulls2.in;
>>sh echo PUBLISH RANGE_NULLS_ISNOTNULLOREQUAL.xml >> range_nulls2.in;
>>sh echo PUBLISH RANGE_NULLS_ISNOTNULLORLESS.xml  >> range_nulls2.in;
>>sh echo MATCH RANGE_Q_NULLS_ISNOTNULL.xml        >> range_nulls2.in;
>>
>>sh sh -c "$QMS range_nulls2.in range_nulls2.out";
>>
>>log;
<Result>
  <Version>
    1.0
  </Version>
  <JbbResult ref='B0'>
    <JbbSubset hasGroupby='0'>
      <TableList>
        <Table ref='T1'>
          CAT.RANGE.DIM2
        </Table>
        <Table ref='T2'>
          CAT.RANGE.FACT
        </Table>
      </TableList>
      <CandidateList>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_NULLS_ISNOTNULL
          </MVName>
          <RangePredList>
            <Range ref='R60' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O40' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O43' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O52' result='Provided'>
              <MVColumn ref='C18'>
                DATA
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_NULLS_ISNOTNULLOREQUAL
          </MVName>
          <RangePredList>
            <Range ref='R60' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O40' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O43' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O52' result='Provided'>
              <MVColumn ref='C18'>
                DATA
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
        <Candidate isPreferredMatch='0' statsOnly='0'>
          <MVName TS='0'>
            CAT.RANGE.RANGE_NULLS_ISNOTNULLORLESS
          </MVName>
          <RangePredList>
            <Range ref='R60' result='Provided'>
            </Range>
          </RangePredList>
          <OutputList>
            <Output ref='O40' result='Provided'>
              <MVColumn ref='C6'>
                FQUANT
              </MVColumn>
            </Output>
            <Output ref='O43' result='Provided'>
              <MVColumn ref='C7'>
                FPRICE
              </MVColumn>
            </Output>
            <Output ref='O52' result='Provided'>
              <MVColumn ref='C18'>
                DATA
              </MVColumn>
            </Output>
          </OutputList>
        </Candidate>
      </CandidateList>
    </JbbSubset>
    <Info><![CDATA[MV CAT.RANGE.RANGE_NULLS_ISNULL was disqualified because The query range predicate R60 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_NULLS_ISNULLOREQUAL was disqualified because The query range predicate R60 is not subsumed by the corresponding MV predicate.]]></Info>
    <Info><![CDATA[MV CAT.RANGE.RANGE_NULLS_ISNULLORLESS was disqualified because The query range predicate R60 is not subsumed by the corresponding MV predicate.]]></Info>
  </JbbResult>
</Result>
>>
>>-- Verify the MV is picked by the optimizer.
>>prepare QueryStmt from
+>	select fprice, fquant, 
+>	       dimdata data
+>	from fact, dim2
+>	where dimkey=dkey
+>	  and dimdata IS NOT NULL
+>	order by fprice;

--- SQL command prepared.
>>
>>execute checkPlan;

OPERATOR                        TNAME
------------------------------  ------------------------------------------------------------

FILE_SCAN                       CAT.RANGE.RANGE_NULLS_ISNOTNULL                             

--- 1 row(s) selected.
>>
>>
>>obey TEST004(clean_up);
>>----------------------------------------------------
>>------------------ clean up section ----------------
>>----------------------------------------------------
>>drop schema range cascade;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

